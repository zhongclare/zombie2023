window.__require=function e(t,n,i){function o(a,c){if(!n[a]){if(!t[a]){var r=a.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+a+"'")}a=r}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){return o(t[a][1][e]||e)},f,f.exports,e,t,n,i)}return n[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<i.length;a++)o(i[a]);return o}({Game:[function(e,t,n){"use strict";cc._RF.push(t,"95be0R3ixxH1YBp9RKrtl4i","Game");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.Game=void 0;var a=cc._decorator,c=a.ccclass,r=a.property,l=(cc.Enum({EASY:1,HARD:2}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starPrefab=null,t.maxStarDuration=0,t.minStarDuration=0,t.groundNode=null,t.playerNode=null,t.scoreLabel=null,t.scoreAudio=null,t}return o(t,e),t.prototype.onLoad=function(){this.groundY=this.groundNode.y+this.groundNode.height/2,this.timer=0,this.starDuration=0,this.spawnNewStar(),this.score=0},t.prototype.spawnNewStar=function(){var e=cc.instantiate(this.starPrefab);this.node.addChild(e),e.setPosition(this.getNewStarPosition()),e.getComponent("Star").init(this),this.starDuration=this.minStarDuration+cc.randomRange(0,1)*(this.maxStarDuration-this.minStarDuration),this.timer=0},t.prototype.getNewStarPosition=function(){var e,t=this.groundY+cc.randomRange(0,1)*this.playerNode.getComponent("Player").jumpHeight+50,n=this.node.width/2;return e=cc.randomRange(0,1)*n,cc.v2(e,t)},t.prototype.update=function(e){this.timer>this.starDuration?this.gameOver():this.timer+=e},t.prototype.gainScore=function(){this.score+=1,this.scoreLabel.string="Score: "+this.score.toString(),cc.audioEngine.play(this.scoreAudio,!1,1)},t.prototype.gameOver=function(){this.playerNode.stopAllActions(),cc.director.loadScene("game")},s([r(cc.Prefab)],t.prototype,"starPrefab",void 0),s([r(cc.Integer)],t.prototype,"maxStarDuration",void 0),s([r(cc.Integer)],t.prototype,"minStarDuration",void 0),s([r(cc.Node)],t.prototype,"groundNode",void 0),s([r(cc.Node)],t.prototype,"playerNode",void 0),s([r(cc.Label)],t.prototype,"scoreLabel",void 0),s([r(cc.AudioClip)],t.prototype,"scoreAudio",void 0),s([c],t)}(cc.Component));n.Game=l,cc._RF.pop()},{}],Helloworld:[function(e,t,n){"use strict";cc._RF.push(t,"e1b90/rohdEk4SdmmEZANaD","Helloworld");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,r=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return o(t,e),t.prototype.start=function(){this.label.string=this.text},s([r(cc.Label)],t.prototype,"label",void 0),s([r],t.prototype,"text",void 0),s([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],Player:[function(e,t,n){"use strict";cc._RF.push(t,"6903ajMiC5Brr2g3ohA0fj/","Player");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,r=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return o(t,e),t.prototype.start=function(){},s([r(cc.Label)],t.prototype,"label",void 0),s([r],t.prototype,"text",void 0),s([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],UICtrl:[function(e,t){"use strict";cc._RF.push(t,"58f18GHVoNLz6o72a0Rxn5Q","UICtrl"),t.exports={UIList:{},BLACK:null,outUI:null,zIndex:0,addUI:function(e,t,n){if(this.findUI(e))return n&&this.findUI(e).getComponent(e+"Ctrl").init(n),this.showUI(e,!0),this.findUI(e);var i=cc.instantiate(config.warehouse.prefabList[e]);return n?i.addComponent(e+"Ctrl").init(n):i.addComponent(e+"Ctrl"),t.addChild(i),this.UIList[e]=i,i},checkUIKey:function(e){for(var t in this.UIList)if(t===e)return!0;return!1},findUI:function(e){return!!this.UIList[e]&&this.UIList[e]},getUIComponent:function(e){if(this.UIList[e].getComponent(e+"Ctrl"))return this.UIList[e].getComponent(e+"Ctrl");this.UIList[e].addComponent(e+"Ctrl")},removeUI:function(e){this.UIList[e]?delete this.UIList[e]:console.log(e+"\u4e0d\u5b58\u5728")},showUI:function(e,t){this.UIList[e]?this.UIList[e].active=t:console.log(e+"\u4e0d\u5b58\u5728")},setUIParent:function(e,t){this.UIList[e]?this.UIList[e].parent=t:console.log(e+"\u4e0d\u5b58\u5728")},stickOutUI:function(e){if(this.outUI=e,this.zIndex=e.getSiblingIndex(),e){if(this.BLACK){this.BLACK.parent=e.parent;var t=e.parent.children.length-1;e.setSiblingIndex(t)}else this.BLACK=cc.instantiate(config.warehouse.prefabList.black),e.parent.addChild(this.BLACK),t=e.parent.children.length-1,e.setSiblingIndex(t);this.BLACK.active=!0}},setBlack:function(e){this.BLACK.active=!0,this.BLACK.parent=e.parent;var t=e.getSiblingIndex();this.BLACK.setSiblingIndex(t-1)},cancelStickOut:function(){this.BLACK&&(this.BLACK.active&&(this.BLACK.active=!1),this.BLACK.parent=null,this.outUI.setSiblingIndex(this.zIndex))}},cc._RF.pop()},{}],animCtrl:[function(e,t){"use strict";cc._RF.push(t,"a43f0j6l4lDYqg+4MWBNCet","animCtrl"),t.exports={waitingAnim:[],playProgress:0,chessGroup:[],getWaitingTween:function(e){return new i(e)},playWaitingAnim:function(){this.waitingAnim.length?this.playCurrentAnim():(this.playProgress=0,this.waitingAnim=[],config.UICtrl.getUIComponent("boardLayer").removeChess())},playCurrentAnim:function(){this.waitingAnim[this.playProgress]?this.waitingAnim[this.playProgress].play():config.eventDelegate.dispatchEvent("waitingAnimDone")},initWaitingAnimEvent:function(){var e=this;config.eventDelegate.addEvent("waitingAnimDone",function(){e.playProgress+=1,e.playProgress>=e.waitingAnim.length?(e.playProgress=0,e.waitingAnim=[],config.UICtrl.getUIComponent("boardLayer").removeChess()):e.playCurrentAnim()})},addWaitingAnim:function(e){e.init(),this.waitingAnim.push(e)},creatLevel1Anim:function(){for(var e=this.chessGroup[0].type,t=config.gameInfo.chessData[e].level1effect[0],i=[],o=0;o<this.chessGroup.length;o++){var s=this.getShootTween(t,this.chessGroup[o]);i.push(s)}var a=new n(i);this.addWaitingAnim(a),this.chessGroup=[]},creatHigherLevelAnim:function(){for(var e=0;e<this.chessGroup.length;e++){var t=this.chessGroup[e].type,n=this.chessGroup[e].level,o=config.gameInfo.chessData[t],s=o.level1effect[0];2==n?s=o.level2effect[0]:3==n&&(s=o.level3effect[0]);var a=this.getShootTween(s,this.chessGroup[e]),c=new i(a);this.addWaitingAnim(c)}this.chessGroup=[]},getShootTween:function(e,t){switch(e){case 1:var n=config.tools.transformPositionOnNode(config.UICtrl.getUIComponent("boardLayer").mapLayer,config.UICtrl.getUIComponent("enemyUI").aimPoint);return[cc.tween(t.middle).to(.5,{position:n}),t];case 2:return n=config.tools.transformPositionOnNode(config.UICtrl.getUIComponent("boardLayer").mapLayer,config.UICtrl.getUIComponent("playerUI").skillButton),[cc.tween(t.middle).to(.5,{position:n}),t]}},jumpNum:function(e,t){this.windowSize=cc.winSize;var n=(844-this.windowSize.height)/2,i=new cc.Node;i.scale=.33;var o=i.addComponent(cc.Label);o.string="\u8865\u4ed3"+e+"W",o.fontSize=70,o.lineHeight=80,o.enableBold=!0;var s=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),t);i.x=s.x,i.y+=90,i.y-=n/2.5,config.UICtrl.findUI("effect").addChild(i);var a=i.addComponent(cc.LabelOutline);a.color=new cc.Color(186,186,186),a.width=2,a.color=new cc.Color(34,34,34),a.blur=5,cc.tween(i).by(.5,{y:20}).call(function(){i.destroy()}).start()},showCost:function(){},sellNum:function(e,t){this.windowSize=cc.winSize;var n=(844-this.windowSize.height)/2,i=new cc.Node,o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u94b1"],o.x=-180,o.scale=.54,i.addChild(o),i.scale=.33;var s=i.addComponent(cc.Label);s.string="+"+e+"W",s.fontSize=70,s.lineHeight=80,s.enableBold=!0;var a=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),t);i.x=a.x,i.y-=n/2.5,i.y+=90,config.UICtrl.findUI("effect").addChild(i);var c=i.addComponent(cc.LabelOutline);c.color=new cc.Color(186,186,186),c.width=2,c.color=new cc.Color(34,34,34),c.blur=5,cc.tween(i).by(.75,{y:40}).call(function(){i.destroy()}).start()},packageGoods:function(e,t,n){var i=this;e.getChildByName("level").active=!1,e.getChildByName("pic").active=!1,e.getChildByName("bg").active=!1;var o=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),config.UICtrl.getUIComponent("priceBoard").getPriceNodeByType(n));cc.tween(e).to(.05,{scale:1.1}).delay(.1).call(function(){e.destroy(),i.flyFruit(o,t,e,n)}).start()},composeEffect:function(e){this.effectPool||(this.effectPool=new cc.NodePool),this.effectPool.size()<=0&&this.addEffectPool(),config.dj.playEffect(config.warehouse.sound["\u68cb\u5b50\u5408\u6210"],.6);var t=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),n=this.effectPool.get();n.scale=.74,n.setPosition(t),config.UICtrl.findUI("effect").addChild(n),n.getComponent(cc.Animation).play("composeEffect")},composeTwoEffect:function(e){this.effectPool2||(this.effectPool2=new cc.NodePool),this.effectPool2.size()<=0&&this.addEffectPool2(),config.dj.playEffect(config.warehouse.sound["\u68cb\u5b50\u5408\u6210"],.8);var t=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),n=this.effectPool2.get();n.scale=.94,n.setPosition(t),config.UICtrl.findUI("effect").addChild(n),n.getComponent(cc.Animation).play("composeTwo")},composeThreeEffect:function(e){this.effectPool3||(this.effectPool3=new cc.NodePool),this.effectPool3.size()<=0&&this.addEffectPool3(),config.dj.playEffect(config.warehouse.sound["\u68cb\u5b50\u5408\u6210"]);var t=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),n=this.effectPool3.get();n.scale=.74,n.setPosition(t),config.UICtrl.findUI("effect").addChild(n),n.getComponent(cc.Animation).play("composeThree")},bonusEffect:function(e,t){this.windowSize=cc.winSize;var n=new cc.Node;n.scale=.33;var i=n.addComponent(cc.Label);i.string="\u5956\u52b1+"+t,i.fontSize=70,i.lineHeight=80,i.enableBold=!0;var o=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);n.setPosition(o),config.UICtrl.findUI("effect").addChild(n);var s=n.addComponent(cc.LabelOutline);s.color=new cc.Color(186,186,186),s.width=2,s.color=new cc.Color(71,46,25),s.blur=5,cc.tween(n).by(1.75,{y:40}).call(function(){n.destroy()}).start()},addEffectPool:function(){var e=cc.instantiate(config.warehouse.prefabList.composeEffect);e.getComponent(cc.Animation).addClip(config.warehouse.animationClip.composeEffect,"composeEffect"),e.getComponent(cc.Animation).on("stop",function(){this.effectPool.put(e)},this),this.effectPool.put(e)},addEffectPool2:function(){var e=cc.instantiate(config.warehouse.prefabList.composeTwo);e.getComponent(cc.Animation).addClip(config.warehouse.animationClip.composeTwo,"composeTwo"),e.getComponent(cc.Animation).on("stop",function(){this.effectPool2.put(e)},this),this.effectPool2.put(e)},addEffectPool3:function(){var e=cc.instantiate(config.warehouse.prefabList.composeThree);e.getComponent(cc.Animation).addClip(config.warehouse.animationClip.composeThree,"composeThree"),e.getComponent(cc.Animation).on("stop",function(){this.effectPool3.put(e)},this),this.effectPool3.put(e)},flyMoney:function(e,t,n){var i=this,o=0,s=0;1==t?(o=1,s=0):t<=5?(o=2,s=25):t<=10?(o=3,s=25):t<=14?(o=4,s=50):t<=19?(o=5,s=50):t<=40?(o=8,s=50):t<=100?(o=10,s=75):t<=200?(o=15,s=100):t<=300?(o=20,s=125):t<=400?(o=22,s=125):t<=500?(o=24,s=125):t<=800?(o=26,s=125):t<=1e3?(o=28,s=125):t<=1500?(o=30,s=125):t<=2e3?(o=35,s=150):t<=3e3?(o=40,s=160):t<=4e3?(o=50,s=170):(o=60,s=180),this.moneyPool||(this.moneyPool=new cc.NodePool);var a=this.moneyPool.size(),c=a>o?0:o-a;this.initMoneyPool(c);for(var r=this.getCirclePoints(s,config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),n),o,60),l=function(t){h=.3*Math.random()+.3;var o=i.moneyPool.get();o.scale=.12,o.setPosition(config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),n)),config.UICtrl.findUI("effect").addChild(o),cc.tween(o).to(.2,{position:r[t],scale:.2},{easing:"quadOut"}).to(h,{position:e,scale:.2},{easing:"quadIn"}).call(function(){t==r.length-1&&(config.dj.playEffect(config.warehouse.sound["\u652f\u4ed8\u5b9d"]),config.UICtrl.getUIComponent("assets").changeAssets(cc.find("Canvas").getComponent("gameCtrl").assetCount)),i.moneyPool.put(o)}).start()},f=0;f<r.length;f++){var h;l(f)}},flyFruit:function(e,t,n,i){var o=this,s=0,a=0;1==t?(s=1,a=0):t<=5?(s=2,a=25):t<=10?(s=3,a=25):t<=14?(s=4,a=50):t<=19?(s=5,a=50):t<=40?(s=8,a=50):t<=100?(s=10,a=75):t<=200?(s=15,a=100):t<=300?(s=20,a=125):t<=400?(s=22,a=125):t<=500?(s=24,a=125):t<=800?(s=26,a=125):t<=1e3?(s=28,a=125):t<=1500?(s=30,a=125):t<=2e3?(s=35,a=150):t<=3e3?(s=40,a=160):t<=4e3?(s=50,a=170):(s=60,a=180),this.fruitPool||(this.fruitPool=new cc.NodePool);var c=this.fruitPool.size(),r=c>s?0:s-c;this.initFruitPool(r);for(var l=this.getCirclePoints(a,config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),n),s,60),f=function(t){g=.3*Math.random()+.3;var s=o.fruitPool.get();s.getComponent(cc.Sprite).spriteFrame=config.tools.getChessPic(i),s.setPosition(config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),n)),config.UICtrl.findUI("effect").addChild(s),cc.tween(s).to(g,{position:e},{easing:"quadIn"}).call(function(){t==l.length-1&&(config.dj.playEffect(config.warehouse.sound["\u652f\u4ed8\u5b9d2"]),config.UICtrl.getUIComponent("assets").changeAssets(cc.find("Canvas").getComponent("gameCtrl").assetCount)),o.fruitPool.put(s)}).start()},h=0;h<l.length;h++){var g;f(h)}},initFruitPool:function(e){for(var t=0;t<e;t++){var n=new cc.Node;n.addComponent(cc.Sprite),n.scale=.28,this.fruitPool.put(n)}},UIJumpOut:function(){},showSellReword:function(e){this.windowSize=cc.winSize;var t=(844-this.windowSize.height)/2,n=new cc.Node,i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u94b1"],i.scale=.7,i.x=-150,n.addChild(i),n.scale=.33;var o=n.addComponent(cc.Label);o.string="+"+e+"W",o.fontSize=70,o.lineHeight=80,o.enableBold=!0;var s=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),config.UICtrl.findUI("assets"));n.y=s.y,n.y-=30,n.y-=t/2.5,config.UICtrl.findUI("effect").addChild(n);var a=n.addComponent(cc.LabelOutline);a.color=new cc.Color(186,186,186),a.width=2,a.color=new cc.Color(34,34,34),a.blur=5,cc.tween(n).by(.5,{y:20}).call(function(){n.destroy()}).start()},initMoneyPool:function(e){for(var t=0;t<e;t++){var n=new cc.Node;n.addComponent(cc.Sprite),n.addComponent(cc.Animation).addClip(config.warehouse.animationClip.coinFlip,"coinFlip"),n.getComponent(cc.Animation).play("coinFlip"),n.scale=.08,this.moneyPool.put(n)}},getCirclePoints:function(e,t,n,i){for(var o=[],s=Math.PI/180*Math.round(360/n),a=0;a<n;a++){var c=t.x+e*Math.sin(s*a),r=t.y+e*Math.cos(s*a);o.unshift(cc.v2(c+Math.random()*i,r+Math.random()*i))}return o},keepSlide:function(e,t,n){var i=cc.instantiate(config.warehouse.prefabList.point);if(config.UICtrl.findUI("effect").addChild(i),n){var o=new cc.Node;o.scale=1.2,o.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u5408\u6210\u66f4\u9ad8\u7ea7\u5546\u54c1"],i.addChild(o),o.y+=280}var s=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);return s.x+=10,s.y-=30,i.setPosition(s),0==t?cc.tween(i).by(.5,{x:-50}).delay(.25).call(function(){i.setPosition(s)}).union().repeatForever().start():1==t?cc.tween(i).by(.5,{x:50}).delay(.25).call(function(){i.setPosition(s)}).union().repeatForever().start():2==t?cc.tween(i).by(.5,{y:50}).delay(.25).call(function(){i.setPosition(s)}).union().repeatForever().start():cc.tween(i).by(.5,{y:-50}).delay(.25).call(function(){i.setPosition(s)}).union().repeatForever().start(),i},keepSlide1:function(e,t,n){var i=cc.winSize.height/844,o=new cc.Node;config.UICtrl.findUI("effect").addChild(o);var s=new cc.Node;s.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,o.addChild(s),s.scale=.85,s.scale*=i;var a=new cc.Node;a.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,o.addChild(a),a.scale=.85,a.scale*=i;var c=cc.instantiate(config.warehouse.prefabList.arrowSlide);o.addChild(c),c.scale*=i;var r=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);if(n){var l=cc.instantiate(config.warehouse.prefabList.cowTip);o.addChild(l),l.getChildByName("tip").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[1],l.y=r.y,l.y-=90}c.setPosition(r),a.setPosition(r),s.setPosition(r),0==t?(s.x-=65*i,c.x-=35*i):1==t?(s.x+=65*i,c.x+=35*i):2==t?(s.y+=65*i,c.y+=40*i,c.angle=90):(s.y-=65*i,c.y-=40*i,c.angle=90),cc.tween(c.children[0]).by(.25,{x:10}).by(.25,{x:-10}).delay(.25).union().repeatForever().start(),cc.tween(c.children[1]).by(.25,{x:-20}).by(.25,{x:20}).delay(.25).union().repeatForever().start(),config.eventDelegate.addEvent("cancelSlide1",function(){o.destroy()})},showSlideAnim:function(e,t,n){var i=cc.instantiate(config.warehouse.prefabList.point);if(config.UICtrl.findUI("effect").addChild(i),n){var o=new cc.Node;o.scale=1.2,o.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u5408\u6210\u66f4\u9ad8\u7ea7\u5546\u54c1"],i.addChild(o),o.y+=280}var s=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);s.x+=10,s.y-=30,i.setPosition(s),0==t?cc.tween(i).by(.5,{x:-50}).delay(.25).call(function(){i.setPosition(s)}).union().repeat(3).call(function(){i.destroy()}).start():1==t?cc.tween(i).by(.5,{x:50}).delay(.25).call(function(){i.setPosition(s)}).union().repeat(3).call(function(){i.destroy()}).start():2==t?cc.tween(i).by(.5,{y:50}).delay(.25).call(function(){i.setPosition(s)}).union().repeat(3).call(function(){i.destroy()}).start():cc.tween(i).by(.5,{y:-50}).delay(.25).call(function(){i.setPosition(s)}).union().repeat(3).call(function(){i.destroy()}).start()},showSlideAnim1:function(e,t){var n=cc.winSize.height/844,i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,config.UICtrl.findUI("effect").addChild(i),i.scale=.85,i.scale*=n;var o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,config.UICtrl.findUI("effect").addChild(o),o.scale=.85,o.scale*=n;var s=cc.instantiate(config.warehouse.prefabList.arrowSlide);config.UICtrl.findUI("effect").addChild(s),s.scale*=n;var a=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);s.setPosition(a),o.setPosition(a),i.setPosition(a),0==t?(i.x-=65*n,s.x-=35*n):1==t?(i.x+=65*n,s.x+=35*n):2==t?(i.y+=65*n,s.y+=40*n,s.angle=90):(i.y-=65*n,s.y-=40*n,s.angle=90),cc.tween(s.children[0]).by(.25,{x:10}).by(.25,{x:-10}).delay(.25).union().repeat(3).call(function(){i.destroy(),s.destroy(),o.destroy()}).start(),cc.tween(s.children[1]).by(.25,{x:-20}).by(.25,{x:20}).delay(.25).union().repeat(3).start()},teachSlide:function(e,t){var n=cc.winSize.height/844,i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,config.UICtrl.findUI("effect").addChild(i),i.scale=.85,i.scale*=n;var o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,config.UICtrl.findUI("effect").addChild(o),o.scale=.85,o.scale*=n;var s=cc.instantiate(config.warehouse.prefabList.arrowSlide);config.UICtrl.findUI("effect").addChild(s),s.scale*=n;var a=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);s.setPosition(a),o.setPosition(a),i.setPosition(a),0==t?(i.x-=65*n,s.x-=35*n):1==t?(i.x+=65*n,s.x+=35*n):2==t?(i.y+=65*n,s.y+=40*n,s.angle=90):(i.y-=65*n,s.y-=40*n,s.angle=90),cc.tween(s.children[0]).by(.25,{x:10}).by(.25,{x:-10}).delay(.25).union().repeat(3).call(function(){i.destroy(),s.destroy(),o.destroy()}).start(),cc.tween(s.children[1]).by(.25,{x:-20}).by(.25,{x:20}).delay(.25).union().repeat(3).start()},keepPoint:function(e,t){var n=cc.winSize.height/844,i=new cc.Node;config.UICtrl.findUI("effect").addChild(i);var o=cc.instantiate(config.warehouse.prefabList.point);o.getComponent(cc.Animation).addClip(config.warehouse.animationClip.keepPoint,"keepPoint");var s=new cc.Node;s.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,i.addChild(s),i.addChild(o),s.scale=.85,s.scale*=n;var a=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);if(s.setPosition(a),t){var c=cc.instantiate(config.warehouse.prefabList.cowTip);i.addChild(c),c.getChildByName("tip").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[3],c.y=a.y,c.y-=110}a.x+=10,a.y-=30,o.setPosition(a),o.getComponent(cc.Animation).play("keepPoint"),config.eventDelegate.addEvent("cancelKeepPoint",function(){i.destroy()})},showPointAnim:function(e){var t=cc.winSize.height/844,n=cc.instantiate(config.warehouse.prefabList.point);config.UICtrl.findUI("effect").addChild(n),n.getComponent(cc.Animation).addClip(config.warehouse.animationClip.point,"point"),n.getComponent(cc.Animation).on("stop",function(){n.destroy()},this);var i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,n.addChild(i),i.x-=45,i.y+=150,i.scale=3,i.scale*=t;var o=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);o.x+=10,o.y-=30,n.setPosition(o),n.getComponent(cc.Animation).play("point")},showADPointAnim:function(e){var t=cc.instantiate(config.warehouse.prefabList.point);config.UICtrl.findUI("effect").addChild(t),t.getComponent(cc.Animation).addClip(config.warehouse.animationClip.point,"point"),t.getComponent(cc.Animation).on("stop",function(){t.destroy()},this);var n=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);return n.x+=10,n.y-=30,t.setPosition(n),t.getComponent(cc.Animation).play("point"),t},showPriceBoardFruit:function(){var e=config.UICtrl.findUI("priceBoard"),t=cc.instantiate(config.warehouse.prefabList.select),n=new cc.Node;n.scale=.4,n.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[2],n.y-=65,t.addChild(n),t.width=340,t.height=80,config.UICtrl.findUI("effect").addChild(t),t.setPosition(config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e)),t.y-=30,config.eventDelegate.addEvent("cancelPriceBoard",function(){t.destroy()})},showAssets:function(){var e=config.UICtrl.findUI("assets"),t=cc.instantiate(config.warehouse.prefabList.select),n=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),i=cc.instantiate(config.warehouse.prefabList.cowTip);t.addChild(i),i.getChildByName("tip").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[4],i.y=n.y,i.y-=570,t.width=220,config.UICtrl.findUI("effect").addChild(t),t.setPosition(n),config.eventDelegate.addEvent("cancelAsset",function(){t.destroy()})},showTarget:function(){var e=config.UICtrl.findUI("aim"),t=cc.instantiate(config.warehouse.prefabList.select);t.height=80,t.width=200,config.UICtrl.findUI("effect").addChild(t),t.setPosition(config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e)),t.x+=72.5,config.eventDelegate.addEvent("cancelTarget",function(){t.destroy()})},showStep:function(){var e=config.UICtrl.findUI("step"),t=new cc.Node;config.UICtrl.findUI("effect").addChild(t);var n=cc.instantiate(config.warehouse.prefabList.select);t.addChild(n);var i=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),o=cc.instantiate(config.warehouse.prefabList.cowTip);t.addChild(o),o.getChildByName("tip").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[5],o.y=i.y,o.y-=90,n.setPosition(i),config.eventDelegate.addEvent("cancelStep",function(){t.destroy()})},showAD:function(){var e=config.UICtrl.findUI("speculation"),t=new cc.Node;config.UICtrl.findUI("effect").addChild(t);var n=cc.instantiate(config.warehouse.prefabList.select);t.addChild(n);var i=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),o=cc.instantiate(config.warehouse.prefabList.cowTip);t.addChild(o),o.getChildByName("tip").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[11],o.y=i.y,o.y+=160,n.width=360,n.setPosition(i),config.eventDelegate.addEvent("cancelAD",function(){t.destroy()})},teachDone:function(){},levelJump:function(e,t){var n=e.middle.getChildByName("pic"),i=.38;3==t?i=.38:4==t?i=.48:t>4&&(i=.58),cc.tween(n).to(.1,{scale:i},{easing:"quadIn"}).to(.05,{scale:.28}).start()},initCowTip:function(){this.cowPool||(this.cowPool=new cc.NodePool),this.cowPool.size()<=0&&this.addCowPool()},addCowPool:function(){var e=cc.instantiate(config.warehouse.prefabList.cowTip);config.UICtrl.findUI("effect").addChild(e),this.cowPool.put(e)},teachStage1:function(e){var t=cc.instantiate(config.warehouse.prefabList.teachStage1);config.UICtrl.findUI("effect").addChild(t),t.getComponent("teachStage1Ctrl").initTeach(e)},outComTip:function(e){this.cowPool.size()<=0&&this.addCowPool();var t=this.cowPool.get();config.UICtrl.findUI("effect").addChild(t);var n=t.getChildByName("cover"),i=t.getChildByName("cow"),o=i.getChildByName("bg"),s=o.getChildByName("label"),a=t.getChildByName("block");switch(n.width=644,n.height=655,n.x=0,n.y=0,i.x=90,i.y=-60,e){case"board":s.getComponent(cc.Label).string="\u6ed1\u52a8\u5408\u6210\u66f4\u9ad8\u7b49\u7ea7\u5546\u54c1\uff01",i.y+=130,n.y-=95,n.x+=5,n.active=!1,o.active=!1,n.width=785,n.height=795,config.UICtrl.stickOutUI(config.UICtrl.findUI("play")),config.UICtrl.findUI("board").setSiblingIndex(4),o.active=!0,a.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),"undefined"==typeof wx||"undefined"==typeof KSGameGlobal&&config.wxTools.boardTeach();break;case"sell":s.getComponent(cc.Label).string="\u70b9\u51fb\u5356\u51fa\u589e\u52a0\u8d44\u91d1",i.y+=130,n.y-=95,n.x+=5,n.active=!1,n.width=785,n.height=795,config.UICtrl.stickOutUI(config.UICtrl.findUI("play")),config.UICtrl.findUI("board").setSiblingIndex(4),o.active=!0,a.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),config.wxTools.sellTeach();break;case"priceBoard":s.getComponent(cc.Label).string="\u8fd9\u91cc\u662f\u4ef7\u683c\u677f\uff0c\u5408\u6210\u5546\u54c1\u4f1a\u63d0\u9ad8\u4ef7\u683c\uff01",n.y+=257,n.x+=3,n.width=740,n.height=530,i.y+=190,i.x+=60,n.active=!1,config.UICtrl.findUI("board").setSiblingIndex(2),config.UICtrl.stickOutUI(config.UICtrl.findUI("priceBoard")),o.active=!0,a.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),"undefined"==typeof wx||"undefined"==typeof KSGameGlobal&&config.wxTools.priceBoard();break;case"herald":s.getComponent(cc.Label).string="\u8fd9\u91cc\u5c55\u793a\u4ef7\u683c\u4f1a\u5728\u51e0\u56de\u5408\u540e\u53d8\u5316\u3002",n.y+=200,n.width=620,n.height=490,i.y+=100,n.active=!1,config.UICtrl.stickOutUI(config.UICtrl.findUI("herald")),o.active=!0,a.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),config.UICtrl.getUIComponent("play").givePromptOnce();break;case"step":s.getComponent(cc.Label).string="\u8fd9\u91cc\u662f\u5269\u4f59\u6b65\u6570,\u5408\u6210\u53ca\u70b9\u51fb\u5356\u51fa\u90fd\u4f1a\u6d88\u8017\u6b65\u6570\u3002",n.y+=135,n.x+=140,n.width=510,n.height=500,i.x+=60,i.y+=120,n.active=!1,config.UICtrl.findUI("board").setSiblingIndex(2),config.UICtrl.stickOutUI(config.UICtrl.findUI("step")),o.active=!0,a.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),"undefined"==typeof wx||"undefined"==typeof KSGameGlobal&&config.wxTools.stepTeach();break;case"asset":s.getComponent(cc.Label).string="\u8fd9\u91cc\u662f\u8d44\u91d1,\u8fbe\u6210\u76ee\u6807\u5373\u53ef\u901a\u5173\uff01",n.y+=135,n.x-=20,n.width=655,n.height=510,n.active=!1,config.UICtrl.stickOutUI(config.UICtrl.findUI("assets")),o.active=!0,a.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),i.y+=120,i.x+=50,"undefined"==typeof wx||"undefined"==typeof KSGameGlobal&&config.wxTools.assetsTeach();break;case"ad":s.getComponent(cc.Label).string="\u8fd9\u91cc\u662f\u5e7f\u544a\u9053\u5177\uff0c\u5206\u522b\u53ef\u4ee5\n\u201c\u83b7\u5f97\u8d44\u91d1\u201d\u3001\u201c\u5237\u65b0\u4ef7\u683c\u201d\u3001\n\u201c\u589e\u52a0\u6b65\u6570\u201d\uff0c\u597d\u597d\u5229\u7528\u5427\uff01",n.y-=340,n.width=760,n.height=510,i.y-=270,i.x+=50,n.active=!1,config.UICtrl.setBlack(config.UICtrl.findUI("bailout")),o.active=!0,a.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),config.UICtrl.getUIComponent("play").givePromptOnce();break;case"lowAsset":s.getComponent(cc.Label).string="\u5c0f\u5fc3\uff0c\u4f60\u5feb\u7834\u4ea7\u5566,\u70b9\u51fb\u5356\u51fa\u83b7\u5f97\u8d44\u91d1\u3002",n.active=!1,o.active=!0,a.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),i.y+=80;break;case"animate":case"moreAnimate":break;case"boardLocked":s.getComponent(cc.Label).string="\u65e0\u6cd5\u4e09\u6d88\u5408\u6210\u4e86\uff0c\u70b9\u51fb\u5356\u51fa\u3002",n.active=!1,o.active=!0,a.on(cc.Node.EventType.TOUCH_END,this.tipBack,this);break;case"highLevelChess":s.getComponent(cc.Label).string="\u673a\u4e0d\u53ef\u5931,\u70b9\u51fb\u5356\u51fa\u83b7\u5f97\u8d44\u91d1\u3002",n.active=!1,o.active=!0,a.on(cc.Node.EventType.TOUCH_END,this.tipBack,this);break;case"target":s.getComponent(cc.Label).string="\u8fd9\u662f\u6e38\u620f\u76ee\u6807",config.UICtrl.stickOutUI(config.UICtrl.findUI("aim")),o.active=!0,a.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),i.y+=260}},tipBack:function(e){var t=e.currentTarget.parent,n=t.getChildByName("cow").getChildByName("bg"),i=t.getChildByName("block");n.active=!1,i.off(cc.Node.EventType.TOUCH_END,this.tipBack,this),config.UICtrl.cancelStickOut(),this.cowPool.put(t)},remindProvince:function(e){var t=cc.instantiate(config.warehouse.prefabList.point);config.UICtrl.findUI("UI").addChild(t),t.getComponent(cc.Animation).addClip(config.warehouse.animationClip.keepPoint,"keepPoint");var n=e.position;n.x+=10,n.y-=40,t.setPosition(n),t.getComponent(cc.Animation).play("keepPoint");var i=new cc.Node;i.addComponent(cc.Label).string="\u8bf7\u8bbe\u7f6e\u5730\u533a\uff0c\n\u4ee5\u52a0\u5165\u725b\u7fa4",i.getComponent(cc.Label).lineHeight=60;var o=i.addComponent(cc.LabelOutline);return o.color=new cc.Color(0,0,0),o.width=2,t.addChild(i),i.scale*=1.5,i.y-=280,t}};var n=function(){function e(e){this.array=e,this.count=this.array.length}var t=e.prototype;return t.init=function(){},t.play=function(){for(var e=this,t=function(t){e.array[t][0].call(function(){e.count--,config.objectPool.put("chessPool",e.array[t][1].middle),e.array[t][1].middle=null,config.eventDelegate.dispatchEvent("\u68cb\u5b50\u6d88\u9664",e.array[t][1]),0==e.count&&config.eventDelegate.dispatchEvent("waitingAnimDone")}).start()},n=0;n<this.array.length;n++)t(n)},e}(),i=function(){function e(e){this.anim=e}var t=e.prototype;return t.init=function(){var e=this;this.anim[0].call(function(){config.objectPool.put("chessPool",e.anim[1].middle),e.anim[1].middle=null,config.eventDelegate.dispatchEvent("\u68cb\u5b50\u6d88\u9664",e.anim[1]),config.eventDelegate.dispatchEvent("waitingAnimDone")})},t.play=function(){this.anim[0].start()},e}();cc._RF.pop()},{}],baseBottomEffect:[function(e,t){"use strict";cc._RF.push(t,"5b14a5l7ghEWIcnO+/6DE/H","baseBottomEffect"),cc.Class({extends:e("baseEffectDealer"),properties:{id:0,data:null,turn:0,bottom:null},init:function(e,t,n){this.id=e.id,this.data=e,this.turn=t,this.bottom=n},refresh:function(){},onRefresh:function(){this.refresh()},turnBegin:function(){},onTurnBegin:function(){this.turnBegin()},turnEnd:function(){},onTurnEnd:function(){this.turnEnd()},nextStage:function(){this.turn-=1,this.turn<=0&&(this.onCostSkill(),this.bottom.removeBottomEffect(this.id))},onNextStage:function(){this.nextStage()},onCostSkill:function(){this.costSkill()},costSkill:function(){if(this.data.costSkill.length>0)for(var e=0;e<this.data.costSkill.length;e++)this.checkBaseEffect(this.data.costSkill[e],this.bottom)}}),cc._RF.pop()},{baseEffectDealer:"baseEffectDealer"}],baseData:[function(e,t){"use strict";cc._RF.push(t,"2ccb8o0i2ZOQqpnBqYY7nRL","baseData"),cc.Class({extends:cc.Component,properties:{currentHp:0,MaxHP:0,shield:0,buffList:[],ATKFix:0,hurtFix:0,invincible:!1},addBuff:function(e,t){for(var n=0;n<this.buffList.length;n++)if(this.buffList[n].component.id==e)return void this.buffList[n].component.countChange(t);var i=config.tools.getBuffDataByID(e),o=this.UI.addBuff(i.script);o.component.onInitData(e,t,i,this),this.buffList.push(o)},removeBuff:function(e){for(var t=0;t<this.buffList.length;t++)this.buffList[t].component.id==e&&(this.buffList[t].ui.destroy(),this.buffList.splice(t,1))},checkBuffList:function(e){switch(e){case"turnBegin":for(var t=0;t<this.buffList.length;t++)this.buffList[t].component.onRefresh(),this.buffList[t].component.onTurnBegin();break;case"turnEnd":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onTurnEnd(),this.buffList[t].component.nextStage();break;case"getATK":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onAttack();break;case"getAttack":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onGetHurt();break;case"remove":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onRemove()}},getArrack:function(){},getHeal:function(e){console.log(this),this.currentHP+=e,this.currentHP>=this.MaxHP&&(this.currentHP=this.MaxHP),this.UI.refreshLife()},getShield:function(e){console.log(this),this.shield+=e,this.shield>=this.MaxHP&&(this.shield=this.MaxHP),this.UI.refreshShield()},getATk:function(){}}),cc._RF.pop()},{}],baseEffectDealer:[function(e,t){"use strict";cc._RF.push(t,"42be1O/c6pLt4iXpri/ivcA","baseEffectDealer"),cc.Class({extends:cc.Component,properties:{},checkBaseEffect:function(e,t){if(!e.condition||this.checkCondition(e,t))switch(this.getTarget(e.target),e.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:break;case 124:t.middle&&(config.objectPool.put("chessPool",t.middle),t.middle=null)}},checkCondition:function(e){switch(e){case 0:case 1:case 2:case 3:case 4:case 5:return!0}},getTarget:function(e){switch(e){case 0:return this.playerData;case 1:return this.enemyData;case 2:return this.board}}}),cc._RF.pop()},{}],boardLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"78c1fr9UJtEbaKQfVREeVZY","boardLayerCtrl");var n=cc.Enum({play:1,selection:2}),i=cc.Enum({onBegin:1,begin:2,onEnd:3,end:4});cc.Class({extends:e("./cellBase"),properties:{controlMode:{default:n.play,type:n},stage:{default:i.begin,type:i}},onLoad:function(){config.UICtrl.UIList.boardLayer=this,this.mapLayer=this.node.getChildByName("mapLayer"),this.bottomLayer=this.node.getChildByName("bottomLayer"),this.coverLayer=this.node.getChildByName("coverlayer"),this.checking=!1,this.checkingBottom=!1,this.moved=!1,this.combo=0,this.bottomEffectCount=0,this.target=null,this.movedChess=null,this.bemovedChess=null,this.chessDir=[],this.dir={left:0,right:1,up:2,down:3},config.objectPool.creatNewPool("chessPool"),this.initEvent(),this.initIndexMap(),this.initBottom(),this.startGame()},initEvent:function(){var e=this;config.eventDelegate.addEvent("\u73a9\u5bb6\u56de\u5408\u5f00\u59cb\u65f6",function(){e.checkAllBottomEffect("turnBegin"),e.checkingBottom=!0}),config.eventDelegate.addEvent("\u73a9\u5bb6\u56de\u5408\u5f00\u59cb",function(){e.checking=!1,config.UICtrl.getUIComponent("game").playerData.checkBuffList("turnBegin")}),config.eventDelegate.addEvent("\u73a9\u5bb6\u56de\u5408\u7ed3\u675f\u65f6",function(){e.checkAllBottomEffect("turnEnd"),e.checking=!0,e.checkingBottom=!0}),config.eventDelegate.addEvent("\u73a9\u5bb6\u56de\u5408\u7ed3\u675f",function(){config.UICtrl.getUIComponent("game").checkGameResult()||(e.checking=!0,config.eventDelegate.dispatchEvent("\u654c\u4eba\u56de\u5408\u5f00\u59cb"),config.UICtrl.getUIComponent("game").playerData.checkBuffList("turnEnd"))})},setControlMode:function(e){switch(e){case 1:this.controlMode=n.play;break;case 2:this.controlMode=n.selection}},initIndexMap:function(){this.high=5,config.gameInfo.mapHigh=5,this.wide=7,config.gameInfo.mapWide=7,this.map=[];for(var e=0;e<this.high;e++){this.map[e]=[];for(var t=0;t<this.wide;t++)this.map[e][t]=this.getMapCell([t,e])}},initBottom:function(){for(var e=0,t=0;t<this.high;t++)for(var n=0;n<this.wide;n++){var i;i=e%2==0?this.getSet("\u683c\u5b50\u6d45"):this.getSet("\u683c\u5b50\u6df1"),this.putTouchCallBack(i),this.mapLayer.addChild(i),this.map[t][n].bottom=i,e++}},initElement:function(){for(var e=0;e<this.high;e++)for(var t=0;t<this.wide;t++)this.map[e][t].setRandomType(),this.map[e][t].level=1,e>0&&this.map[e][t].type==this.map[e-1][t].type?t--:t>0&&this.map[e][t].type==this.map[e][t-1].type&&t--},drawMap:function(){this.addChessToPool(40);for(var e=0;e<this.high;e++)for(var t=0;t<this.wide;t++){var n=this.map[e][t].getChessPic(),i=config.objectPool.get("chessPool");this.map[e][t].middle=i,this.map[e][t].setPic(n),this.mapLayer.addChild(i),this.map[e][t].initPosition()}},addChessToPool:function(e){for(var t=0;t<e;t++){var n=cc.instantiate(config.warehouse.prefabList.chess);config.objectPool.put("chessPool",n)}},putTouchCallBack:function(e){e.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),e.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),e.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},startGame:function(){for(this.initElement();!this.checkRemovable();)this.initElement();this.drawMap()},touchStart:function(e){if(this.controlMode==n.play){if(this.checking)return;this.moved=!1}this.target=e.target},touchMove:function(e){if(this.controlMode==n.play){if(this.checking)return;if(e.touch.getDelta().x>6)return void this.checkDir(this.dir.right);if(e.touch.getDelta().x<-6)return void this.checkDir(this.dir.left);if(e.touch.getDelta().y>6)return void this.checkDir(this.dir.up);if(e.touch.getDelta().y<-6)return void this.checkDir(this.dir.down)}},touchEnd:function(){if(this.controlMode==n.play){if(this.checking||this.moved)return;this.cast()}if(this.controlMode==n.selection){var e=config.tools.getChessIndex(this.target,this.map);config.eventDelegate.checkEvent("\u68c0\u67e5\u68cb\u5b50")?config.eventDelegate.dispatchEvent("\u68c0\u67e5\u68cb\u5b50",this.map[e[1]][e[0]]):config.eventDelegate.dispatchEvent("\u9009\u62e9\u68cb\u5b50",this.map[e[1]][e[0]])}},cast:function(){var e=config.tools.getChessIndex(this.target,this.map);this.map[e[1]][e[0]].level>1&&(this.checking=!0,this.dealGroup([this.map[e[1]][e[0]]]))},checkRemovable:function(){for(var e=0;e<this.high;e++)for(var t=0;t<this.wide;t++){if(e>0&&this.map[e-1][t].type&&this.map[e][t].type){this.exchangeMapContent(t,e,t,e-1);var n=this.getRemovableChess(this.map);if(this.exchangeMapContent(t,e,t,e-1),n.length>0)return this.chessDir=[this.map[e][t],this.dir.down,this.map[e-1][t],n[0].type],!0}if(e<this.high-1&&this.map[e+1][t].type&&this.map[e][t].type&&(this.exchangeMapContent(t,e,t,e+1),n=this.getRemovableChess(this.map),this.exchangeMapContent(t,e,t,e+1),n.length>0))return this.chessDir=[this.map[e][t],this.dir.up,this.map[e+1][t],n[0].type],!0;if(t>0&&this.map[e][t-1].type&&this.map[e][t].type&&(this.exchangeMapContent(t,e,t-1,e),n=this.getRemovableChess(this.map),this.exchangeMapContent(t,e,t-1,e),n.length>0))return this.chessDir=[this.map[e][t],this.dir.left,this.map[e][t-1],n[0].type],!0;if(t<this.wide-1&&this.map[e][t+1].type&&this.map[e][t].type&&(this.exchangeMapContent(t,e,t+1,e),n=this.getRemovableChess(this.map),this.exchangeMapContent(t,e,t+1,e),n.length>0))return this.chessDir=[this.map[e][t],this.dir.right,this.map[e][t+1],n[0].type],!0}return!1},checkDir:function(e){if(this.target&&!this.checking){this.checking=!0,this.moved=!0;var t=config.tools.getChessIndex(this.target,this.map),n=t[0],i=t[1],o=void 0,s=void 0;switch(e){case this.dir.up:i<config.gameInfo.mapHigh-1&&(o=n,s=i+1);break;case this.dir.down:i>0&&(o=n,s=i-1);break;case this.dir.left:n>0&&(o=n-1,s=i);break;case this.dir.right:n<config.gameInfo.mapWide-1&&(o=n+1,s=i)}o>=0&&s>=0?this.map[i][n].middle&&this.map[s][o].middle&&(this.exchangeMapContent(n,i,o,s),this.result=this.getRemovableChess(this.map),this.result.length>0?(this.movedChess=this.map[i][n],this.bemovedChess=this.map[s][o],this.removeSuccess(n,i,o,s)):(this.exchangeMapContent(n,i,o,s),this.removeFail(n,i,o,s))):this.checking=!1}},exchangeMapContent:function(e,t,n,i){var o=this.map[t][e].level;this.map[t][e].level=this.map[i][n].level,this.map[i][n].level=o;var s=this.map[t][e].type;this.map[t][e].type=this.map[i][n].type,this.map[i][n].type=s;var a=this.map[t][e].middle;this.map[t][e].middle=this.map[i][n].middle,this.map[i][n].middle=a},removeSuccess:function(e,t,n,i){var o=this;cc.tween(this.map[t][e].middle).to(.15,{position:this.map[i][n].middle.position}).start(),cc.tween(this.map[i][n].middle).to(.15,{position:this.map[t][e].middle.position}).call(function(){o.removeChess()}).start()},removeFail:function(e,t,n,i){var o=this;cc.tween(this.map[t][e].middle).to(.15,{position:this.map[i][n].middle.position}).to(.15,{position:this.map[t][e].middle.position}).start(),cc.tween(this.map[i][n].middle).to(.15,{position:this.map[t][e].middle.position}).to(.15,{position:this.map[i][n].middle.position}).call(function(){o.map[t][e].resetPosition(),o.map[i][n].resetPosition(),o.checking=!1}).start()},removeChess:function(){function e(e,t){for(var n=0;n<e.length;n++)for(var i=0;i<t.length;i++)if(e[n]==t[i])return!0;return!1}if(this.result.length>0){var t=this.result.shift();if(t.length<=0)return void this.removeChess();for(var n=0;n<this.result.length;n++)if(e(t,this.result[n])){var i=this.result[n];t=t.concat(i),this.result[n]=[]}t=Array.from(new Set(t)),this.dealGroup(t)}else this.fixMap()},removeGroup:function(e){for(var t=0;t<e.length;t++)config.objectPool.put("chessPool",e[t].middle),e[t].middle=null;this.fixMap()},dealGroup:function(e){for(var t=e[0],n=0;n<e.length;n++)e[n]!=this.movedChess&&e[n]!=this.bemovedChess||(t=e[n]);for(n=0;n<e.length;n++)1==e[n].level&&config.animCtrl.chessGroup.push(e[n]);config.animCtrl.chessGroup.length>0&&config.animCtrl.creatLevel1Anim();for(var i=0;i<e.length;i++)e[i].level>=2&&config.animCtrl.chessGroup.push(e[i]);config.animCtrl.chessGroup.length>0&&config.animCtrl.creatHigherLevelAnim(),1==e.length||(3==e.length?(config.eventDelegate.dispatchEvent("\u4e09\u6d88",e),config.eventDelegate.dispatchEvent("\u666e\u901a\u6d88\u9664",e),this.combo>0&&config.eventDelegate.dispatchEvent("\u8fde\u6d88",[e,this.combo])):4==e.length?(config.eventDelegate.dispatchEvent("\u56db\u6d88",e),config.eventDelegate.dispatchEvent("\u666e\u901a\u6d88\u9664",e),this.combo>0&&config.eventDelegate.dispatchEvent("\u8fde\u6d88",[e,this.combo]),t.levelUp=!0,t.levelToChange=2):e.length>=5&&(config.eventDelegate.dispatchEvent("\u4e94\u6d88",e),config.eventDelegate.dispatchEvent("\u666e\u901a\u6d88\u9664",e),this.combo>0&&config.eventDelegate.dispatchEvent("\u8fde\u6d88",[e,this.combo]),t.levelUp=!0,t.levelToChange=3)),config.animCtrl.playWaitingAnim()},fixMap:function(){for(var e=0;e<this.wide;e++)for(var t=0;t<this.high;t++)if(this.map[t][e].levelUp){var n=this.creatChess(e,t,this.map[t][e].levelToChange,this.map[t][e].type);this.mapLayer.addChild(n.middle),n.resetPosition(),this.map[t][e].levelUp=!1}for(var i=0;i<this.wide;i++)for(var o=this.high-1;o>=0;o--)if(!this.map[o][i].middle&&(this.map[o][i].onseat=!1,o>0)){for(var s=o-1;!this.map[s][i].middle&&s>0;)s--;this.exchangeMapContent(i,o,i,s),this.map[o][i].onseat=!1,this.map[s][i].onseat=!1}for(var a=0;a<this.wide;a++)for(var c=0;c<this.high;c++)this.map[c][a].middle||(n=this.creatChess(a,c,1),this.mapLayer.addChild(n.middle),n.resetPosition(),n.middle.y-=250);this.fixAnim()},creatChess:function(e,t,n,i){this.map[t][e].level=n,i>=0?this.map[t][e].type=i:this.map[t][e].setRandomType();var o=this.map[t][e].getChessPic();return config.objectPool.checkSize("chessPool",5)||this.addChessToPool(5),this.map[t][e].middle=config.objectPool.get("chessPool"),this.map[t][e].setPic(o),this.map[t][e]},fixAnim:function(){for(var e=this,t=0,n=0;n<this.wide;n++)for(var i=0;i<this.high;i++)if(!this.map[i][n].onseat){t++;var o=this.map[i][n].bottom.position;cc.tween(this.map[i][n].middle).to(.5,{position:o},{easing:"quadIn"}).call(function(){0!=--t||e.nextStage()}).start()}0!=t||this.nextStage()},nextStage:function(){this.result=this.getRemovableChess(this.map),this.result.length>0?(this.combo++,this.removeChess()):(this.combo=0,this.stage==i.onBegin?this.stage=i.begin:this.stage==i.begin?this.stage=i.onEnd:this.stage==i.onEnd?this.stage=i.end:this.stage==i.end&&(this.stage=i.onBegin),this.checkStage())},checkStage:function(){switch(this.stage){case i.onBegin:config.eventDelegate.dispatchEvent("\u73a9\u5bb6\u56de\u5408\u5f00\u59cb\u65f6");break;case i.begin:config.eventDelegate.dispatchEvent("\u73a9\u5bb6\u56de\u5408\u5f00\u59cb");break;case i.onEnd:config.eventDelegate.dispatchEvent("\u73a9\u5bb6\u56de\u5408\u7ed3\u675f\u65f6");break;case i.end:config.eventDelegate.dispatchEvent("\u73a9\u5bb6\u56de\u5408\u7ed3\u675f")}},addBottomEffectToMap:function(e,t,n){this.map[n][t].addBottomEffect(e.num1,e.num2)},checkAllBottomEffect:function(e){for(var t=0;t<this.wide;t++)for(var n=0;n<this.high;n++)this.map[n][t].bottomEffect.length>0&&(this.bottomEffectCount+=this.map[n][t].bottomEffect.length,this.map[n][t].checkEffect(e))},update:function(){this.checkingBottom&&0==this.bottomEffectCount&&(this.checkingBottom=!1,this.fixMap())}}),cc._RF.pop()},{"./cellBase":"cellBase"}],bottomWarning:[function(e,t){"use strict";cc._RF.push(t,"2c674hsaVVCAa3bezRWGpWo","bottomWarning"),cc.Class({extends:e("baseBottomEffect"),properties:{}}),cc._RF.pop()},{baseBottomEffect:"baseBottomEffect"}],boxLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"c7fd4/ac5VDfpki5OiTw2uH","boxLayerCtrl"),e("../../overall/objectPool").get,cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.boxLevelUped=!1,this.rewordList=null,this.bronzeBox=this.node.getChildByName("bronzeBox"),this.silverBox=this.node.getChildByName("silverBox"),this.goldBox=this.node.getChildByName("goldBox"),this.levelProgress=this.node.getChildByName("levelProgress"),config.tools.addCallBackToButton(this.node,"boxLayerCtrl","buyBronzeBox",null,this.bronzeBox.getChildByName("buy")),config.tools.addCallBackToButton(this.node,"boxLayerCtrl","buySilverBox",null,this.silverBox.getChildByName("buy")),config.tools.addCallBackToButton(this.node,"boxLayerCtrl","buyGoldBox",null,this.goldBox.getChildByName("buy")),this.refreshProgress()},refreshProgress:function(){var e=config.warehouse.json.boxData,t=this.checkProgress();this.levelProgress.getChildByName("level").getComponent(cc.Label).string="LV"+t.level,t.level>0?this.levelProgress.getChildByName("progress").getComponent(cc.ProgressBar).progress=(config.playerInfo.boxProgress-e[t.level-1].levelUpRequire)/(t.levelUpRequire-e[t.level-1].levelUpRequire):this.levelProgress.getChildByName("progress").getComponent(cc.ProgressBar).progress=config.playerInfo.boxProgress/t.levelUpRequire},boxProgressGrow:function(e){var t=config.warehouse.json.boxData,n=this.checkProgress();config.playerInfo.boxProgress+=e,config.playerInfo.boxProgress>=t[n.level].levelUpRequire&&(this.boxLevelUped=!0),this.refreshProgress()},checkProgress:function(){var e=config.playerInfo.boxProgress,t=config.warehouse.json.boxData;return e<t[0].levelUpRequire?t[0]:e<t[1].levelUpRequire?t[1]:e<t[2].levelUpRequire?t[2]:e<t[3].levelUpRequire?t[3]:e<t[4].levelUpRequire?t[4]:e<t[5].levelUpRequire?t[5]:e<t[6].levelUpRequire?t[6]:e<t[7].levelUpRequire?t[7]:e<t[8].levelUpRequire?t[8]:e<t[9].levelUpRequire?t[9]:(t[10].levelProgress,t[10])},buyBronzeBox:function(){var e=this.checkProgress();this.initProbability(e.bronzeProbability),this.getFragments(e.bronzeOutput),this.boxProgressGrow(30),this.showBoxOpenlayer()},buySilverBox:function(){var e=this.checkProgress();this.initProbability(e.sliverProbability),this.getFragments(e.sliverOutput),this.boxProgressGrow(400),this.showBoxOpenlayer()},buyGoldBox:function(){var e=this.checkProgress();this.initProbability(e.goldProbability),this.getFragments(e.goldOutput),this.boxProgressGrow(1e3),this.showBoxOpenlayer()},initProbability:function(e){this.normal=e.normal,this.rare=e.rare,this.epic=e.epic},getFragments:function(e){for(var t={},n=0;n<e;n++){var i=100*Math.random();if(i<=this.epic)t[o=this.getEpicFragment()]?t[o]+=1:t[o]=1;else if(i<=this.epic+this.rare)t[o=this.getRareFragment()]?t[o]+=1:t[o]=1;else{var o;t[o=this.getNormalFragment()]?t[o]+=1:t[o]=1}}for(var n in t)config.playerInfoManager.addFragment(n,t[n]);this.rewordList=t},getEpicFragment:function(){var e=config.playerInfo.epicPool;return e[Math.floor(e.length*Math.random())]},getRareFragment:function(){var e=config.playerInfo.rarePool;return e[Math.floor(e.length*Math.random())]},getNormalFragment:function(){var e=config.playerInfo.normalPool;return e[Math.floor(e.length*Math.random())]},showBoxOpenlayer:function(){config.UICtrl.addUI("boxOpenLayer",config.UICtrl.findUI("other"),this.node)}}),cc._RF.pop()},{"../../overall/objectPool":"objectPool"}],boxOpenLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"4ad23anHE5IR7SCK0CNK2Mz","boxOpenLayerCtrl"),cc.Class({extends:e("otherUIBase"),properties:{},init:function(e){this.source=e},onLoad:function(){this.mask=this.node.getChildByName("mask"),this.title=this.node.getChildByName("title"),this.rewordContent=this.node.getChildByName("rewordContent"),this.content=this.rewordContent.getChildByName("scroll").getChildByName("view").getChildByName("content"),this.continue=this.node.getChildByName("continue"),this.case=this.node.getChildByName("\u7bb1\u5b50"),this.open=this.node.getChildByName("open")},onEnable:function(){this.index=0,this.currentTween=null,this.mask.on(cc.Node.EventType.TOUCH_END,this.openBox,this),this.initRewordContent(),this.case.active=!0,this.open.active=!0,this.title.active=!1,this.rewordContent.active=!1,this.continue.active=!1},initRewordContent:function(){for(var e=0;e<this.content.children.length;e++)this.content.children[e].destroy();var t=this.source.getComponent("boxLayerCtrl").rewordList;for(var e in t){var n=new cc.Node;this.content.addChild(n);var i=cc.instantiate(config.warehouse.prefabList.chessItem);n.addChild(i),i.getComponent("chessItemCtrl").id=e,i.getComponent("chessItemCtrl").showNum(t[e])}},playRewordAnim:function(){for(var e=0;e<this.content.children.length;e++)this.content.children[e].scale=0;this.playNextChessAnim()},playNextChessAnim:function(){var e=this;this.content.children[this.index].scale=1,this.currentTween=cc.tween(this.content.children[this.index]).to(.35,{scale:1.5},{easing:"quadOut"}).to(.15,{scale:1},{easing:"quadIn"}).call(function(){e.index+=1,e.index<e.content.children.length?(e.index%4<=0&&console.log("\u4e0b\u6eda"),e.playNextChessAnim()):(e.index=0,e.mask.off(cc.Node.EventType.TOUCH_END,e.skip,e),e.mask.on(cc.Node.EventType.TOUCH_END,e.leave,e))}).start()},openBox:function(){this.mask.off(cc.Node.EventType.TOUCH_END,this.openBox,this),this.mask.on(cc.Node.EventType.TOUCH_END,this.skip,this),this.boxJump()},boxJump:function(){var e=this;cc.tween(this.case).by(.35,{y:50},{easing:"quadOut"}).by(.15,{y:-50},{easing:"quadIn"}).call(function(){e.showReword()}).start()},showReword:function(){this.case.active=!1,this.open.active=!1,this.title.active=!0,this.rewordContent.active=!0,this.continue.active=!0,this.playRewordAnim();for(var e=0;e<this.content.children.length;e++)this.content.children[e].getChildByName("chessItem").getComponent("chessItemCtrl").refreshInfo()},skip:function(){this.currentTween&&this.currentTween.stop();for(var e=0;e<this.content.children.length;e++)this.content.children[e].scale=1;this.mask.off(cc.Node.EventType.TOUCH_END,this.skip,this),this.mask.on(cc.Node.EventType.TOUCH_END,this.leave,this)},leave:function(){this.mask.off(cc.Node.EventType.TOUCH_END,this.leave,this),this.cancel()}}),cc._RF.pop()},{otherUIBase:"otherUIBase"}],buffBase:[function(e,t){"use strict";cc._RF.push(t,"7311cUYKvZJTaE1nXo6tDE5","buffBase"),cc.Class({extends:e("./buffUICtrl"),properties:{id:0,layer:0,duration:0,data:null,parent:null},nextStage:function(){this.data.turnBuff?this.duration>0&&(this.duration-=1,this.refreshCount(this.duration),this.duration<=0&&this.onBuffRemove()):this.data.unsustainable&&(this.layer>0&&(this.layer-=1),this.refreshCount(this.layer),this.layer<=0&&this.onBuffRemove())},onInitData:function(e,t,n,i){this.initData(e,t,n,i)},initData:function(e,t,n,i){this.id=e,this.data=n,this.parent=i,this.refreshName(n.buffName),this.data.turnBuff?this.duration=t:this.layer=t,this.refreshCount(t)},countChange:function(e){this.data.turnBuff?this.onCoverDutation(e):this.onAddLayer(e)},onCoverDutation:function(e){this.coverDuration(e)},coverDuration:function(e){this.duration=e,this.duration>0&&this.refreshCount(this.duration)},onAddLayer:function(e){this.addLayer(e)},addLayer:function(e){this.layer+=e,this.layer>0&&this.refreshCount(this.layer)},deleteLayer:function(e){this.layer-=e,this.layer<0&&(this.layer=0),this.refreshCount(this.layer)},onBuffRemove:function(){this.buffRemove()},buffRemove:function(){this.parent.removeBuff(this.id)},onRefresh:function(){this.refresh()},refresh:function(){this.data.refreshable&&(this.costSkill(),this.getSkill())},onGetSkill:function(){this.getSkill()},getSkill:function(){this.data.getSkill.length&&this.dealEffect(this.data.getSkill)},onCostSkill:function(){this.costSkill()},costSkill:function(){this.data.costSkill.length&&this.dealEffect(this.data.costSkill)},onTurnEnd:function(){this.turnEndSkill()},turnEndSkill:function(){this.data.turnEndSkill.length&&this.dealEffect(this.data.turnEndSkill)},onTurnBegin:function(){this.turnBeginSkill()},turnBeginSkill:function(){this.data.turnBeginSkill.length&&this.dealEffect(this.data.turnBeginSkill)},onGetHurt:function(){this.getHurtSkill()},getHurtSkill:function(){this.data.getHurtSkill.length&&this.dealEffect(this.data.getHurtSkill)},onAttack:function(){this.attackSkill()},attackSkill:function(){this.data.attackSkill.length&&this.dealEffect(this.data.attackSkill)},onRemove:function(){this.removeSkill()},removeSkill:function(){this.data.removeSkill.length&&this.dealEffect(this.data.removeSkill)},dealEffect:function(e){config.UICtrl.getUIComponent("game").buffDealer.dealEffect(e,this)}}),cc._RF.pop()},{"./buffUICtrl":"buffUICtrl"}],buffDealer:[function(e,t){"use strict";cc._RF.push(t,"f5a45jeEnRMe4suJn+km2Ug","buffDealer"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.enemyData=this.node.getChildByName("enemy").getComponent("enemyData"),this.playerData=this.node.getChildByName("player").getComponent("playerData"),this.board=this.node.getChildByName("boardLayer").getComponent("boardLayerCtrl")},dealEffect:function(e,t){for(var n=0;n<e.length;n++)this.checkEffect(e[n],t)},checkEffect:function(e,t){if(!e.condition||this.checkCondition(e,t)){var n=this.getTarget(e.target,t);switch(e.type){case 0:var i=this.playerData,o=i.getMasterATK();n==this.playerData&&(o=(i=this.enemyData).getATK()),n.getAttack(e.num1/100*o);break;case 1:n.hurtFix+=e.num1;break;case 2:n.ATKFix+=e.num1;break;case 3:t.deleteLayer(e.num1);break;case 4:n.CSDFix&&(n.CSDFix+=e.num1)}}},getTarget:function(e,t){switch(e){case 0:return"player"==t.parent.node.name?this.playerData:this.enemyData;case 1:return"player"==t.parent.node.name?this.enemyData:this.playerData;case 2:return this.board}},checkCondition:function(e,t){switch(e.condition){case 0:case 2:return!0;case 11:return t.layer>=e.num3}}}),cc._RF.pop()},{}],buffUICtrl:[function(e,t){"use strict";cc._RF.push(t,"67318TkDz1Ghq0fOzGu2oFZ","buffUICtrl"),cc.Class({extends:cc.Component,properties:{},refreshName:function(e){console.log(e),this.node.getChildByName("name").getComponent(cc.Label).string=e},refreshCount:function(e){this.node.getChildByName("count").getComponent(cc.Label).string=e}}),cc._RF.pop()},{}],burn:[function(e,t){"use strict";cc._RF.push(t,"892d9v3YEFJ9KJfLlrcxLDX","burn"),cc.Class({extends:e("./buffBase"),properties:{},onTurnEnd:function(){console.log("\u71c3\u70e7"),this.turnEndSkill()}}),cc._RF.pop()},{"./buffBase":"buffBase"}],cellBase:[function(e,t){"use strict";cc._RF.push(t,"eb3bbvRdGdNQpKkWoez/syi","cellBase"),cc.Class({extends:cc.Component,properties:{},getMapCell:function(e){return new n(e)},getRemovableChess:function(e){for(var t=[],n=[],i=config.gameInfo.mapWide,o=config.gameInfo.mapHigh,s=0;s<i;s++){t=[];for(var a=0;a<o;a++)t.length?e[a][s].type==t[0].type?t.push(e[a][s]):(t.length>=3&&n.push(t),(t=[]).push(e[a][s])):t.push(e[a][s]);t.length>=3&&n.push(t),t=[]}for(var c=0;c<o;c++){t=[];for(var r=0;r<i;r++)t.length?e[c][r].type==t[0].type?t.push(e[c][r]):(t.length>=3&&n.push(t),(t=[]).push(e[c][r])):t.push(e[c][r]);t.length>=3&&n.push(t),t=[]}return n},chooseGoods:function(e){var t=cc.instantiate(config.warehouse.prefabList.chess);switch(e){case"red":t.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("red"),config.red+=1;break;case"blue":t.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("orange"),config.blue+=1;break;case"green":t.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("green"),config.green+=1;break;case"yellow":t.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("yellow"),config.yellow+=1;break;case"purple":t.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("purple"),config.purple+=1}return t.getChildByName("pic").getComponent(cc.Sprite).trim=!1,t.getChildByName("pic").getComponent(cc.Sprite).sizeMode=2,config.total+=1,t},randomGoods:function(){var e=cc.instantiate(config.warehouse.prefabList.chess);switch(Math.floor(5*Math.random()+1)){case 1:e.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("red");break;case 2:e.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("orange");break;case 3:e.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("green");break;case 4:e.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("yellow");break;case 5:e.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("purple")}return e.getChildByName("pic").getComponent(cc.Sprite).trim=!1,e.getChildByName("pic").getComponent(cc.Sprite).sizeMode=2,e},getSet:function(e){var t=cc.instantiate(config.warehouse.prefabList.bottom);return t.getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[e],t},checkMovedMap:function(){},getChessIndex:function(e,t){for(var n=0;n<t.length;n++)for(var i=0;i<t[0].length;i++)if(t[n][i].bottom==e||t[n][i].middle==e)return t[n][i].index},checkCross:function(e,t){for(var n=0;n<e.length;n++)for(var i=0;i<t.length;i++)if(e[n]==t[i])return e[n];return!1},checkSameLine:function(){},checkEmpty:function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e[0].length;n++)if(!e[t][n].middle)return e[t][n];return!1},checkLinked:function(e,t){var n=Math.abs(e[0]-t[0]),i=Math.abs(e[1]-t[1]);return console.log(e,t,Math.abs(n-i)),1==Math.abs(n-i)}});var n=function(){function e(e){this.index=e,this.level=1,this.levelToChange=0,this.removable=!0,this.onseat=!0,this.middle=null,this.type=0,this.bottom=null,this.bottomEffect=[],this.tween=null,this.checked=!1,this.packed=!1,this.touchable=!0,this.levelUp=!1}var t=e.prototype;return t.removeBottomEffect=function(e){for(var t=0;t<this.bottomEffect.length;t++)this.bottomEffect[t].component.id==e&&(this.bottomEffect[t].ui.destroy(),this.bottomEffect.splice(t,1))},t.checkEffect=function(e){switch(e){case"turnEnd":for(var t=0;t<this.bottomEffect.length;t++)this.bottomEffect[t].component.onTurnEnd(),this.bottomEffect[t].component.nextStage(),config.UICtrl.getUIComponent("boardLayer").bottomEffectCount-=1;break;case"turnBegin":for(t=0;t<this.bottomEffect.length;t++)this.bottomEffect[t].component.onRefresh(),this.bottomEffect[t].component.onTurnBegin(),config.UICtrl.getUIComponent("boardLayer").bottomEffectCount-=1}},t.addBottomEffect=function(e,t){var n=config.playerInfoManager.getBottomEffectData(e),i=cc.instantiate(config.warehouse.prefabList[n.prefab]);this.bottom.getChildByName("bottomEffect").addChild(i);var o=i.addComponent(n.script);o.init(n,t,this),this.bottomEffect.push({ui:i,component:o})},t.shakeChess=function(){cc.tween(this.middle.getChildByName("pic")).to(.25,{angle:30}).to(.25,{angle:0}).to(.25,{angle:-30}).to(.25,{angle:0}).union().repeat(2).start()},t.stopShake=function(){},t.refreshLevel=function(){this.level<=1?this.middle.getChildByName("level").active=!1:this.middle.getChildByName("level").active=!0,this.middle.getChildByName("level").getChildByName("num").getComponent(cc.Label).string="x "+this.level},t.refreshSize=function(){this.middle.getChildByName("pic").scale=.28},t.setPic=function(e){this.middle.getChildByName("pic").getComponent(cc.Sprite).spriteFrame=e},t.resetPosition=function(){this.middle.setPosition(this.bottom.position)},t.initPosition=function(){this.bottom.x=this.index[0]*config.gameInfo.heightSpace,this.bottom.y=this.index[1]*config.gameInfo.widthSpace,this.resetPosition()},t.resetType=function(){var e=this.middle.getChildByName("pic").getComponent(cc.Sprite).spriteFrame.name;switch(e=e.slice(0,e.length-1)){case"orange":this.type="blue";break;case"green":this.type="green";break;case"purple":this.type="purple";break;case"red":this.type="red";break;case"yellow":this.type="yellow"}},t.setRandomType=function(){var e=config.gameInfo.chessData;for(this.type=Math.floor(5*Math.random());!e[this.type];)this.type=Math.floor(5*Math.random())},t.init=function(e){this.resetPosition(),this.refreshSize(),this.resetType(),e?(this.middle.getChildByName("level").active=!0,this.middle.getChildByName("bg").active=!0,this.refreshLevel()):(this.middle.getChildByName("level").active=!1,this.middle.getChildByName("bg").active=!1)},t.creatTweenToBottom=function(e){var t=config.tools.getDistance(this.middle.position,this.bottom.position)/config.speed;e&&(t*=.5*Math.random()+1),this.tween=cc.tween(this.middle).to(t,{position:this.bottom.position},{easing:"quadIn"}).call(function(){config.eventDelegate.dispatchEvent("tweenDone")})},t.startTween=function(){this.tween.start()},t.getChessPic=function(){var e=config.gameInfo.chessData[""+this.type],t=config.warehouse.spriteFrame;switch(this.level){case 1:return t[e.level1Pic];case 2:return t[e.level2Pic];case 3:return t[e.level3Pic]}},e}();cc._RF.pop()},{}],chessDealer:[function(e,t){"use strict";cc._RF.push(t,"7a1bbf17aBDBYwKNqa7pSEw","chessDealer"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.playerData=this.node.getChildByName("player").getComponent("playerData"),this.enemyData=this.node.getChildByName("enemy").getComponent("enemyData"),this.board=this.node.getChildByName("boardLayer").getComponent("boardLayerCtrl"),this.initChessData(),this.initRemoveEvent(),this.initEquipEffect()},initChessData:function(){config.gameInfo.chessData[0]=config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[0]),config.gameInfo.chessData[1]=config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[1]),config.gameInfo.chessData[2]=config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[2]),config.gameInfo.chessData[3]=config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[3]),config.gameInfo.chessData[4]=config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[4]),config.gameInfo.chessEffect[0]=config.tools.getChessEffectByLevel(config.gameInfo.chessData[0],this.getChessLevel(config.gameInfo.chessData[0])),config.gameInfo.chessEffect[1]=config.tools.getChessEffectByLevel(config.gameInfo.chessData[1],this.getChessLevel(config.gameInfo.chessData[1])),config.gameInfo.chessEffect[2]=config.tools.getChessEffectByLevel(config.gameInfo.chessData[2],this.getChessLevel(config.gameInfo.chessData[2])),config.gameInfo.chessEffect[3]=config.tools.getChessEffectByLevel(config.gameInfo.chessData[3],this.getChessLevel(config.gameInfo.chessData[3])),config.gameInfo.chessEffect[4]=config.tools.getChessEffectByLevel(config.gameInfo.chessData[4],this.getChessLevel(config.gameInfo.chessData[4]))},initEquipEffect:function(){for(var e in config.gameInfo.chessEffect)config.gameInfo.chessEffect[e].equipEffect.length&&this.dealEffect(config.gameInfo.chessEffect[e].equipEffect)},getChessLevel:function(e){return e?e.beginningLevel+config.playerInfo.chessLevel[e.id]:null},initRemoveEvent:function(){var e=this;config.eventDelegate.addEvent("\u68cb\u5b50\u6d88\u9664",function(t){var n=t.detail,i=n.type,o=n.level,s=config.gameInfo.chessEffect[i],a=config.gameInfo.chessData[i];1==o?(s.level1Effect.length&&e.dealEffect(s.level1Effect,[config.gameInfo.chessData[""+i],i]),a.level1effect[1]&&console.log(a.level1effect[1])):2==o?(s.level2Effect.length&&e.dealEffect(s.level2Effect,[config.gameInfo.chessData[""+i],i]),a.level2effect[1]&&console.log(a.level2effect[1])):3==o&&(s.level3Effect.length&&e.dealEffect(s.level3Effect,[config.gameInfo.chessData[""+i],i]),a.level3effect[1]&&console.log(a.level3effect[1]))}),config.eventDelegate.addEvent("\u4e09\u6d88",function(t){var n=t.detail[0].type,i=config.gameInfo.chessEffect[""+n];i.threeRemoveEffect.length&&e.dealEffect(i.threeRemoveEffect)}),config.eventDelegate.addEvent("\u666e\u901a\u6d88\u9664",function(t){var n=t.detail[0].type,i=config.gameInfo.chessEffect[""+n],o=config.gameInfo.chessData[""+n];i.normalRemoveEffect.length&&e.dealEffect(i.normalRemoveEffect),e.playerData.changeEnergy(o.removeEnergyEfficient)}),config.eventDelegate.addEvent("\u8fde\u6d88",function(t){var n=t.detail,i=n[0][0].type,o=n[1],s=config.gameInfo.chessEffect[""+i],a=config.gameInfo.chessData[""+i];s.comboRemoveEffect.length&&e.dealEffect(s.comboRemoveEffect,o),e.playerData.changeEnergy(a.comboEnergyEfficient)}),config.eventDelegate.addEvent("\u56db\u6d88",function(t){var n=t.detail[0].type,i=config.gameInfo.chessEffect[""+n];i.fourRemoveEffect.length&&e.dealEffect(i.fourRemoveEffect)}),config.eventDelegate.addEvent("\u4e94\u6d88",function(t){var n=t.detail[0].type,i=config.gameInfo.chessEffect[""+n];i.fiveRemoveEffect.length&&e.dealEffect(i.fiveRemoveEffect)})},dealEffect:function(e,t){if(e.length>0)for(var n=0;n<e.length;n++)this.checkEffect(e[n],t)},checkEffect:function(e,t){if(!e.condition||this.checkCondition(e,t)){var n=this.getTarget(e.target);switch(e.type){case 0:var i=Math.floor(this.playerData.getATK(t)*e.num1/100);n.getAttack(i);break;case 1:n.getHeal(e.num1);break;case 2:var o=e.num1;n.changeEnergy(o);break;case 3:n.ATKFix+=e.num1;break;case 4:n.CSDFix&&(n.CSDFix+=e.num1);break;case 5:case 6:n.addBuff(e.num1,e.num2);break;case 7:n.MaxHP+=e.num1,n.currentHP+=e.num1;break;case 8:n.CSFix&&(n.CSFix+=e.num1);break;case 9:for(var s in config.gameInfo.chessData)config.gameInfo.chessData[s]&&(config.gameInfo.chessData[s].removeEnergyEfficient+=e.num1);break;case 10:for(var s in config.gameInfo.chessData)config.gameInfo.chessData[s]&&(config.gameInfo.chessData[s].comboEnergyEfficient+=e.num1);break;case 11:n.getShield(e.num1)}}},getTarget:function(e){switch(e){case 0:return this.playerData;case 1:return this.enemyData;case 2:return this.board}},checkCondition:function(e,t){switch(e.condition){case 0:return!0;case 1:return Math.floor(100*Math.random())<=e.num3;case 2:return!0;case 11:return t.layer>=e.num3}}}),cc._RF.pop()},{}],chessInfoCtrl:[function(e,t){"use strict";cc._RF.push(t,"c8b67EZEPpKlZ4415aFfZNV","chessInfoCtrl"),cc.Class({extends:e("./otherUIBase"),properties:{id:0,source:null},init:function(e){this.source=e[1],this.id=e[0]},onLoad:function(){this.content=this.node.getChildByName("content"),this.chessItem=this.content.getChildByName("chessItem"),this.icon=this.chessItem.getChildByName("icon"),this.level=this.chessItem.getChildByName("level"),this.type=this.chessItem.getChildByName("type"),this.levelUp=this.content.getChildByName("levelUp"),this.leave=this.content.getChildByName("leave"),this.disc=this.node.getChildByName("disc"),this.intro=this.content.getChildByName("intro").getChildByName("scroll").getChildByName("view").getChildByName("content"),this.three=this.intro.getChildByName("three"),this.four=this.intro.getChildByName("four"),this.five=this.intro.getChildByName("five"),this.unlock=this.intro.getChildByName("unlock"),config.tools.addCallBackToButton(this.node,"chessInfoCtrl","levelUpChess",null,this.levelUp),config.tools.addCallBackToButton(this.node,"chessInfoCtrl","leaveUI",null,this.leave)},onEnable:function(){this.refreshUI(),this.refreshIntro()},levelUpChess:function(){if(config.playerInfoManager.checkOwnedChess(this.id)){var e=config.playerInfoManager.getLevelUpRequire(this.id);config.playerInfoManager.getChessFragments(this.id)>=e?(config.playerInfoManager.changeFragment(this.id,e),config.playerInfo.chessLevel[this.id]+=1,this.refreshUI()):console.log("\u788e\u7247\u4e0d\u591f")}else config.playerInfoManager.getChessFragments(this.id)>=3?(config.playerInfoManager.changeFragment(this.id,3),config.playerInfoManager.addOwnedChess(this.id),this.refreshUI()):console.log("\u788e\u7247\u4e0d\u591f")},refreshUI:function(){config.playerInfoManager.checkOwnedChess(this.id)?this.levelUp.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="\u5347\u7ea7":this.levelUp.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="\u672a\u89e3\u9501";var e=config.tools.getBaseChessDataByID(this.id);this.icon.getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[e.level1Pic],this.level.getComponent(cc.Label).string="\u7b49\u7ea7"+(config.playerInfo.chessLevel[this.id]+1),this.type.getChildByName("text").getComponent(cc.Label).string=this.checkType()},refreshIntro:function(){var e=config.tools.getBaseChessDataByID(this.id);this.three.getComponent(cc.Label).string="\u4e00\u9636\u6cd5\u5668:"+e.threeIntro,this.four.getComponent(cc.Label).string="\u4e8c\u9636\u6cd5\u5668:"+e.fourIntro,this.five.getComponent(cc.Label).string="\u4e09\u9636\u6cd5\u5668:"+e.fiveIntro,this.unlock.getComponent(cc.Label).string="3\u7ea7\u89e3\u9501\u6548\u679c:"+e.unlockIntro[0]+"\n5\u7ea7\u89e3\u9501\u6548\u679c"+e.unlockIntro[1]+"\n10\u7ea7\u89e3\u9501\u6548\u679c"+e.unlockIntro[2]+"\n15\u7ea7\u89e3\u9501\u6548\u679c"+e.unlockIntro[3]},checkType:function(){switch(config.tools.getBaseChessDataByID(this.id).element){case 0:return"\u91d1";case 1:return"\u6728";case 2:return"\u6c34";case 3:return"\u706b";case 4:return"\u571f"}},leaveUI:function(){config.UICtrl.getUIComponent("chessSelection").refreshContent(),this.cancel()}}),cc._RF.pop()},{"./otherUIBase":"otherUIBase"}],chessItemCtrl:[function(e,t){"use strict";cc._RF.push(t,"11b63TWL0xCJa70aLYW7jMS","chessItemCtrl"),cc.Class({extends:cc.Component,properties:{id:0,using:!1},onLoad:function(){this.showing=!1,this.bg=this.node.getChildByName("bg"),this.icon=this.node.getChildByName("icon"),this.level=this.node.getChildByName("level"),this.progress=this.node.getChildByName("progress"),this.progressNum=this.progress.getChildByName("num"),this.type=this.node.getChildByName("type"),this.select=this.node.getChildByName("select"),this.info=this.node.getChildByName("info")},init:function(){config.tools.addCallBackToButton(this.node,"chessItemCtrl","showButton",null,this.node)},getSelect:function(){return this.node.getChildByName("select")},getInfo:function(){return this.node.getChildByName("info")},showButton:function(){this.showing?this.showing=!1:this.showing=!0,this.select.active=this.showing,this.info.active=this.showing},refreshInfo:function(){if(this.id){this.using&&(this.node.active=!0);var e=config.tools.getBaseChessDataByID(this.id);switch(this.icon.getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[e.level1Pic],this.checkOwn()?(this.level.getComponent(cc.Label).string="\u7b49\u7ea7"+(config.playerInfo.chessLevel[this.id]+1),this.select.getComponent(cc.Button).interactable=!0):(this.level.getComponent(cc.Label).string="\u672a\u89e3\u9501",this.select.getComponent(cc.Button).interactable=!1),this.type.getChildByName("text").getComponent(cc.Label).string=this.checkType(),config.playerInfo.chessFragmentProgress[this.id]>=0&&(this.progress.getComponent(cc.ProgressBar).progress=config.playerInfo.chessFragmentProgress[this.id]/config.playerInfoManager.getLevelUpRequire(this.id),this.progressNum.getComponent(cc.Label).string=config.playerInfo.chessFragmentProgress[this.id]+"/"+config.playerInfoManager.getLevelUpRequire(this.id)),e.rarity){case 0:this.bg.color=(new cc.Color).fromHEX("87CF5F");break;case 1:this.bg.color=(new cc.Color).fromHEX("5EB1CF");break;case 3:this.bg.color=(new cc.Color).fromHEX("B75FD0")}}else this.node.active=!1,this.showing=!1,this.select.active=this.showing,this.info.active=this.showing},check:function(){this.checkUsing()?(this.node.active=!1,this.showing=!1,this.select.active=this.showing,this.info.active=this.showing):this.checkOwn()?this.node.active=!0:config.playerInfo.chessFragmentProgress[this.id]?this.node.active=!0:(this.node.active=!1,this.showing=!1,this.select.active=this.showing,this.info.active=this.showing)},checkOwn:function(){for(var e=config.playerInfo.ownedChess,t=0;t<e.length;t++)if(e[t]==this.id)return!0;return!1},checkUsing:function(){for(var e=config.playerInfo.usingChesses,t=0;t<e.length;t++)if(e[t]==this.id)return!0;return!1},showNum:function(e){this.node.getChildByName("num").active=!0,this.node.getChildByName("num").getComponent(cc.Label).string="x"+e},checkType:function(){switch(config.tools.getBaseChessDataByID(this.id).element){case 0:return"\u91d1";case 1:return"\u6728";case 2:return"\u6c34";case 3:return"\u706b";case 4:return"\u571f"}}}),cc._RF.pop()},{}],chessSelectionCtrl:[function(e,t){"use strict";cc._RF.push(t,"e83ceA9SyxCRLtBQwO7jDjE","chessSelectionCtrl"),cc.Class({extends:e("./otherUIBase"),properties:{},onLoad:function(){this.selectedObj=null,this.content=this.node.getChildByName("content"),this.usingChess=this.content.getChildByName("usingChess"),this.chessList=this.content.getChildByName("chessList"),this.chessContent=this.chessList.getChildByName("content").getChildByName("view").getChildByName("content"),this.leave=this.content.getChildByName("leave"),this.set1=this.usingChess.getChildByName("set1"),this.set2=this.usingChess.getChildByName("set2"),this.set3=this.usingChess.getChildByName("set3"),this.set4=this.usingChess.getChildByName("set4"),this.set5=this.usingChess.getChildByName("set5"),this.other=cc.find("Canvas/other"),config.tools.addCallBackToButton(this.node,"chessSelectionCtrl","leaveUI",null,this.leave),this.initContent()},onEnable:function(){this.playOutAnim(),this.refreshContent()},initContent:function(){this.set1.addChild(this.initChessItem(config.playerInfo.usingChesses[0],!0)),this.set2.addChild(this.initChessItem(config.playerInfo.usingChesses[1],!0)),this.set3.addChild(this.initChessItem(config.playerInfo.usingChesses[2],!0)),this.set4.addChild(this.initChessItem(config.playerInfo.usingChesses[3],!0)),this.set5.addChild(this.initChessItem(config.playerInfo.usingChesses[4],!0));for(var e=config.warehouse.json.chessBaseData,t=0;t<e.length;t++)this.chessContent.addChild(this.initChessItem(e[t].id,!1))},initChessItem:function(e,t){var n=cc.instantiate(config.warehouse.prefabList.chessItem);return n.getComponent("chessItemCtrl").using=t,e&&this.setChessItemData(n,e),config.tools.addCallBackToButton(this.node,"chessSelectionCtrl","showChess",n,n.getComponent("chessItemCtrl").getInfo()),config.tools.addCallBackToButton(this.node,"chessSelectionCtrl","selectChess",n,n.getComponent("chessItemCtrl").getSelect()),n},setChessItemData:function(e,t){e.getComponent("chessItemCtrl").id=t,e.getComponent("chessItemCtrl").init()},showChess:function(e,t){config.UICtrl.addUI("chessInfo",this.other,[t.getComponent("chessItemCtrl").id,this.node])},selectChess:function(e,t){var n=t.getComponent("chessItemCtrl").using,i=t.getComponent("chessItemCtrl").id;if(n)for(var o=0;o<config.playerInfo.usingChesses.length;o++)config.playerInfo.usingChesses[o]==i&&(config.playerInfo.usingChesses[o]=0);else for(o=0;o<config.playerInfo.usingChesses.length;o++)if(!config.playerInfo.usingChesses[o]){config.playerInfo.usingChesses[o]=i;break}this.refreshContent()},refreshContent:function(){this.set1.getChildByName("chessItem").getComponent("chessItemCtrl").id=config.playerInfo.usingChesses[0],this.set1.getChildByName("chessItem").getComponent("chessItemCtrl").refreshInfo(),this.set2.getChildByName("chessItem").getComponent("chessItemCtrl").id=config.playerInfo.usingChesses[1],this.set2.getChildByName("chessItem").getComponent("chessItemCtrl").refreshInfo(),this.set3.getChildByName("chessItem").getComponent("chessItemCtrl").id=config.playerInfo.usingChesses[2],this.set3.getChildByName("chessItem").getComponent("chessItemCtrl").refreshInfo(),this.set4.getChildByName("chessItem").getComponent("chessItemCtrl").id=config.playerInfo.usingChesses[3],this.set4.getChildByName("chessItem").getComponent("chessItemCtrl").refreshInfo(),this.set5.getChildByName("chessItem").getComponent("chessItemCtrl").id=config.playerInfo.usingChesses[4],this.set5.getChildByName("chessItem").getComponent("chessItemCtrl").refreshInfo();for(var e=0;e<this.chessContent.children.length;e++)this.chessContent.children[e].getComponent("chessItemCtrl").check(),this.chessContent.children[e].getComponent("chessItemCtrl").refreshInfo()},leaveUI:function(){config.UICtrl.getUIComponent("main").refreshChessPreview(),this.cancel()}}),cc._RF.pop()},{"./otherUIBase":"otherUIBase"}],chooseChessCtrl:[function(e,t){"use strict";cc._RF.push(t,"a8924litrdC5bIcB7ef3rPo","chooseChessCtrl"),cc.Class({extends:cc.Component,properties:{requireNum:0,chessList:[]},onLoad:function(){var e=this;config.eventDelegate.addEvent("\u9009\u62e9\u68cb\u5b50",function(t){e.checkSameChess(t.detail)||(e.chessList.push(t.detail),e.chessList.length>=e.requireNum&&(config.eventDelegate.dispatchEvent("\u9009\u62e9\u68cb\u5b50\u5b8c\u6bd5",e.chessList),e.chessList=[],e.requireNum=0,e.node.destroy(),config.eventDelegate.cleanEvent("\u9009\u62e9\u68cb\u5b50")))})},setChessList:function(e){this.chessList=e},checkSameChess:function(e){for(var t=0;t<this.chessList.length;t++)if(e==this.chessList[t])return!0;return!1},start:function(){this.setChooseMode()},setMaskSize:function(e,t){this.node.getChildByName("mask").width=e,this.node.getChildByName("mask").height=t},setMaskPosition:function(e,t){this.node.getChildByName("mask").setPosition(e,t)},setText:function(e){this.node.getChildByName("text").getComponent(cc.Label).string=e},setTextPosition:function(e,t){this.node.getChildByName("text").setPosition(e,t)},setChooseMode:function(){config.UICtrl.getUIComponent("boardLayer").setControlMode(2)}}),cc._RF.pop()},{}],config:[function(e,t){"use strict";cc._RF.push(t,"6e09cb6LuJM1JR16LhquW5V","config"),window.config={warehouse:e("./warehouse"),tools:e("./tools"),dj:e("./dj"),eventDelegate:e("./eventDelegate"),resultCreator:e("./randomResultCreator"),animCtrl:e("./animCtrl"),UICtrl:e("./UICtrl"),saver:e("./saver"),wxTools:e("./wxtools"),ksTools:e("./kstools"),objectPool:e("./objectPool"),effectCtrl:e("./effectCtrl"),playerInfoManager:e("./playerInfoManager"),gameInfo:{chessData:{0:null,1:null,2:null,3:null,4:null},chessEffect:{0:null,1:null,2:null,3:null,4:null},widthSpace:50,heightSpace:50,mapHigh:0,mapWide:0,currentDangerCountdown:1,masterData:{}},UIInfo:{currentPass:0},passInfo:{},accountInfo:{openID:null,nickName:null,avatarlUrl:null},updateInfo:{nickName:null,avatarlUrl:null,province:null,usingSkin:null,cowNum:null,highestMoney:null,lowestStep:null,firstPassTime:null},currentDate:0,avatarPic:null,needUpdate:!1,playerInfo:{firstGame:!0,passedYesterday:!1,firstLunchToday:!0,creatAccountDate:null,lastLunchDate:null,playTimesToday:0,passedTime:0,highestMoneyToday:0,lowestStepToday:0,firstPassToday:null,starNum:0,cowNum:0,unlockedSkin:[],usingSkin:"",province:"",data1:0,data2:0,data3:0,data4:0,data5:1,saverVersion:1.12,raceList:[],rank:10,data6:0,skinFragmentProgress:{s1:0,s2:0,s3:0,s4:0,s5:0,s6:0,s7:0,s8:0,s9:0,s10:0,s11:0,s12:0,s13:0,s14:0,s15:0,s16:0,s17:0,s18:0},missionList:[],missionProgress:0,boxProgress:0,behaviorDataCollection:{shareGame:0,fourRemove:0,fiveRemove:0,watchAD:0,sell1000W:0,sell20Fruits:0,buyCommodity:0,checkRank:0,useAddStep:0,usePriceUp:0,useGetMoney:0},dailyCommodityList:[],usingMaster:4e4,ownedMaster:[4e4,40002,40003],usingChesses:[1e4,10004,10003,10002,10001],ownedChess:[1e4,10001,10002,10003,10004],chessLevel:{1e4:0,10001:0,10002:0,10003:0,10004:0,10005:0,10006:0,10007:0,10008:0,10009:0,10010:0,10011:0,10012:0,10013:0,10014:0,10015:0,10016:0,10017:0,10018:0,10019:0,10020:0,10021:0,10022:0,10023:0,10024:0,10025:0},chessFragmentProgress:{1e4:0,10001:0,10002:0,10003:0,10004:0},normalPool:[1e4,10001,10002,10003,10004,10005],rarePool:[10006,10007,10009,10010,10011,10012],epicPool:[10008,10013,10014,10015,10016,10017,10018,10019,10020,10021,10022,10023,10024,10025]},totalSkin:18,areaList:["\u5317\u4eac","\u5929\u6d25","\u4e0a\u6d77","\u91cd\u5e86","\u6cb3\u5317","\u5c71\u897f","\u5185\u8499\u53e4","\u8fbd\u5b81","\u5409\u6797","\u9ed1\u9f99\u6c5f","\u6c5f\u82cf","\u6d59\u6c5f","\u5b89\u5fbd","\u798f\u5efa","\u6c5f\u897f","\u5c71\u4e1c","\u6cb3\u5357","\u6e56\u5317","\u6e56\u5357","\u5e7f\u4e1c","\u5e7f\u897f","\u6d77\u5357","\u56db\u5ddd","\u8d35\u5dde","\u4e91\u5357","\u897f\u85cf","\u9655\u897f","\u7518\u8083","\u9752\u6d77","\u5b81\u590f","\u65b0\u7586","\u9999\u6e2f","\u6fb3\u95e8","\u53f0\u6e7e"],dailyRank:null,dailyrankList:[],dailyDone:!1,dailyProgress:0,historyRank:null,historyRankList:[],historyDone:!1,yesterdayRank:null,yesterdayRankList:[],yesterdayDone:!1,raceProgress:0,raceDone:!1,red:0,green:0,yellow:0,blue:0,purple:0,total:0,teachStageNum:0,stage14:{match3Grow:2,matchComboGrow:1,match4Grow:3,match5Grow:7,step:20,target:100,bailout:2,finance:30,speculation:[1,5]},stageNum:1,stage1:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:20,target:100,bailout:2,finance:30,speculation:[1,3]},stage2:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:30,target:1e3,bailout:3,finance:100,speculation:[1,4]},stage3:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:1e4,bailout:4,finance:300,speculation:[1,5]},stage4:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:30,target:1e4,bailout:4,finance:500,speculation:[1,5]},stage5:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:30,target:15e3,bailout:4,finance:750,speculation:[1,5]},stage6:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:2e4,bailout:4,finance:1e3,speculation:[1,5]},stage7:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:3e4,bailout:4,finance:1500,speculation:[1,5]},stage8:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:5e4,bailout:4,finance:2500,speculation:[1,5]},stage9:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:7e4,bailout:4,finance:3500,speculation:[1,5]},stage10:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:1e5,bailout:4,finance:5e3,speculation:[1,5]},gameSetting:null,lastClickPoint:null,thisClickPoint:null,usedAD:0,transcribed:!1,cloudPlayerSaver:{avatarlUrl:null,usingSkin:null,unlockedSkin:[],firstLunchToday:null,UID:null,nickName:null,province:null,cowNum:null,starNum:null,passNumToday:null,highestMoneyToday:null,lowestStepToday:null,firstPassTimeToday:null,creatAccountDate:null,firstGame:!0,historyHighestMoney:null}},cc._RF.pop()},{"./UICtrl":"UICtrl","./animCtrl":"animCtrl","./dj":"dj","./effectCtrl":"effectCtrl","./eventDelegate":"eventDelegate","./kstools":"kstools","./objectPool":"objectPool","./playerInfoManager":"playerInfoManager","./randomResultCreator":"randomResultCreator","./saver":"saver","./tools":"tools","./warehouse":"warehouse","./wxtools":"wxtools"}],dj:[function(e,t){"use strict";var n,i,o,s;cc._RF.push(t,"b3691Xew0hFoLgSzqnc7TBD","dj"),t.exports=(i=null,o=!1,s=null,(n={}).playMusic=function(e,t){if(config.playerInfo.music){i&&cc.audioEngine.stopMusic(),cc.audioEngine.playMusic(e,!0);var n=void 0===t?1:t;cc.audioEngine.setMusicVolume(n),i=e}},n.stopMusic=function(){i&&cc.audioEngine.stopMusic()},n.pauseMusic=function(){i&&cc.audioEngine.pauseMusic()},n.resumeMusic=function(){i&&cc.audioEngine.resumeMusic()},n.setMusicVolume=function(e){cc.audioEngine.setMusicVolume(e)},n.switchMusic=function(){},n.playEffect=function(e,t,n){if(!o&&config.playerInfo.sound){n?s=cc.audioEngine.playEffect(e,n):cc.audioEngine.playEffect(e,n);var i=void 0===t?1:t;cc.audioEngine.setEffectsVolume(i)}},n.setEffectVolume=function(){},n.stopEffect=function(){s&&cc.audioEngine.stop(s)},n.switchEffect=function(e){o=e},n),cc._RF.pop()},{}],effectCtrl:[function(e,t){"use strict";cc._RF.push(t,"4c637LXKj1DMqrAwJZZVO6E","effectCtrl"),t.exports={showEffect:function(){}},cc._RF.pop()},{}],enemyData:[function(e,t){"use strict";cc._RF.push(t,"cd2ccK66oFKSJAUtc/lq9UC","enemyData"),cc.Class({extends:cc.Component,properties:{spine:"",zombieName:"",currentHP:0,MaxHP:0,ATK:0,elementType:0,dodge:0,buffList:[],ATKFix:0,hurtFix:0,shield:0,actionLine:[],actionProgress:0,action1Data:null,action2Data:null,action3Data:null,dangerCountdown:1},addBuff:function(e,t){for(var n=0;n<this.buffList.length;n++)if(this.buffList[n].component.id==e)return void this.buffList[n].component.countChange(t);var i=config.tools.getBuffDataByID(e),o=this.UI.addBuff(i.script);o.component.onInitData(e,t,i,this),this.buffList.push(o)},removeBuff:function(e){for(var t=0;t<this.buffList.length;t++)this.buffList[t].component.id==e&&(this.buffList[t].ui.destroy(),this.buffList.splice(t,1))},checkBuffList:function(e){switch(e){case"turnBegin":for(var t=0;t<this.buffList.length;t++)this.buffList[t].component.onRefresh(),this.buffList[t].component.onTurnBegin();break;case"turnEnd":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onTurnEnd(),this.buffList[t].component.nextStage();break;case"getATK":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onAttack();break;case"getAttack":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onGetHurt()}},getCurrentActionData:function(){var e=this.actionLine[this.actionProgress];if(e)return 1==e?this.action1Data:2==e?this.action2Data:3==e?this.action3Data:null},getActionPreview:function(){var e=1,t=this.actionProgress+1;for(t>=this.actionLine.length&&(t=0);!this.actionLine[t];)e+=1,(t+=1)>=this.actionLine.length&&(t=0);return 1==this.actionLine[t]?[this.action1Data,e]:2==this.actionLine[t]?[this.action2Data,e]:3==this.actionLine[t]?[this.action3Data,e]:void 0},getAttack:function(e){this.checkBuffList("getAttack"),100*Math.random()<=this.dodge?console.log("\u654c\u4eba\u95ea\u907f"):(config.eventDelegate.dispatchEvent("\u654c\u4eba\u53d7\u5230\u4f24\u5bb3"),e*=(100+this.hurtFix)/100,this.shield>0&&(this.shield>e?(this.shield-=e,e=0):(e-=this.shield,this.shield=0)),this.currentHP-=Math.floor(e),this.UI.refreshShield(),this.UI.refreshLife())},getHeal:function(e){this.currentHP+=e,this.currentHP>=this.MaxHP&&(this.currentHP=this.MaxHP),this.UI.refreshLife()},getShield:function(e){this.shield+=e,this.shield>=this.MaxHP&&(this.shield=this.MaxHP),this.UI.refreshShield()},nextAction:function(){this.actionProgress+=1,this.actionProgress>=this.actionLine.length&&(this.actionProgress=0)},nextTurn:function(){this.dangerCountdown+=1,this.UI.refreshDangerCountdown(),this.UI.refreshActionCountdown()},getATK:function(){return this.checkBuffList("getATK"),this.ATK*((100+this.ATKFix)/100)},onLoad:function(){this.UI=this.node.getComponent("enemyUICtrl")}}),cc._RF.pop()},{}],enemyDealer:[function(e,t){"use strict";cc._RF.push(t,"11786+VPdlEapiM9mgRBhJa","enemyDealer"),cc.Class({extends:e("baseEffectDealer"),properties:{},onLoad:function(){this.enemyData=this.node.getChildByName("enemy").getComponent("enemyData"),this.playerData=this.node.getChildByName("player").getComponent("playerData"),this.board=this.node.getChildByName("boardLayer").getComponent("boardLayerCtrl"),this.initEnemyActionLine(),this.initEnemyEvent()},initEnemyActionLine:function(){},initEnemyEvent:function(){var e=this;config.eventDelegate.addEvent("\u654c\u4eba\u56de\u5408\u5f00\u59cb",function(){e.enemyData.checkBuffList("turnBegin"),e.action(),e.turnEnd()}),config.eventDelegate.addEvent("\u654c\u4eba\u56de\u5408\u7ed3\u675f",function(){config.UICtrl.getUIComponent("game").checkGameResult()||(e.enemyData.checkBuffList("turnEnd"),e.board.nextStage())}),config.eventDelegate.addEvent("\u654c\u4eba\u72c2\u66b4",function(){e.enemyData.ATK+=config.passInfo.attack,console.log("\u654c\u4eba\u72c2\u66b4")})},turnStart:function(){},turnEnd:function(){config.eventDelegate.dispatchEvent("\u654c\u4eba\u56de\u5408\u7ed3\u675f")},action:function(){this.enemyData.nextAction();var e=this.enemyData.getCurrentActionData();e&&this.checkAction(e),this.enemyData.nextTurn()},checkAction:function(e){for(var t=0;t<e.length;t++)this.checkEffect(e[t])},checkEffect:function(e){var t=this.getTarget(e.target);switch(e.type){case 0:var n=Math.floor(this.enemyData.getATK());t.getAttack(n);break;case 1:case 2:case 3:case 4:break;case 100:for(var i=Math.floor(Math.random()*config.gameInfo.mapHigh),o=0;o<config.gameInfo.mapWide;o++)this.board.addBottomEffectToMap(e,o,i)}}}),cc._RF.pop()},{baseEffectDealer:"baseEffectDealer"}],enemyUICtrl:[function(e,t){"use strict";cc._RF.push(t,"daa228mPfpKwoF9vMZV5u8J","enemyUICtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){config.UICtrl.UIList.enemyUI=this.node,this.aimPoint=this.node.getChildByName("aimPoint"),this.enemyData=this.node.getComponent("enemyData"),this.lifeBar=this.node.getChildByName("life"),this.zombieName=this.lifeBar.getChildByName("name"),this.lifeNum=this.lifeBar.getChildByName("num"),this.typeName=this.node.getChildByName("type").getChildByName("name"),this.actionCountdown=this.node.getChildByName("actionCountdown"),this.buffList=this.node.getChildByName("buffList"),this.dangerCountdown=this.node.getChildByName("dangerCountdown"),this.passName=this.node.getChildByName("passName"),this.enemySkeleton=this.node.getChildByName("enemySkeleton"),this.shield=this.lifeBar.getChildByName("shield"),this.shieldNum=this.shield.getChildByName("num")},addBuff:function(e){var t=cc.instantiate(config.warehouse.prefabList.buff);return this.buffList.addChild(t),t.addComponent(e),{ui:t,component:t.getComponent(e)}},refreshUI:function(){this.lifeBar.getChildByName("name").getComponent(cc.Label).string=this.enemyData.zombieName,this.passName.getChildByName("num").getComponent(cc.Label).string=config.passInfo.passName,this.refreshElementType(),this.refreshDangerCountdown(),this.refreshActionCountdown(),this.refreshLife(),this.refreshSkeleton()},refreshSkeleton:function(){var e=config.warehouse.SkeletonData;this.enemySkeleton.getComponent(sp.Skeleton).skeletonData=e[this.enemyData.spine],this.enemySkeleton.getComponent(sp.Skeleton).setAnimation(0,"daiji",!0)},refreshShield:function(){this.enemyData.shield>0?this.shieldNum.getComponent(cc.Label).string="\u62a4\u76fe:"+this.enemyData.shield:this.shieldNum.getComponent(cc.Label).string="",this.shield.getComponent(cc.ProgressBar).progress=this.enemyData.shield/this.enemyData.MaxHP},refreshLife:function(){this.lifeNum.getComponent(cc.Label).string="\u751f\u547d\u503c:"+this.enemyData.currentHP,this.lifeBar.getComponent(cc.ProgressBar).progress=this.enemyData.currentHP/this.enemyData.MaxHP},refreshDangerCountdown:function(){this.dangerCountdown.getChildByName("num").getComponent(cc.Label).string="\u7b2c"+this.enemyData.dangerCountdown+"\u56de\u5408"},refreshActionCountdown:function(){var e=this.enemyData.getActionPreview(),t="";switch(e[0][0].type){case 0:t="\u653b\u51fb";break;case 1:t="\u56de\u590d";break;case 3:t="\u52a0\u901f";break;case 4:t="\u51b2\u51fb";case 100:t="\u6380\u684c"}this.actionCountdown.getChildByName("name").getComponent(cc.Label).string=t,this.actionCountdown.getChildByName("num").getComponent(cc.Label).string=e[1]},refreshElementType:function(){0==this.enemyData.elementType?this.typeName.getComponent(cc.Label).string="\u91d1":1==this.enemyData.elementType?this.typeName.getComponent(cc.Label).string="\u6728":2==this.enemyData.elementType?this.typeName.getComponent(cc.Label).string="\u6c34":3==this.enemyData.elementType?this.typeName.getComponent(cc.Label).string="\u706b":4==this.enemyData.elementType&&(this.typeName.getComponent(cc.Label).string="\u571f")}}),cc._RF.pop()},{}],eventDelegate:[function(e,t){"use strict";cc._RF.push(t,"c2defqIpcpOCrPv2wa9WPOi","eventDelegate");var n=e("../overall/notificationCenter");t.exports={eventTypeList:{},addEvent:function(e,t){return this.eventTypeList[e]||(this.eventTypeList[e]=[],n.on(e,function(t){var n=this,i=this.eventTypeList[e];t.target=this,i.forEach(function(e){e.call(n,t)})}.bind(this))),this.eventTypeList[e].push(t),this.eventTypeList[e].length-1},checkEvent:function(e){return!!this.eventTypeList[e]},dispatchEvent:function(e,t){if(this.eventTypeList[e]){var i=new cc.Event.EventCustom(e,!0);i.setUserData(t),n.dispatchEvent(i)}else console.log("\u6ca1\u6709"+e+"\u4e8b\u4ef6")},cleanEvent:function(e){this.eventTypeList[e]&&(this.eventTypeList[e]=[])},cleanOneOfEvent:function(){},cleanAllEvent:function(){for(var e in this.eventTypeList)n.off(e);this.eventTypeList={}}},cc._RF.pop()},{"../overall/notificationCenter":"notificationCenter"}],frighten:[function(e,t){"use strict";cc._RF.push(t,"d2acdTn/a9Lt4Oad1GZw9ra","frighten"),cc.Class({extends:e("./buffBase"),properties:{}}),cc._RF.pop()},{"./buffBase":"buffBase"}],gameBeginCtrl:[function(e,t){"use strict";cc._RF.push(t,"0d1aePw40hDMqMH49GFyMGw","gameBeginCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){config.tools.addCallBackToButton(this.node,"gameBeginCtrl","gameBegin",null,this.node)},gameBegin:function(){function e(){for(var e=0,t=0;t<config.playerInfo.usingChesses.length;t++)config.playerInfo.usingChesses[t]&&e++;return e}for(var t=config.warehouse.json.masterData,n=config.playerInfo.usingMaster,i=0;i<t.length;i++)if(t[i].id==n){if(t[i].chessCtrl>e())return void console.log("\u4e0a\u9635\u68cb\u5b50\u4e0d\u591f");cc.director.loadScene("game")}}}),cc._RF.pop()},{}],gameCtrl:[function(e,t){"use strict";cc._RF.push(t,"ef772hkIPxFLLA7/neq2RA8","gameCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.enemy=this.node.getChildByName("enemy"),this.enemyData=this.enemy.getComponent("enemyData"),this.enemyUI=this.enemy.getComponent("enemyUICtrl"),this.player=this.node.getChildByName("player"),this.playerData=this.player.getComponent("playerData"),this.playerUI=this.player.getComponent("playerUICtrl"),this.chessDealer=this.node.getComponent("chessDealer"),this.enemyDealer=this.node.getComponent("enemyDealer"),this.masterDealer=this.node.getComponent("masterDealer"),this.buffDealer=this.node.getComponent("buffDealer"),this.initGameInfo(),config.UICtrl.UIList.game=this.node,this.usingSkill=!1,config.animCtrl.initWaitingAnimEvent()},start:function(){this.enemyUI.refreshUI(),this.playerUI.refreshUI()},initGameInfo:function(){this.initEnemyData(),this.initEnemyBeginSkill(),this.initMasterData(),this.initPlayerData()},initEnemyData:function(){for(var e=config.passInfo,t=config.warehouse.json.enemyData,n=0;n<t.length;n++)t[n].id==e.enemyID&&this.loadEnemyData(t[n],e)},loadEnemyData:function(e,t){this.enemyData.MaxHP=t.life,this.enemyData.currentHP=t.life,this.enemyData.ATK=t.attack,this.enemyData.elementType=e.element,this.enemyData.actionLine=e.actionLine,this.enemyData.zombieName=e.zombieName,this.enemyData.action1Data=e.action1,this.enemyData.action2Data=e.action2,this.enemyData.action3Data=e.action3,this.enemyData.spine=e.spine},initEnemyBeginSkill:function(){},initPlayerData:function(){this.playerData.MaxHP=100,this.playerData.currentHP=100,this.playerData.MaxEnergy=200,this.playerData.energy=0},initMasterData:function(){for(var e=config.warehouse.json.masterData,t=0;t<e.length;t++)e[t].id==config.playerInfo.usingMaster&&(config.gameInfo.masterData=e[t])},checkGameResult:function(){return this.enemyData.currentHP<=0?(config.UICtrl.addUI("gameStatement",this.node.getChildByName("other"),!0),!0):this.playerData.currentHP<=0&&(console.log("\u6e38\u620f\u5931\u8d25"),config.UICtrl.addUI("gameStatement",this.node.getChildByName("other"),!1),!0)}}),cc._RF.pop()},{}],gameStatementCtrl:[function(e,t){"use strict";cc._RF.push(t,"ebf4cfsPVlOaq0J8fY24lz2","gameStatementCtrl"),cc.Class({extends:e("./otherUIBase"),properties:{},init:function(e){this.win=!!e},onLoad:function(){this.content=this.node.getChildByName("content"),this.bg=this.content.getChildByName("bg"),this.title=this.content.getChildByName("title"),this.leave=this.content.getChildByName("leave"),this.getReword=this.content.getChildByName("getReword"),this.getBonus=this.content.getChildByName("getBonus"),this.nextPass=this.content.getChildByName("nextPass"),this.win?this.title.getComponent(cc.Label).string="\u6e38\u620f\u80dc\u5229":this.title.getComponent(cc.Label).string="\u6e38\u620f\u5931\u8d25",config.tools.addCallBackToButton(this.node,"gameStatementCtrl","backToMain",null,this.leave)},backToMain:function(){config.eventDelegate.cleanAllEvent(),cc.director.loadScene("main")}}),cc._RF.pop()},{"./otherUIBase":"otherUIBase"}],ironBody:[function(e,t){"use strict";cc._RF.push(t,"bb0ec6RYjNLTYOmIJLO3Tsi","ironBody"),cc.Class({extends:e("./buffBase"),properties:{nodeData:0},onInitData:function(e,t,n,i){this.initData(e,t,n,i),this.onGetSkill()},onGetSkill:function(){this.data.getSkill[1].num1=-1*(this.data.getSkill[0].num1+config.UICtrl.getUIComponent("game").playerData.hurtFix),this.getSkill()},onCostSkill:function(){this.data.costSkill[1].num1=this.data.getSkill[0].num1+config.UICtrl.getUIComponent("game").playerData.hurtFix,this.costSkill()},onRefresh:function(){this.data.getSkill[1].num1=-1*(this.data.getSkill[0].num1+config.UICtrl.getUIComponent("game").playerData.hurtFix),this.data.costSkill[1].num1=this.data.getSkill[0].num1+config.UICtrl.getUIComponent("game").playerData.hurtFix,this.refresh()},nextStage:function(){this.duration>0&&(this.duration-=1,this.refreshCount(this.duration),this.duration<=0&&(this.onCostSkill(),this.onBuffRemove()))}}),cc._RF.pop()},{"./buffBase":"buffBase"}],kstools:[function(require,module,exports){"use strict";cc._RF.push(module,"8e7ac0jphVMWbk1nizPqK7S","kstools"),module.exports={login:function(){var e=this;this.checkSession()?console.log("\u8fdb\u5165\u6e38\u620f"):ks.login({success:function(t){e.authorize("scope.userInfo",t.code)},fail:function(){}})},authorize:function(e,t){var n=this;ks.authorize({scope:e,success:function(){console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6210\u529f"),n.getKSUserInfo(t)},fail:function(e){console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25: "+JSON.stringify(e)),ks.exitMiniProgram()},complete:function(){}})},getKSUserInfo:function(e){var t=this;ks.getUserInfo({success:function(n){config.tools.loadAvatarPicOnKs(n.avatarUrl),config.accountInfo.nickName=n.nickName,config.accountInfo.avatarlUrl=n.avatarUrl,t.openIDRequest(e)},fail:function(e){console.log("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25\uff1a"+JSON.stringify(e))},complete:function(){}})},openIDRequest:function(e){var t=this,n="http://60.204.241.244:8079/cowplay/"+e;ks.request({url:n,method:"GET",success:function(e){console.log("\u767b\u5f55\u6210\u529f");var n=JSON.parse(e.data.data);config.accountInfo.openID=n.open_id,t.getPlayerInfoByOpenId()},fail:function(){}})},getPlayerInfoByOpenId:function(){var e=this;ks.request({url:"http://60.204.241.244:8079/cowplay/getinfobyopenid",data:{openid:config.accountInfo.openID},method:"POST",success:function(t){var n=t.data.data.playerinfo,i=t.data.data.userinfo;if(n){var o=config.saver.getData("playerInfo");config.saver.checkSaverVersion(o)?config.playerInfo=o:e.transfromVersion(o),e.readPlayerInfo(n),e.checkFirst(),e.editPlayerInfo(),console.log("\u8bfb\u53d6\u5b58\u6863\u6210\u529f")}else console.log("\u521b\u5efa\u5b58\u6863"),config.saver.deleteData("playerInfo"),e.checkSaver(),e.checkFirst(),e.creatPlayerInfo();i?console.log(i):e.addUserInfo(),config.UICtrl.getUIComponent("loading").lunched=!0,config.playerInfo.firstGame?config.UICtrl.getUIComponent("cutting").cutToScene("game"):config.UICtrl.getUIComponent("cutting").cutToScene("rank")},fail:function(){}})},getUserInfoByOpenId:function getUserInfoByOpenId(id,list,index,type){ks.request({url:"http://60.204.241.244:8079/cowplay/getinfobyopenid",data:{openid:id},method:"POST",success:function success(res){"daily"==type?(list[index].userinfo=res.data.data.userinfo,list[index].userinfo.firstpasstoday=JSON.parse(eval("("+res.data.data.playerinfo.firstpasstoday+")")),list[index].userinfo.loweststeptoday=res.data.data.playerinfo.loweststeptoday,list[index].userinfo.cownum=res.data.data.playerinfo.data4,list[index].userinfo.usingskin=res.data.data.playerinfo.usingskin,config.dailyProgress-=1,config.dailyProgress<=0&&(config.dailyDone=!0)):"history"==type?res.data.data.userinfo&&(list[index].userinfo=res.data.data.userinfo,list[index].userinfo.cownum=res.data.data.playerinfo.passedtime):"yesterday"==type?res.data.data.userinfo&&(list[index].userinfo=res.data.data.userinfo,list[index].userinfo.cownum=res.data.data.playerinfo.data4):"race"==type&&(list[index]=[res.data.data.userinfo.nickname,res.data.data.playerinfo.highestmoneytoday,res.data.data.playerinfo.openid],config.raceProgress-=1,config.raceProgress<=0&&config.UICtrl.getUIComponent("race").refreshUI())},fail:function(){}})},creatPlayerInfo:function(){ks.request({url:"http:/60.204.241.244:8079/cowplay/addplayerinfo",data:{openid:config.accountInfo.openID.toString(),firstGame:config.playerInfo.firstGame.toString(),passedYesterday:config.playerInfo.passedYesterday.toString(),firstLunchToday:config.playerInfo.firstLunchToday.toString(),creatAccountDate:JSON.stringify(JSON.stringify(config.playerInfo.creatAccountDate)),lastLunchDate:JSON.stringify(JSON.stringify(config.playerInfo.lastLunchDate)),playTimesToday:config.playerInfo.playTimesToday.toString(),passedTime:config.playerInfo.passedTime.toString(),highestMoneyToday:config.playerInfo.highestMoneyToday.toString(),lowestStepToday:config.playerInfo.lowestStepToday.toString(),firstPassToday:JSON.stringify(JSON.stringify(config.playerInfo.firstPassToday)),starNum:config.playerInfo.starNum.toString(),unlockedSkin:config.playerInfo.unlockedSkin.toString(),usingSkin:config.playerInfo.usingSkin.toString(),province:config.playerInfo.province.toString(),data1:config.playerInfo.data1.toString(),data2:config.playerInfo.data2.toString(),data3:config.playerInfo.data3.toString(),data4:config.playerInfo.data4.toString(),data5:config.playerInfo.data5.toString(),saverVersion:config.playerInfo.saverVersion.toString()},method:"POST",success:function(){console.log("\u65b0\u589e\u7528\u6237\u5b58\u6863\u4fe1\u606f\u6210\u529f")},fail:function(){console.log("\u65b0\u589e\u7528\u6237\u5b58\u6863\u4fe1\u606f\u5931\u8d25")}})},editPlayerInfo:function(){ks.request({url:"http:/60.204.241.244:8079/cowplay/editplayerinfo",data:{openid:config.accountInfo.openID.toString(),firstGame:config.playerInfo.firstGame.toString(),passedYesterday:config.playerInfo.passedYesterday.toString(),firstLunchToday:config.playerInfo.firstLunchToday.toString(),creatAccountDate:JSON.stringify(JSON.stringify(config.playerInfo.creatAccountDate)),lastLunchDate:JSON.stringify(JSON.stringify(config.playerInfo.lastLunchDate)),playTimesToday:config.playerInfo.playTimesToday.toString(),passedTime:config.playerInfo.passedTime.toString(),highestMoneyToday:config.playerInfo.highestMoneyToday.toString(),lowestStepToday:config.playerInfo.lowestStepToday.toString(),firstPassToday:JSON.stringify(JSON.stringify(config.playerInfo.firstPassToday)),starNum:config.playerInfo.starNum.toString(),unlockedSkin:config.playerInfo.unlockedSkin.toString(),usingSkin:config.playerInfo.usingSkin.toString(),province:config.playerInfo.province.toString(),data1:config.playerInfo.data1.toString(),data2:config.playerInfo.data2.toString(),data3:config.playerInfo.data3.toString(),data4:config.playerInfo.data4.toString(),data5:config.playerInfo.data5.toString(),saverVersion:config.playerInfo.saverVersion.toString()},method:"POST",success:function(){console.log("\u4fee\u6539\u7528\u6237\u5b58\u6863\u4fe1\u606f\u6210\u529f")},fail:function(){console.log("\u4fee\u6539\u7528\u6237\u5b58\u6863\u4fe1\u606f\u5931\u8d25")}})},addUserInfo:function(){ks.request({url:"http:/60.204.241.244:8079/cowplay/adduserinfo",data:{openid:config.accountInfo.openID.toString(),avatarlUrl:config.accountInfo.avatarlUrl.toString(),cowNum:config.playerInfo.passedTime.toString(),highestMoney:config.playerInfo.highestMoneyToday.toString(),lowestStepToday:config.playerInfo.lowestStepToday.toString(),firstPassToday:JSON.stringify(JSON.stringify(config.playerInfo.firstPassToday)),nickName:config.accountInfo.nickName.toString(),usingSkin:config.playerInfo.usingSkin.toString(),province:config.playerInfo.province.toString()},method:"POST",success:function(){console.log("\u65b0\u589e\u7528\u6237\u4fe1\u606f\u6210\u529f")},fail:function(){console.log("\u65b0\u589e\u7528\u6237\u4fe1\u606f\u5931\u8d25")}})},editUserInfo:function(){ks.request({url:"http:/60.204.241.244:8079/cowplay/edituserinfo",data:{openid:config.accountInfo.openID.toString(),avatarlUrl:config.accountInfo.avatarlUrl.toString(),cowNum:config.playerInfo.passedTime.toString(),highestMoney:config.playerInfo.highestMoneyToday.toString(),lowestStepToday:config.playerInfo.lowestStepToday.toString(),firstPassToday:JSON.stringify(JSON.stringify(config.playerInfo.firstPassToday)),nickName:config.accountInfo.nickName.toString(),usingSkin:config.playerInfo.usingSkin.toString(),province:config.playerInfo.province.toString()},method:"POST",success:function(){console.log("\u4fee\u6539\u7528\u6237\u4fe1\u606f\u6210\u529f")},fail:function(){console.log("\u4fee\u6539\u7528\u6237\u4fe1\u606f\u5931\u8d25")}})},readPlayerInfo:function readPlayerInfo(data){config.playerInfo.creatAccountDate=JSON.parse(eval("("+data.creataccountdate+")")),config.playerInfo.data1=parseInt(data.data1),config.playerInfo.data2=parseInt(data.data2),config.playerInfo.data3=parseInt(data.data3),config.playerInfo.data4=parseInt(data.data4),config.playerInfo.data5=parseInt(data.data5),config.playerInfo.firstGame=JSON.parse(data.firstgame),config.playerInfo.firstLunchToday=JSON.parse(data.firstlunchtoday),config.playerInfo.firstPassToday=JSON.parse(eval("("+data.firstpasstoday+")")),config.playerInfo.highestMoneyToday=parseInt(data.highestmoneytoday),config.playerInfo.lastLunchDate=JSON.parse(eval("("+data.lastlunchdate+")")),config.playerInfo.lowestStepToday=parseInt(data.loweststeptoday),config.accountInfo.openID=data.openid,config.playerInfo.passedTime=parseInt(data.passedtime),config.playerInfo.passedYesterday=JSON.parse(data.passedyesterday),config.playerInfo.playTimesToday=parseInt(data.playtimestoday),config.playerInfo.province=data.province,config.playerInfo.starNum=parseInt(data.starnum),data.unlockedskin?config.playerInfo.unlockedSkin=data.unlockedskin.split(","):config.playerInfo.unlockedSkin=[],config.playerInfo.usingSkin=data.usingskin},checkSession:function(){ks.checkSession({success:function(){return!0},fail:function(){return!1}})},addUserScore:function(){ks.request({url:"http:/60.204.241.244:8079/cowplay/adduserscore",data:{openid:config.accountInfo.openID.toString(),score:config.playerInfo.highestMoneyToday},method:"POST",success:function(e){console.log(e)},fail:function(e){console.log(e)}})},getScoreToday:function(){var e=this;ks.request({url:"http:/60.204.241.244:8079/cowplay/getscore/today",method:"GET",success:function(t){t.data.data.list.length>0?(config.dailyRank=e.extractData(t.data.data.list,"daily"),config.dailyProgress=config.dailyRank.length):(config.dailyRank=[],config.dailyDone=!0)},fail:function(){config.dailyDone=!0}})},getScoreYesterday:function(){var e=this;ks.request({url:"http:/60.204.241.244:8079/cowplay/getscore/yesterday",method:"GET",success:function(t){config.yesterdayDone=!0,config.yesterdayRank=e.extractData(t.data.data.list,"yesterday")},fail:function(){config.yesterdayDone=!0}})},getScoreAll:function(){var e=this;ks.request({url:"http:/60.204.241.244:8079/cowplay/getscore/all",method:"GET",success:function(t){config.historyDone=!0,config.historyRank=e.extractData(t.data.data.list,"history")},fail:function(){config.historyDone=!0}})},extractData:function(e,t){for(var n=[],i=0;i<e.length;i++){var o={openid:e[i].openid,score:e[i].score,score_day:e[i].score_day,userinfo:null};n.push(o),this.getUserInfoByOpenId(e[i].openid,n,i,t)}return n},getDailyPlayerInfoByOpenId:function(e){for(var t=0;t<config.dailyRank.length;t++)if(config.dailyRank[t].openid==e)return[config.dailyRank[t].userinfo.nickname,config.dailyRank[t].score,config.dailyRank[t].userinfo.openid];return null},getSetting:function(){ks.getSetting({success:function(){},fail:function(){}})},shareAppMessage:function(){ks.shareAppMessage()},checkDesk:function(){ks.checkShortcut({success:function(e){return console.log("\u662f\u5426\u5df2\u6dfb\u52a0\u5feb\u6377\u65b9\u5f0f",e.installed),!!e.installed},fail:function(e){-10005===e.code?console.log("\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd"):console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f\u5931\u8d25",e.msg)}})},addDesk:function(){ks.addShortcut({success:function(){console.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f")},fail:function(e){-10005===e.code?console.log("\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd"):console.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25",e.msg)}})},activeShare:function(e){ks.shareAppMessage({success:function(){console.log("\u5206\u4eab\u6210\u529f"),config.playerInfo.data5-=1,config.UICtrl.getUIComponent("checkLayer").getReword(e),config.saver.initData()},fail:function(){console.log("\u5206\u4eab\u5931\u8d25"),cc.find("Canvas").getComponent("gameCtrl").stepCount<=0&&config.UICtrl.getUIComponent("checkLayer").settle()}})},transfromVersion:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var i=n[t],o=i[0],s=i[1];"saverVersion"!=o&&(config.playerInfo[o]=s)}},checkSaver:function(){config.saver.hasData("playerInfo")&&config.saver.getData("playerInfo")?config.playerInfo.creatAccountDate||config.saver.noteCreatAccountDate():(console.log("\u6ce8\u518c\u6e38\u620f\u8d26\u53f7"),config.saver.noteCreatAccountDate())},checkFirst:function(){config.saver.checkFirstLunchToday()?(console.log("\u662f\u4eca\u5929\u7b2c\u4e00\u6b21\u767b\u5f55"),config.playerInfo.highestMoneyToday>0||config.playerInfo.lowestStepToday>0||config.playerInfo.firstPassToday?config.playerInfo.passedYesterday=!0:config.playerInfo.passedYesterday=!1,config.playerInfo.highestMoneyToday=0,config.playerInfo.lowestStepToday=0,config.playerInfo.firstPassToday=null,config.playerInfo.playTimesToday=0,config.playerInfo.data4=0,config.playerInfo.data2=0,config.playerInfo.raceList=[],config.playerInfo.firstLunchToday=!0,config.playerInfo.data1>7&&(config.playerInfo.data1=0),config.playerInfo.data1+=1,config.playerInfo.missionList=this.drawSixDailyMissions(),config.playerInfo.missionProgress=0,config.playerInfo.behaviorDataCollection={shareGame:0,fourRemove:0,fiveRemove:0,watchAD:0,sell1000W:0,sell20Fruits:0,buyCommodity:0,checkRank:0,useAddStep:0,usePriceUp:0,useGetMoney:0},config.playerInfo.dailyCommodityList=this.drawFourDailyCommodities(),0==config.playerInfo.rank?config.playerInfo.starNum+=10:1==config.playerInfo.rank?config.playerInfo.starNum+=8:2==config.playerInfo.rank?config.playerInfo.starNum+=6:3==config.playerInfo.rank?config.playerInfo.starNum+=5:4==config.playerInfo.rank?config.playerInfo.starNum+=4:5==config.playerInfo.rank?config.playerInfo.starNum+=3:6==config.playerInfo.rank?config.playerInfo.starNum+=2:config.playerInfo.rank>=7&&config.playerInfo.rank<10&&(config.playerInfo.starNum+=1),config.playerInfo.rank=10,config.playerInfo.data5=1,console.log(config.playerInfo),console.log("\u5237\u65b0\u6bcf\u65e5\u6570\u636e")):console.log("\u4e0d\u662f\u4eca\u5929\u7b2c\u4e00\u6b21\u767b\u5f55"),config.saver.noteLunchDate(),config.saver.initData()},drawFourDailyCommodities:function(){for(var e=[],t=config.warehouse.json.dailyCommodityList.length,n=0;n<4;n++)e.push(Math.floor(Math.random()*t));return e},drawSixDailyMissions:function(){for(var e=[],t=config.warehouse.json.missionList.length,n=0;n<t;n++)e.push(n);for(;e.length>6;)e.splice(Math.floor(Math.random()*e.length),1);return e}},cc._RF.pop()},{}],leaveCtrl:[function(e,t){"use strict";cc._RF.push(t,"80dedmwj29HTJHQhoKxREpn","leaveCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){config.tools.addCallBackToButton(this.node,"leaveCtrl","leave",null,this.node)},leave:function(){config.eventDelegate.cleanAllEvent(),cc.director.loadScene("main")}}),cc._RF.pop()},{}],loadingCtrl:[function(e,t){"use strict";cc._RF.push(t,"90f1ecRJGVOnqZjxXdAK8L1","loadingCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.progressCount=0,this.totalRes=Object.keys(config.warehouse).length,this.hasLoadRes=0,this.begin=this.node.getChildByName("begin"),config.tools.addCallBackToButton(this.node,"loadingCtrl","loadGameAssets",null,this.begin)},loadGameAssets:function(){this.loadMyRes("sprite",cc.SpriteFrame,"spriteFrame"),this.loadMyRes("json",cc.JsonAsset,"json"),this.loadMyRes("prefab",cc.Prefab,"prefabList"),this.loadMyRes("spine",sp.SkeletonData,"SkeletonData")},loadMySub:function(e,t,n){var i=this;cc.assetManager.loadBundle(e,function(e,o){e||o.loadDir("",t,function(e,t){if(e);else{for(var o=0;o<t.length;o++){var s=t[o]instanceof cc.SpriteAtlas?t[o].name.slice(0,-6):t[o].name;t[o]instanceof cc.JsonAsset?config.warehouse[n][s]=t[o].json:config.warehouse[n][s]=t[o]}i.hasLoadRes+=1}})})},loadMyRes:function(e,t,n){var i=this;cc.resources.loadDir(e,t,function(e,t){if(e);else{for(var o=0;o<t.length;o++){var s=t[o]instanceof cc.SpriteAtlas?t[o].name.slice(0,-6):t[o].name;t[o]instanceof cc.JsonAsset?config.warehouse[n][s]=t[o].json:config.warehouse[n][s]=t[o]}i.hasLoadRes+=1}})},update:function(){this.hasLoadRes===this.totalRes&&(cc.director.loadScene("main"),this.hasLoadRes=0)}}),cc._RF.pop()},{}],mainCtrl:[function(e,t){"use strict";cc._RF.push(t,"4b546cskNhBkolgbDi0CoTG","mainCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.battleAdjustment=this.node.getChildByName("battleAdjustment"),this.masterSet=this.battleAdjustment.getChildByName("masterSet"),this.chessSet1=this.battleAdjustment.getChildByName("chessSet1"),this.chessSet2=this.battleAdjustment.getChildByName("chessSet2"),this.chessSet3=this.battleAdjustment.getChildByName("chessSet3"),this.chessSet4=this.battleAdjustment.getChildByName("chessSet4"),this.chessSet5=this.battleAdjustment.getChildByName("chessSet5"),this.other=cc.find("Canvas/other"),this.shop=this.node.getChildByName("shop"),config.UICtrl.UIList.main=this.node,config.UICtrl.UIList.other=this.other,config.tools.addCallBackToButton(this.node,"mainCtrl","showMasterSelection",null,this.masterSet),config.tools.addCallBackToButton(this.node,"mainCtrl","showShowLayer",null,this.shop),this.initChessButton(),this.refreshChessPreview(),this.refreshMasterPreview()},showShowLayer:function(){config.UICtrl.addUI("shopLayer",this.other)},showMasterSelection:function(){config.UICtrl.addUI("masterSelection",this.other)},refreshMasterPreview:function(){for(var e=config.warehouse.json.masterData,t=config.playerInfo.usingMaster,n=0;n<e.length;n++)e[n].id==t&&(e[n].avatar?(this.masterSet.getChildByName("name").active=!1,this.masterSet.getChildByName("bg").active=!0,this.masterSet.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[e[n].avatar]):(this.masterSet.getChildByName("name").active=!0,this.masterSet.getChildByName("bg").active=!1,this.masterSet.getChildByName("name").getComponent(cc.Label).string=e[n].name))},initChessButton:function(){this.setChessButton(this.chessSet1),this.setChessButton(this.chessSet2),this.setChessButton(this.chessSet3),this.setChessButton(this.chessSet4),this.setChessButton(this.chessSet5)},refreshChessPreview:function(){config.playerInfo.usingChesses[0]?this.setChessPic(this.chessSet1,config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[0]).level1Pic):this.setChessPic(this.chessSet1),config.playerInfo.usingChesses[1]?this.setChessPic(this.chessSet2,config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[1]).level1Pic):this.setChessPic(this.chessSet2),config.playerInfo.usingChesses[2]?this.setChessPic(this.chessSet3,config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[2]).level1Pic):this.setChessPic(this.chessSet3),config.playerInfo.usingChesses[3]?this.setChessPic(this.chessSet4,config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[3]).level1Pic):this.setChessPic(this.chessSet4),config.playerInfo.usingChesses[4]?this.setChessPic(this.chessSet5,config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[4]).level1Pic):this.setChessPic(this.chessSet5)},setChessPic:function(e,t){e.getChildByName("chess").getChildByName("pic").getComponent(cc.Sprite).spriteFrame=t?config.warehouse.spriteFrame[t]:null},setChessButton:function(e){config.tools.addCallBackToButton(this.node,"mainCtrl","showChessSelection",null,e.getChildByName("chess"))},showChessSelection:function(){config.UICtrl.addUI("chessSelection",this.other)}}),cc._RF.pop()},{}],masterDealer:[function(e,t){"use strict";cc._RF.push(t,"7c778ajAnhDJqQuoZevlrys","masterDealer"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){switch(this.playerData=this.node.getChildByName("player").getComponent("playerData"),this.enemyData=this.node.getChildByName("enemy").getComponent("enemyData"),this.board=this.node.getChildByName("boardLayer").getComponent("boardLayerCtrl"),config.playerInfo.usingMaster){case 4e4:this.init40000();break;case 40002:this.init40002();break;case 40003:this.init40003()}},init40000:function(){var e=this,t=config.gameInfo.masterData;config.eventDelegate.addEvent("\u4f7f\u7528\u6280\u80fd",function(){var t=cc.instantiate(config.warehouse.prefabList.chooseChess);e.node.getChildByName("effect").addChild(t),t.getComponent("chooseChessCtrl").setMaskSize(350,250),t.getComponent("chooseChessCtrl").setMaskPosition(0,-150),t.getComponent("chooseChessCtrl").requireNum=1}),config.eventDelegate.addEvent("\u68c0\u67e5\u68cb\u5b50",function(e){1!=e.detail.level&&2!=e.detail.level||config.eventDelegate.dispatchEvent("\u9009\u62e9\u68cb\u5b50",e.detail)}),config.eventDelegate.addEvent("\u9009\u62e9\u68cb\u5b50\u5b8c\u6bd5",function(e){for(var t=e.detail,n=0;n<t.length;n++)t[n].level+=1,t[n].setPic(t[n].getChessPic());config.UICtrl.getUIComponent("game").usingSkill=!1,config.UICtrl.getUIComponent("boardLayer").setControlMode(1)}),config.eventDelegate.addEvent("\u68cb\u5b50\u6d88\u9664",function(n){n.detail.level>1&&e.playerData.changeEnergy(t.passiveSkillData[0])})},init40002:function(){var e=this,t=config.gameInfo.masterData,n=t.activeSkillData,i=t.passiveSkillData;this.playerData.hurtFix-=i[0],config.eventDelegate.addEvent("\u4f7f\u7528\u6280\u80fd",function(){e.playerData.addBuff(n[0],n[1]),config.UICtrl.getUIComponent("game").usingSkill=!1}),config.eventDelegate.addEvent()},init40003:function(){var e=this,t=config.gameInfo.masterData,n=t.activeSkillData,i=t.passiveSkillData;config.eventDelegate.addEvent("\u4f7f\u7528\u6280\u80fd",function(){for(var t=0;t<n[0];t++){var i=e.playerData.getMasterATK();e.enemyData.getAttack(n[1]/100*i),config.UICtrl.getUIComponent("game").usingSkill=!1,config.UICtrl.getUIComponent("game").checkGameResult()}}),config.eventDelegate.addEvent("\u654c\u4eba\u53d7\u5230\u4f24\u5bb3",function(){e.playerData.addBuff(i[0],i[1])})}}),cc._RF.pop()},{}],masterItemCtrl:[function(e,t){"use strict";cc._RF.push(t,"2fdccb+d7tGbqmQNYcmjK57","masterItemCtrl"),cc.Class({extends:cc.Component,properties:{id:0,data:null},onLoad:function(){config.tools.addCallBackToButton(this.node,"masterItemCtrl","check",null,this.node)},setData:function(e,t){this.id=e,this.data=t},check:function(){config.UICtrl.getUIComponent("masterSelection").refreshInfo(this.data)},unlock:function(){this.refreshLevel(this.data.name)},lock:function(){this.refreshLevel("\u672a\u89e3\u9501")},refreshLevel:function(e){this.node.getChildByName("level").getComponent(cc.Label).string=e}}),cc._RF.pop()},{}],masterSelectionCtrl:[function(e,t){"use strict";cc._RF.push(t,"90e8cSwlgdAv5VOlu8Bjpvv","masterSelectionCtrl"),cc.Class({extends:e("./otherUIBase"),properties:{checkID:0},onLoad:function(){this.content=this.node.getChildByName("content"),this.leave=this.content.getChildByName("leave"),this.select=this.content.getChildByName("select"),this.levelUp=this.content.getChildByName("levelUp"),this.container=this.content.getChildByName("container"),this.info=this.content.getChildByName("info"),this.skillIntro=this.info.getChildByName("skillIntro"),this.activeSkill=this.skillIntro.getChildByName("activeSkill"),this.passiveSkill=this.skillIntro.getChildByName("passiveSkill"),config.tools.addCallBackToButton(this.node,"masterSelectionCtrl","leaveUI",null,this.leave),config.tools.addCallBackToButton(this.node,"masterSelectionCtrl","selectMaster",null,this.select),config.tools.addCallBackToButton(this.node,"masterSelectionCtrl","levelUpMaster",null,this.levelUp),this.initContent()},start:function(){},onEnable:function(){this.refreshContent()},initContent:function(){var e=config.warehouse.json.masterData,t=config.playerInfo.usingMaster;this.checkingID=t;for(var n=0;n<e.length;n++){var i=cc.instantiate(config.warehouse.prefabList.masterItem);this.container.getChildByName("view").getChildByName("content").addChild(i),i.getComponent("masterItemCtrl").setData(e[n].id,e[n]),e[n].id==t&&this.refreshInfo(e[n])}},refreshContent:function(){for(var e=this.container.getChildByName("view").getChildByName("content").children,t=0;t<e.length;t++)config.tools.ownMaster(e[t].getComponent("masterItemCtrl").id)?e[t].getComponent("masterItemCtrl").unlock():e[t].getComponent("masterItemCtrl").lock()},levelUpMaster:function(){config.playerInfo.chessLevel[this.checkID+""]+=1},selectMaster:function(){config.playerInfo.usingMaster=this.checkingID,config.UICtrl.getUIComponent("main").refreshMasterPreview()},leaveUI:function(){this.cancel()},refreshInfo:function(e){this.checkingID=e.id,this.info.getChildByName("name").getComponent(cc.Label).string=e.name,this.activeSkill.getChildByName("disc").getComponent(cc.Label).string=e.activeSkillIntro,this.passiveSkill.getChildByName("disc").getComponent(cc.Label).string=e.passiveSkillIntro,e.pic?this.info.getChildByName("pic").getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[e.pic]:this.info.getChildByName("pic").getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=null}}),cc._RF.pop()},{"./otherUIBase":"otherUIBase"}],notificationCenter:[function(e,t){"use strict";cc._RF.push(t,"f5f695ONeBEwoNByVe5Eg0e","notificationCenter");var n=new cc.EventTarget;t.exports=n,cc._RF.pop()},{}],objectPool:[function(e,t){"use strict";cc._RF.push(t,"21f9fai0cNFZ6LLsDXPM5Vs","objectPool"),t.exports={poolList:{},creatNewPool:function(e){this.poolList[e]?this.poolList[e].clear():this.poolList[e]=new cc.NodePool},clearPool:function(e){this.poolList[e]&&this.poolList[e].clear()},get:function(e){if(this.poolList[e])return this.poolList[e].size()>0?this.poolList[e].get():null},put:function(e,t){this.poolList[e]&&this.poolList[e].put(t)},checkSize:function(e,t){return this.poolList[e].size()>=t}},cc._RF.pop()},{}],otherUIBase:[function(e,t){"use strict";cc._RF.push(t,"45fa1wVs8pDJbn79DgLCoes","otherUIBase"),cc.Class({extends:cc.Component,properties:{opening:!0},onLoad:function(){},onEnable:function(){this.playOutAnim()},playOutAnim:function(){var e=this;this.node.getChildByName("content").scale=.54,this.node.getChildByName("content").opacity=100,cc.tween(this.node.getChildByName("content")).to(.75,{opacity:255,scale:1},{easing:"backInOut"}).call(function(){e.opening=!1}).start()},cancel:function(){this.node.active=!1},onDestroy:function(){config.UICtrl.removeUI(this.node.name)}}),cc._RF.pop()},{}],passSelectCtrl:[function(e,t){"use strict";cc._RF.push(t,"3e5765dpoJHorlwi2tEFqjt","passSelectCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=config.warehouse.json.passBaseData;this.total=e.length,this.refreshPassName(),config.tools.addCallBackToButton(this.node,"passSelectCtrl","nextPass",null,this.node.getChildByName("next")),config.tools.addCallBackToButton(this.node,"passSelectCtrl","lastPass",null,this.node.getChildByName("last"))},refreshPassName:function(){var e=config.warehouse.json.passBaseData,t=e[config.UIInfo.currentPass].passName;this.node.getChildByName("passName").getComponent(cc.Label).string=t,config.passInfo=e[config.UIInfo.currentPass]},nextPass:function(){config.UIInfo.currentPass<this.total-1&&config.UIInfo.currentPass++,this.refreshPassName()},lastPass:function(){config.UIInfo.currentPass>0&&config.UIInfo.currentPass--,this.refreshPassName()}}),cc._RF.pop()},{}],playerData:[function(e,t){"use strict";cc._RF.push(t,"5fca7N1eVpFEIgIKmdqqTHp","playerData"),cc.Class({extends:cc.Component,properties:{currentHP:0,MaxHP:0,shield:0,hurtFix:0,energy:0,MaxEnergy:0,buffList:[],countATKFix:0,ATKFix:0,chess0energyFix:0,chess1energyFix:0,chess2energyFix:0,chess3energyFix:0,chess4energyFix:0,chess0shieldFix:0,chess1shieldFix:0,chess2shieldFix:0,chess3shieldFix:0,chess4shieldFix:0,chess0healFix:0,chess1healFix:0,chess2healFix:0,chess3healFix:0,chess4healFix:0,chess0ATKFix:0,chess1ATKFix:0,chess2ATKFix:0,chess3ATKFix:0,chess4ATKFix:0,metalATKFix:0,woodATKFix:0,waterATKFix:0,fireATKFix:0,soilATKFix:0,CSFix:0,chess0CSFix:0,chess1CSFix:0,chess2CSFix:0,chess3CSFix:0,chess4CSFix:0,CSDFix:0,chess0CSDFix:0,chess1CSDFix:0,chess2CSDFix:0,chess3CSDFix:0,chess4CSDFix:0},addBuff:function(e,t){for(var n=0;n<this.buffList.length;n++)if(this.buffList[n].component.id==e)return void this.buffList[n].component.countChange(t);var i=config.tools.getBuffDataByID(e),o=this.UI.addBuff(i.script);o.component.onInitData(e,t,i,this),this.buffList.push(o)},removeBuff:function(e){for(var t=0;t<this.buffList.length;t++)this.buffList[t].component.id==e&&(this.buffList[t].ui.destroy(),this.buffList.splice(t,1))},checkBuffList:function(e){switch(e){case"turnBegin":for(var t=0;t<this.buffList.length;t++)this.buffList[t].component.onRefresh(),this.buffList[t].component.onTurnBegin();break;case"turnEnd":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onTurnEnd(),this.buffList[t].component.nextStage();break;case"getATK":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onAttack();break;case"getAttack":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onGetHurt();break;case"remove":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onRemove()}},getMasterATK:function(){var e=this.getBaseATK(config.gameInfo.chessData[0]),t=this.getBaseATK(config.gameInfo.chessData[1]),n=this.getBaseATK(config.gameInfo.chessData[2]),i=this.getBaseATK(config.gameInfo.chessData[3]),o=this.getBaseATK(config.gameInfo.chessData[4]);return Math.floor((e+t+n+i+o)/5)},getATK:function(e){var t=e[0],n=e[1],i=this.getBaseATK(t)*((100+this.ATKFix+this.getATKFixBySet(n))/100);100*Math.random()<=this.CSFix+this.getCSFixBySet(n)&&(console.log("\u66b4\u51fb"),i*=(200+this.CSDFix+this.getCSDFixBySet(n))/100);var o=this.elementCounter(e[0].element);return o>0?i*=1.5:o<0&&(i*=.5),this.checkBuffList("getATK"),i},getBaseATK:function(e){var t=this.getChessLevelById(e.id),n=e.attack;return n.basic+Math.pow(t,n.levelBasic)+t},getChessLevelById:function(e){return config.playerInfo.chessLevel[e]},getATKFixBySet:function(e){switch(e){case 0:return this.chess0ATKFix;case 1:return this.chess1ATKFix;case 2:return this.chess2ATKFix;case 3:return this.chess3ATKFix;case 4:return this.chess4ATKFix}},getCSFixBySet:function(e){switch(e){case 0:return this.chess0CSFix;case 1:return this.chess1CSFix;case 2:return this.chess2CSFix;case 3:return this.chess3CSFix;case 4:return this.chess4CSFix}},getCSDFixBySet:function(e){switch(e){case 0:return this.chess0CSDFix;case 1:return this.chess1CSDFix;case 2:return this.chess2CSDFix;case 3:return this.chess3CSDFix;case 4:return this.chess4CSDFix}},elementCounter:function(e){var t=this.enemyData.elementType;return 0==e&&1==t?1:1==e&&0==t?-1:1==e&&2==t?1:2==e&&1==t?-1:2==e&&3==t?1:3==e&&2==t?-1:3==e&&4==t?1:4==e&&3==t?-1:4==e&&0==t?1:0==e&&4==t?-1:0},getAttack:function(e){e*=(100+this.hurtFix)/100,this.checkBuffList("getAttack"),this.shield>0&&(this.shield>e?(this.shield-=e,e=0):(e-=this.shield,this.shield=0)),this.UI.refreshShield(),this.currentHP-=Math.floor(e),this.UI.refreshLife()},getHeal:function(e){this.currentHP+=e,this.currentHP>=this.MaxHP&&(this.currentHP=this.MaxHP),this.UI.refreshLife()},getShield:function(e){this.shield+=e,this.shield>=this.MaxHP&&(this.shield=this.MaxHP),this.UI.refreshShield()},changeEnergy:function(e){this.energy+=e,this.energy>this.MaxEnergy?this.energy=this.MaxEnergy:this.energy<0&&(this.energy=0),this.energy>=this.MaxEnergy?this.UI.remindSkill(!0):this.UI.remindSkill(!1),this.UI.refreshEnergy()},checkEnergy:function(e){return e<=this.energy},onLoad:function(){this.UI=this.node.getComponent("playerUICtrl"),this.enemyData=this.node.parent.getChildByName("enemy").getComponent("enemyData")}}),cc._RF.pop()},{}],playerInfoManager:[function(e,t){"use strict";cc._RF.push(t,"94557cBcylGGIGN/bhNvA1U","playerInfoManager"),t.exports={changeFragment:function(e,t){config.playerInfo.chessFragmentProgress[e]-=t,config.playerInfo.chessFragmentProgress[e]<0&&(config.playerInfo.chessFragmentProgress[e]=0)},getChessFragments:function(e){var t=config.playerInfo.chessFragmentProgress;return t[e]?t[e]:null},getChessLevel:function(e){var t=config.playerInfo.chessLevel[e];if(!t)return null;var n=this.getBaseChessDataByID(e);return n&&(0==n.rarity||(1==n.rarity?t+=2:3==n.rarity&&(t+=4))),t},getLevelUpRequire:function(e){if(!this.checkOwnedChess(e))return 3;var t=config.playerInfo.chessLevel[e];return t<1?5:t<2?10:t<3?15:t<4?20:20*(t-2)},checkOwnedChess:function(e){for(var t=config.playerInfo.ownedChess,n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},addFragment:function(e,t){config.playerInfo.chessFragmentProgress[e]?config.playerInfo.chessFragmentProgress[e]+=t:config.playerInfo.chessFragmentProgress[e]=t,config.playerInfo.chessLevel[e]||(config.playerInfo.chessLevel[e]=0)},getBaseChessDataByID:function(e){for(var t=config.warehouse.json.chessBaseData,n=0;n<t.length;n++)if(t[n].id==e)return t[n];return null},addOwnedChess:function(e){return!this.checkOwnedChess(e)&&(config.playerInfo.ownedChess.push(e),!0)},getBottomEffectData:function(e){for(var t=config.warehouse.json.bottomEffectData,n=0;n<t.length;n++)if(t[n].id==e)return t[n];return null}},cc._RF.pop()},{}],playerUICtrl:[function(e,t){"use strict";cc._RF.push(t,"dfca7dWFBdF+7kcngSb+GBo","playerUICtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){config.UICtrl.UIList.playerUI=this.node,this.playerData=this.node.getComponent("playerData"),this.life=this.node.getChildByName("life"),this.lifeNum=this.life.getChildByName("num"),this.energy=this.node.getChildByName("energy"),this.energyNum=this.energy.getChildByName("num"),this.skillButton=this.node.getChildByName("skillButton"),this.buffList=this.node.getChildByName("buffList"),this.shield=this.life.getChildByName("shield"),this.shieldNum=this.shield.getChildByName("num"),config.tools.addCallBackToButton(this.node,"playerUICtrl","useSkill",null,this.skillButton.getChildByName("button"))},remindSkill:function(e){this.skillButton.getChildByName("button").getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=e?"\u53ef\u4f7f\u7528":"\u4e0d\u53ef\u4f7f\u7528"},useSkill:function(){if(!config.UICtrl.getUIComponent("game").usingSkill){var e=config.gameInfo.masterData;this.playerData.checkEnergy(e.activeSkillEnergyCost)&&(config.UICtrl.getUIComponent("game").usingSkill=!0,this.playerData.changeEnergy(-1*e.activeSkillEnergyCost),config.eventDelegate.dispatchEvent("\u4f7f\u7528\u6280\u80fd"))}},refreshUI:function(){this.refreshLife(),this.refreshEnergy()},refreshShield:function(){this.playerData.shield>0?this.shieldNum.getComponent(cc.Label).string="\u62a4\u76fe:"+this.playerData.shield:this.shieldNum.getComponent(cc.Label).string="",this.shield.getComponent(cc.ProgressBar).progress=this.playerData.shield/this.playerData.MaxHP},refreshLife:function(){this.life.getComponent(cc.ProgressBar).progress=this.playerData.currentHP/this.playerData.MaxHP,this.lifeNum.getComponent(cc.Label).string="\u751f\u547d\u503c:"+this.playerData.currentHP},refreshEnergy:function(){this.energy.getComponent(cc.ProgressBar).progress=this.playerData.energy/this.playerData.MaxEnergy,this.energyNum.getComponent(cc.Label).string="\u80fd\u91cf:"+this.playerData.energy},addBuff:function(e){var t=cc.instantiate(config.warehouse.prefabList.buff);return this.buffList.addChild(t),t.addComponent(e),{ui:t,component:t.getComponent(e)}}}),cc._RF.pop()},{}],protect:[function(e,t){"use strict";cc._RF.push(t,"97eb1bMp85PR7aSshSN8dOF","protect"),cc.Class({extends:e("./buffBase"),properties:{}}),cc._RF.pop()},{"./buffBase":"buffBase"}],randomResultCreator:[function(e,t){"use strict";cc._RF.push(t,"afe68hOqztHKLpHisuaGTw6","randomResultCreator"),t.exports={resultPool:{},creatPool:function(e){this.resultPool[e]?this.cleanPool(e):this.resultPool[e]={}},getNormalNum:function(e,t){return e+this.creatNormalNum()*t},getRandomNum:function(e,t){return e+Math.random()*(t-e)},creatNormalNum:function(){var e=0,t=0,n=0;do{n=(e=2*Math.random()-1)*e+(t=2*Math.random()-1)*t}while(0==n||n>=1);return e*Math.sqrt(-2*Math.log(n)/n)},addResult:function(e,t,n){this.resultPool[n]?this.resultPool[n][e]=t:(this.creatPool(n),this.resultPool[n][e]=t)},removeResult:function(){},cleanPool:function(e){this.resultPool[e]={}},cleanResultPool:function(){this.resultPool={}},getResult:function(e){var t=0;for(var n in this.resultPool[e])t+=this.resultPool[e][n];var i=Math.floor(Math.random()*(t+1));for(var o in t=0,this.resultPool[e])if(i<=(t+=this.resultPool[e][o]))return o}},cc._RF.pop()},{}],rush:[function(e,t){"use strict";cc._RF.push(t,"3542bQjvF5A+6ghDleaWJRr","rush"),cc.Class({extends:e("./buffBase"),properties:{},start:function(){}}),cc._RF.pop()},{"./buffBase":"buffBase"}],saver:[function(e,t){"use strict";cc._RF.push(t,"b2ffbhpqARJToTeCxVK3VEF","saver"),t.exports={hasData:function(e){return"undefined"==typeof wx?!!cc.sys.localStorage.getItem(e):!!this.getData(e)},getData:function(e){if("undefined"==typeof wx)return JSON.parse(cc.sys.localStorage.getItem(e));var t=wx.getStorageSync(e);return t?JSON.parse(t):null},storageData:function(e,t){"undefined"==typeof wx?cc.sys.localStorage.setItem(e,JSON.stringify(t)):wx.setStorage({key:e,data:JSON.stringify(t),success:function(){}})},reviseData:function(e,t){config.playerInfo[e]=t,this.storageData("playerInfo",config.playerInfo)},deleteData:function(e){"undefined"==typeof wx?cc.sys.localStorage.removeItem(e):wx.removeStorage({key:e,success:function(){}})},initData:function(){this.storageData("playerInfo",config.playerInfo)},refreshHighestMoney:function(e){e>config.playerInfo.highestMoneyToday&&this.reviseData("highestMoneyToday",e)},refreshFastestStepToday:function(e){e>config.playerInfo.lowestStepToday&&this.reviseData("lowestStepToday",e)},refreshFastestTimeToday:function(e){e>config.playerInfo.fastestTimeToday&&this.reviseData("fastestTimeToday",e)},checkFirstLunchToday:function(){if(config.playerInfo.lastLunchDate){var e=config.tools.compareTime(config.playerInfo.lastLunchDate,config.tools.getGameTime());return!(!e||e.year&&e.month&&e.date)}return!0},noteLunchDate:function(){config.playerInfo.lastLunchDate=config.tools.getGameTime(),this.initData()},noteCreatAccountDate:function(){config.playerInfo.creatAccountDate=config.tools.getGameTime(),this.initData()},checkSaverVersion:function(e){return!!e.saverVersion&&e.saverVersion==config.playerInfo.saverVersion},transferSaver:function(e){for(var t in e)if(Object.hasOwnProperty.call(e,t)){var n=e[t];config.playerInfo[t]=n}}},cc._RF.pop()},{}],shopLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"5065aWttyZGKZC+GPEODna3","shopLayerCtrl"),cc.Class({extends:e("otherUIBase"),properties:{},onLoad:function(){this.content=this.node.getChildByName("content"),this.leave=this.content.getChildByName("cancel"),config.tools.addCallBackToButton(this.node,"shopLayerCtrl","close",null,this.leave)},close:function(){this.cancel()}}),cc._RF.pop()},{otherUIBase:"otherUIBase"}],shuraPower:[function(e,t){"use strict";cc._RF.push(t,"5866efQ8aFIqagHWUP4WvOO","shuraPower"),cc.Class({extends:e("./buffBase"),properties:{}}),cc._RF.pop()},{"./buffBase":"buffBase"}],tools:[function(e,t){"use strict";cc._RF.push(t,"8d3c4hM3utJF7+RduHh+EUr","tools"),t.exports={addCallBackToButton:function(e,t,n,i,o){var s=new cc.Component.EventHandler;s.target=e,s.component=t,s.handler=n,s.customEventData=i;var a=o.getComponent(cc.Button);a||(a=o.addComponent(cc.Button)),a.clickEvents.push(s)},cleanButtonCall:function(e){var t=e.getComponent(cc.Button);t&&(t.clickEvents=[])},addAnimationToNode:function(e,t,n,i,o){var s=e.getComponent(cc.Animation);s||(s=e.addComponent(cc.Animation));var a=cc.AnimationClip.createWithSpriteFrames(t,t.length);return a.name=n,a.wrapMode=i,a.speed=o,s.addClip(a),s},checkRectInScreen:function(e){var t=cc.rect(0,0,cc.winSize.width,cc.winSize.height),n=e.getBoundingBoxToWorld();return t.intersects(n)},vibrationEffect:function(){config.playerInfo.shake&&(cc.sys.os===cc.sys.OS_IOS||(cc.sys.os,cc.sys.OS_ANDROID),"undefined"!=typeof wx&&wx.vibrateShort({type:"medium"}))},getDistance:function(e,t){var n=cc.v2(e.x-t.x,e.y-t.y);return Math.sqrt(n.x*n.x+n.y*n.y)},getAngle:function(e,t){var n=t.x-e.x,i=t.y-e.y;return-cc.v2(n,i).signAngle(cc.v2(1,0))/Math.PI*180},shrinkNum:function(e){return e>=999999?(e/1e6).toString().slice(0,4)+"M":e>=9999?(e/1e3).toString().slice(0,4)+"K":e},nodeShake:function(e,t,n){var i=t.x,o=t.y,s=n;cc.tween(e).to(.05,{position:cc.v2(i+s,o+s)}).to(.05,{position:cc.v2(i+s,o-s)}).to(.05,{position:cc.v2(i-s,o+s)}).to(.05,{position:cc.v2(i-s,o-s)}).to(.05,{position:cc.v2(i,o)}).start()},loadAtlas:function(e){cc.assetManager.loadBundle("atlas",function(t,n){if(t);else for(var i=0;i<e.length;i++)n.loadDir(e[i],cc.SpriteAtlas,function(e,t){if(e);else for(var n=0;n<t.length;n++){var i=t[n]instanceof cc.SpriteAtlas?t[n].name.slice(0,-6):t[n].name;t[n]instanceof cc.JsonAsset?config.warehouse.atlas[i]=t[n].json:config.warehouse.atlas[i]=t[n]}})})},transfromPositionOnWorld:function(e){return e.convertToWorldSpaceAR(cc.v2(0,0))},transformPositionOnNode:function(e,t){var n=t.convertToWorldSpaceAR(cc.v2(0,0));return e.convertToNodeSpaceAR(n)},checkMidnight:function(){config.lastClickPoint?(config.thisClickPoint=config.tools.getGameTime(),23==config.thisClickPoint.hour&&(config.thisClickPoint.minute>=58?config.UICtrl.findUI("transformLaterRemind")||config.UICtrl.addUI("transformLaterRemind",config.UICtrl.findUI("other")):config.thisClickPoint.minute>=55&&(config.UICtrl.findUI("transformRemind")||config.UICtrl.addUI("transformRemind",config.UICtrl.findUI("other")))),23==config.lastClickPoint.hour&&config.lastClickPoint.minute<=59&&config.lastClickPoint.second<=59&&config.thisClickPoint.hour<=1&&(config.UICtrl.findUI("timeRemind")||config.UICtrl.addUI("timeRemind",config.UICtrl.findUI("other"))),config.thisClickPoint&&(config.lastClickPoint=config.thisClickPoint)):(config.lastClickPoint=config.tools.getGameTime(),23==config.lastClickPoint.hour&&config.lastClickPoint.minute>=55&&(config.UICtrl.findUI("transformRemind")||config.UICtrl.addUI("transformRemind",config.UICtrl.findUI("other"))))},getGameTime:function(){var e=new Date;return{year:e.getFullYear().toString(),month:e.getMonth().toString(),date:e.getDate().toString(),second:e.getSeconds().toString(),minute:e.getMinutes().toString(),hour:e.getHours().toString()}},getChessPic:function(e){"blue"==e&&(e="orange");var t=e+""+config.currentDate;return config.warehouse.spriteFrame[t]},checkDate:function(){var e=(new Date).getDay();config.currentDate=e},compareTime:function(e,t){var n={year:!1,month:!1,date:!1,hour:!1,minute:!1,second:!1};return e.year==t.year&&(n.year=!0),e.month==t.month&&(n.month=!0),e.date==t.date&&(n.date=!0),e.hour==t.hour&&(n.hour=!0),e.minute==t.minute&&(n.minute=!0),e.second==t.second&&(n.second=!0),n},loadAvatarPicOnKs:function(e){cc.loader.load({url:e,type:"png"},function(e,t){e&&console.error(e),config.avatarPic=t})},loadAvatarPic:function(e){cc.loader.load({url:e+"?aaa=aa.jpg ",type:"jpg"},function(e,t){e&&console.error(e),config.avatarPic=t})},addAvatar:function(e){e.getChildByName("mask").getChildByName("pic").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(config.avatarPic)},downloadAvatar:function(e,t){cc.loader.load({url:t+"?aaa=aa.jpg ",type:"jpg"},function(t,n){t&&console.error(t),e.getChildByName("mask").getChildByName("pic").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n)})},downloadAvatarOnKS:function(e,t){cc.loader.load({url:t,type:"png"},function(t,n){t&&console.error(t),e.getChildByName("mask").getChildByName("pic").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n)})},findBestPlayer:function(){if(config.dailyRank){var e=null;"undefined"==typeof wx||(e="undefined"==typeof KSGameGlobal?config.dailyRank.result.list.data:config.dailyRank);for(var t=e[0],n=0;n<e.length;n++)e[n].score>t.score&&(t=e[n]);return t}return null},findFastestPlayer:function(){if(config.dailyRank){var e=null;"undefined"==typeof wx||(e="undefined"==typeof KSGameGlobal?config.dailyRank.result.list.data:config.dailyRank);for(var t=null,n=0;n<e.length;n++)e[n].score>=1e4&&(t?parseInt(e[n].userinfo.loweststeptoday)<parseInt(t.userinfo.loweststeptoday)&&(t=e[n]):t=e[n]);return t}return null},findEarliestPlayer:function(){if(config.dailyRank){var e=null;if("undefined"==typeof wx||(e="undefined"==typeof KSGameGlobal?config.dailyRank.result.list.data:config.dailyRank),e.length<=0)return null;var t=e[0];if(t)for(var n=0;n<e.length;n++)e[n].userinfo.firstpasstoday&&(parseInt(t.userinfo.firstpasstoday.hour)>parseInt(e[n].userinfo.firstpasstoday.hour)?t=e[n]:parseInt(t.userinfo.firstpasstoday.hour)==parseInt(e[n].userinfo.firstpasstoday.hour)&&(parseInt(t.userinfo.firstpasstoday.minute)>parseInt(e[n].userinfo.firstpasstoday.minute)?t=e[n]:parseInt(t.userinfo.firstpasstoday.minute)==parseInt(e[n].userinfo.firstpasstoday.minute)&&parseInt(t.userinfo.firstpasstoday.second)>parseInt(e[n].userinfo.firstpasstoday.second)&&(t=e[n])));return t.userinfo.firstpasstoday?t:null}return null},getSomePlayers:function(e,t){var n=[];function i(e){for(var t=0;t<n.length;t++)if(n[t]==e)return!0;return!1}if(t.length>e)for(;n.length<e;){var o=Math.floor(Math.random()*t.length);t[o].openid!=config.accountInfo.openID&&(i(t[o].openid)||n.push(t[o].userinfo.openid))}else for(var s=0;s<t.length;s++)t[s].userinfo.openid!=config.accountInfo.openID&&n.push(t[s].userinfo.openid);return n},totalCollected:function(){for(var e=0,t=config.playerInfo.unlockedSkin,n=0;n<=config.totalSkin;n++)for(var i=0;i<t.length;i++)if(t[i]=="s"+n){e++;break}return e==config.totalSkin+1},checkSkinChipCollection:function(){function e(e){for(var t=0;t<config.playerInfo.unlockedSkin.length;t++)if(e==config.playerInfo.unlockedSkin[t])return!0;return!1}for(var t in config.playerInfo.skinFragmentProgress)config.playerInfo.skinFragmentProgress[t]>=10&&(e(t)?(config.playerInfo.starNum+=5,config.UICtrl.getUIComponent("starNum").refreshNum()):config.playerInfo.unlockedSkin.push(t))},getBaseChessDataByID:function(e){for(var t=config.warehouse.json.chessBaseData,n=0;n<t.length;n++)if(t[n].id==e)return t[n];return null},getBuffDataByID:function(e){for(var t=config.warehouse.json.buffData,n=0;n<t.length;n++)if(t[n].id==e)return t[n]},getChessEffectByLevel:function(e,t){if(e){var n,i=config.warehouse.json.chessEffectData;n=t<3?e["1levelDataID"]:t<5?e["3levelDataID"]:t<10?e["5levelDataID"]:t<15?e["10levelDataID"]:e["15levelDataID"];for(var o=0;o<i.length;o++)if(i[o].id==n)return i[o]}return null},getChessIndex:function(e,t){for(var n=0;n<t.length;n++)for(var i=0;i<t[0].length;i++)if(t[n][i].bottom==e||t[n][i].middle==e)return t[n][i].index},ownMaster:function(e){for(var t=config.playerInfo.ownedMaster,n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}},cc._RF.pop()},{}],trackingFlyingSword:[function(e,t){"use strict";cc._RF.push(t,"ad4de1vWKZBF743UBs4gPzv","trackingFlyingSword"),cc.Class({extends:e("./buffBase"),properties:{}}),cc._RF.pop()},{"./buffBase":"buffBase"}],warehouse:[function(e,t){"use strict";cc._RF.push(t,"99bd8oW6gFN2aCxT2y7LAns","warehouse"),t.exports={json:{},prefabList:{},spriteFrame:{},SkeletonData:{}},cc._RF.pop()},{}],wxtools:[function(e,t){"use strict";cc._RF.push(t,"f3111CzMfNMkbYdgFzlDTzw","wxtools"),t.exports={initUserInfoButton:function(){var e=this;if("undefined"!=typeof wx){var t=wx.getSystemInfoSync(),n=t.windowWidth,i=t.windowHeight,o=wx.createImage();o.src="wxLocal/login_button.png";var s=wx.createUserInfoButton({type:"image",image:o.src,style:{left:n/2-86.67,top:.74*i,width:173.34,height:68.04}});s.onTap(function(){config.UICtrl.getUIComponent("loading").pushed||wx.requirePrivacyAuthorize({success:function(){e.info(),s.hide(),s.destroy(),config.UICtrl.getUIComponent("loading").pushed=!0,config.tools.vibrationEffect(),config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1),config.wxTools.gameBeginInLoading()},fail:function(){wx.exitMiniProgram({success:function(){console.log("\u79bb\u5f00\u6e38\u620f")},fail:function(){console.log("\u79bb\u5f00\u6e38\u620f\u5931\u8d25")},complete:function(){console.log("\u8c03\u7528\u79bb\u5f00\u5b8c\u6210")}})}})})}},info:function(){wx.getUserInfo({success:function(e){var t=e.userInfo;config.tools.loadAvatarPic(t.avatarUrl),config.accountInfo.nickName=t.nickName,config.accountInfo.avatarlUrl=t.avatarUrl,wx.login({success:function(e){var t=e.code;wx.cloud.init({env:"cloud1-8gsd9cxlbfb94be6"}),wx.cloud.callFunction({name:"helloCloud",data:{message:t}}).then(function(e){config.accountInfo.openID=e.result.openid,config.UICtrl.getUIComponent("loading").lunched=!0,config.wxTools.checkCloudSaver()})}})}})},checkCloudSaver:function(){wx.cloud.callFunction({name:"checkCloud"}).then(function(e){e.result.res&&e.result.res.userinfo?(config.wxTools.downloadCloudSaver(e.result.res.userinfo),config.wxTools.checkCloudFirstEnter(),config.UICtrl.getUIComponent("cutting").cutToScene("game")):config.wxTools.creatSaver()},function(){config.wxTools.creatSaver()})},creatSaver:function(){config.saver.noteCreatAccountDate(),config.wxTools.translatePlayerInfo(),config.wxTools.updateCloudSaver(),config.UICtrl.getUIComponent("cutting").cutToScene("game")},translatePlayerInfo:function(){config.cloudPlayerSaver.avatarlUrl=config.accountInfo.avatarlUrl,config.cloudPlayerSaver.usingSkin=config.playerInfo.usingSkin,config.cloudPlayerSaver.unlockedSkin=config.playerInfo.unlockedSkin,config.cloudPlayerSaver.firstLunchToday=config.playerInfo.lastLunchDate,config.cloudPlayerSaver.UID=config.accountInfo.openID,config.cloudPlayerSaver.nickName=config.accountInfo.nickName,config.cloudPlayerSaver.province=config.playerInfo.province,config.cloudPlayerSaver.cowNum=config.playerInfo.passedTime,config.cloudPlayerSaver.starNum=config.playerInfo.starNum,config.cloudPlayerSaver.passNumToday=config.playerInfo.data4,config.cloudPlayerSaver.highestMoneyToday=config.playerInfo.highestMoneyToday,config.cloudPlayerSaver.lowestStepToday=config.playerInfo.lowestStepToday,config.cloudPlayerSaver.firstPassTimeToday=config.playerInfo.firstPassToday,config.cloudPlayerSaver.creatAccountDate=config.playerInfo.creatAccountDate,config.cloudPlayerSaver.firstGame=config.playerInfo.firstGame,config.cloudPlayerSaver.historyHighestMoney=config.playerInfo.data3},creatCloudSaver:function(){config.cloudPlayerSaver.avatarUrl=config.accountInfo.avatarlUrl,config.cloudPlayerSaver.UID=config.accountInfo.openID,config.cloudPlayerSaver.nickName=config.accountInfo.nickName,config.cloudPlayerSaver.creatAccountDate=config.tools.getGameTime(),console.log(config.cloudPlayerSaver.creatAccountDate)},updateCloudSaver:function(){"undefined"!=typeof wx&&wx.cloud.callFunction({name:"updateCloud",data:{userinfo:config.cloudPlayerSaver}}).then(function(e){console.log(e)},function(){console.log("\u5931\u8d25")})},refreshCloudSaver:function(){config.wxTools.translatePlayerInfo(),config.wxTools.updateCloudSaver()},checkCloudFirstEnter:function(){config.saver.checkFirstLunchToday()?(console.log("\u662f\u4eca\u5929\u7b2c\u4e00\u6b21\u767b\u5f55"),config.playerInfo.highestMoneyToday=0,config.playerInfo.lowestStepToday=0,config.playerInfo.firstPassToday=null,config.playerInfo.currentPlayer=0,config.playerInfo.playTimesToday=0,config.playerInfo.data5=2,config.playerInfo.data4=0,console.log("\u5237\u65b0\u6bcf\u65e5\u6570\u636e")):console.log("\u4e0d\u662f\u4eca\u5929\u7b2c\u4e00\u6b21\u767b\u5f55"),config.saver.noteLunchDate(),config.wxTools.refreshCloudSaver()},downloadCloudSaver:function(e){config.accountInfo.UID=e.UID,config.accountInfo.avatarlUrl=e.avatarlUrl,config.accountInfo.nickName=e.nickName,config.playerInfo.creatAccountDate=e.creatAccountDate,config.playerInfo.firstGame=e.firstGame,config.playerInfo.lastLunchDate=e.firstLunchToday,config.playerInfo.highestMoneyToday=e.highestMoneyToday,config.playerInfo.lowestStepToday=e.lowestStepToday,config.playerInfo.data4=e.passNumToday,config.playerInfo.province=e.province,config.playerInfo.starNum=e.starNum,config.playerInfo.unlockedSkin=e.unlockedSkin,config.playerInfo.usingSkin=e.usingSkin,config.playerInfo.passedTime=e.cowNum,config.playerInfo.firstPassToday=e.firstPassTimeToday,config.playerInfo.data3=e.historyHighestMoney},updatePlayerInfo:function(e,t){wx.cloud.callFunction({name:"rank",data:{userinfo:t}}).then(function(){},function(){console.log("\u5931\u8d25")})},downloadRankInfo:function(){wx.cloud.callFunction({name:"getRank"}).then(function(){},function(){console.log("\u5931\u8d25")})},downloadDailyRankInfo:function(){wx.cloud.callFunction({name:"getDailyRank"}).then(function(e){config.dailyRank=e,config.dailyDone=!0},function(){console.log("\u4e0b\u8f7d\u6bcf\u65e5\u6392\u884c\u699c\u5931\u8d25"),config.dailyDone=!0})},downloadHistoryRankInfo:function(){wx.cloud.callFunction({name:"getHistoryRank"}).then(function(e){config.historyRank=e,config.historyDone=!0},function(){console.log("\u4e0b\u8f7d\u5386\u53f2\u6392\u884c\u699c\u5931\u8d25"),config.historyDone=!0})},downloadYesterdayRankInfo:function(){wx.cloud.callFunction({name:"getYesterdayRank"}).then(function(e){config.yesterdayRank=e,config.yesterdayDone=!0},function(){console.log("\u4e0b\u8f7d\u6628\u65e5\u6392\u884c\u699c\u5931\u8d25"),config.yesterdayDone=!0})},updateDailyRankInfo:function(e,t,n,i){"undefined"!=typeof wx&&wx.cloud.callFunction({name:"sendDailyRank",data:{scorenum:e,cownum:t,stepnum:n,userinfo:i}}).then(function(){},function(){console.log("\u4e0a\u4f20\u73a9\u5bb6\u6210\u7ee9\u5230\u6bcf\u65e5\u6392\u884c\u699c\u5931\u8d25")})},updateHistoryRankInfo:function(e,t,n,i){"undefined"!=typeof wx&&wx.cloud.callFunction({name:"sendHistoryRank",data:{scorenum:e,cownum:t,stepnum:n,userinfo:i}}).then(function(){},function(){console.log("\u4e0a\u4f20\u73a9\u5bb6\u6210\u7ee9\u5230\u5386\u53f2\u6392\u884c\u699c\u5931\u8d25")})},activeShare:function(){if("undefined"!=typeof wx){var e=Math.floor(4*Math.random()),t="",n="";0==e?(t="\u5b9a\u4e2a\u5c0f\u76ee\u6807\uff0c\u6323\u5b83\u4e00\u4e2a\u4ebf",n="wxLocal/0.png"):1==e?(t="\u4eca\u5929\u4f60\u6323\u5230\u4e00\u4e2a\u4ebf\u4e86\u5417",n="wxLocal/1.png"):2==e?(t="\u4eca\u5929\u662f\u725b\u5e02\uff0c\u8d76\u7d27\u6765\u51fa\u4ed3",n="wxLocal/2.png"):(t="\u8eba\u51fa\u4e00\u4e2a\u4ebf\uff0c\u4f60\u53ef\u4ee5",n="wxLocal/3.png"),wx.shareAppMessage({title:t,imageUrl:n})}},passiveShare:function(){wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]});var e=Math.floor(4*Math.random()),t="",n="";0==e?(t="\u5b9a\u4e2a\u5c0f\u76ee\u6807\uff0c\u6323\u5b83\u4e00\u4e2a\u4ebf",n="wxLocal/0.png"):1==e?(t="\u4eca\u5929\u4f60\u6323\u5230\u4e00\u4e2a\u4ebf\u4e86\u5417",n="wxLocal/1.png"):2==e?(t="\u4eca\u5929\u662f\u725b\u5e02\uff0c\u8d76\u7d27\u6765\u51fa\u4ed3",n="wxLocal/2.png"):(t="\u8eba\u51fa\u4e00\u4e2a\u4ebf\uff0c\u4f60\u53ef\u4ee5",n="wxLocal/3.png"),wx.onShareAppMessage(function(){return{title:t,imageUrl:n}})},creatGameClub:function(){if("undefined"!=typeof wx){var e=wx.getSystemInfoSync(),t=e.windowWidth,n=e.windowHeight,i=wx.createGameClubButton({type:"image",image:"wxLocal/\u6e38\u620f\u5708.png",icon:"green",style:{left:.815*t,top:.38*n,width:50.76,height:58.86}});config.UICtrl.UIList.GameClubButton=i}},showGameClub:function(){"undefined"!=typeof wx&&config.UICtrl.findUI("GameClubButton")&&config.UICtrl.UIList.GameClubButton.show()},hideGameClub:function(){"undefined"!=typeof wx&&config.UICtrl.findUI("GameClubButton")&&config.UICtrl.UIList.GameClubButton.hide()},cancelGameClub:function(){"undefined"!=typeof wx&&config.UICtrl.findUI("GameClubButton")&&(config.UICtrl.UIList.GameClubButton.destroy(),config.UICtrl.UIList.GameClubButton=null)},shareCanvas:function(){var e=this;if("undefined"!=typeof wx&&!this.clicked){this.clicked=!0;var t=canvas.toTempFilePathSync({x:0,y:canvas.height/5,fileType:"jpg",quality:"1"}),n=setInterval(function(){clearInterval(n),e.sharePic(t),e.clicked=!1},1e3)}},sharePic:function(e){clearInterval(this.sharePic),wx.shareAppMessage({imageUrl:e})},initAdv:function(){},showAdv:function(){},getPlayerNum:function(){},ADScene:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHs",branchDim:"",eventType:1})},ADSceneClick:function(){if("undefined"!=typeof wx){var e=cc.find("Canvas").getComponent("gameCtrl").stepCount;wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHs",branchDim:""+e,eventType:2})}},ADShow:function(){if("undefined"!=typeof wx){var e=cc.find("Canvas").getComponent("gameCtrl").stepCount;wx.createRewardedVideoAd().show({branchId:"BCBgAAoXHx5d0rCbeq-tHs",branchDim:""+e})}},leaveClickInTeach:function(){if("undefined"!=typeof wx&&config.playerInfo.firstGame){var e=cc.find("Canvas").getComponent("gameCtrl").stepCount;wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHq",branchDim:""+e,eventType:2})}},passSceneInTeach:function(){if("undefined"!=typeof wx&&config.playerInfo.firstGame){var e=cc.find("Canvas").getComponent("gameCtrl").stepCount;wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHr",branchDim:""+e,eventType:1})}},passClickInTeach:function(){if("undefined"!=typeof wx&&config.playerInfo.firstGame){var e=cc.find("Canvas").getComponent("gameCtrl").stepCount;wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHr",branchDim:""+e,eventType:2})}},assetsTeach:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH7",branchDim:"",eventType:1})},assetsTeachPoint:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH7",branchDim:"",eventType:2})},stepTeach:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH8",branchDim:"",eventType:1})},stepTeachPoint:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH8",branchDim:"",eventType:2})},sellTeach:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH9",branchDim:"",eventType:1})},sellTeachPoint:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH9",branchDim:"",eventType:2})},boardTeach:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH-",branchDim:"",eventType:1})},boardTeachPoint:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH-",branchDim:"",eventType:2})},priceBoard:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH_",branchDim:"",eventType:1})},priceBoardPoint:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH_",branchDim:"",eventType:2})},sceneBeforeGameBegin:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHt",branchDim:"",eventType:1})},gameBeginInRank:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHt",branchDim:""+config.playerInfo.playTimesToday,eventType:2})},leaveInRank:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH6",branchDim:"",eventType:2})},passStage1:function(){if("undefined"!=typeof wx){var e=config.UICtrl.getUIComponent("priceBoard").getAveragePrice();wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHu",branchDim:""+e,eventType:1})}},giveupStage1:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHj",branchDim:""+config.usedAD,eventType:2})},passStage2:function(){if("undefined"!=typeof wx){var e=config.UICtrl.getUIComponent("priceBoard").getAveragePrice();wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHv",branchDim:""+e,eventType:1})}},giveupStage2:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHk",branchDim:""+config.usedAD,eventType:2})},passStage3:function(){if("undefined"!=typeof wx){var e=config.UICtrl.getUIComponent("priceBoard").getAveragePrice();wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHg",branchDim:""+e,eventType:1})}},giveupStage3:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHi",branchDim:""+config.usedAD,eventType:2})},leaveInGame:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH5",branchDim:"",eventType:2})},backToRankInSettle:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHl",branchDim:""+config.playerInfo.playTimesToday,eventType:2})},replayInSettle:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHm",branchDim:""+config.playerInfo.playTimesToday,eventType:2})},gameBeginInLoading:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHn",branchDim:"",eventType:2})},leaveInLoading:function(){if("undefined"!=typeof wx){var e=Math.floor(cc.find("Canvas/New ProgressBar").getComponent(cc.ProgressBar).progress);wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH4",branchDim:""+e,eventType:2})}}},cc._RF.pop()},{}]},{},["Game","Helloworld","Player","baseBottomEffect","bottomWarning","buffBase","buffUICtrl","burn","frighten","ironBody","protect","rush","shuraPower","trackingFlyingSword","chooseChessCtrl","enemyUICtrl","leaveCtrl","playerUICtrl","baseData","baseEffectDealer","boardLayerCtrl","cellBase","buffDealer","chessDealer","enemyData","enemyDealer","gameCtrl","masterDealer","playerData","loadingCtrl","gameBeginCtrl","mainCtrl","passSelectCtrl","chessInfoCtrl","chessSelectionCtrl","gameStatementCtrl","masterSelectionCtrl","otherUIBase","boxLayerCtrl","boxOpenLayerCtrl","shopLayerCtrl","UICtrl","animCtrl","config","dj","effectCtrl","eventDelegate","kstools","notificationCenter","objectPool","playerInfoManager","randomResultCreator","saver","tools","warehouse","wxtools","chessItemCtrl","masterItemCtrl"]);