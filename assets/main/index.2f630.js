window.__require=function e(t,n,o){function i(s,c){if(!n[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){return i(t[s][1][e]||e)},f,f.exports,e,t,n,o)}return n[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({ATKDecline:[function(e,t){"use strict";cc._RF.push(t,"5a42aBFHeZIZLtlfsE1CEFJ","ATKDecline"),cc.Class({extends:e("buffBase"),properties:{},start:function(){}}),cc._RF.pop()},{buffBase:"buffBase"}],ActionShadow:[function(e,t,n){"use strict";cc._RF.push(t,"9f9fbYj9A5LdLy4ZYs19nSC","ActionShadow");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,r=s.property,l=s.executeInEditMode,f=s.playOnFocus,h=s.menu,g=function(){this.x=0,this.y=0,this.angle=0,this.scaleX=1,this.scaleY=1,this.scale=1,this.actionName="",this.frameTime=0},d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._active=!0,t._shadowNum=10,t._deltTime=4,t._shadowColor=cc.color(255,255,255),t._shadowScale=.1,t._opacity=100,t.nodeOpacity=255,t.model=null,t.shadowNode=null,t.shadowData=[],t}return i(t,e),Object.defineProperty(t.prototype,"active",{get:function(){return this._active},set:function(e){this._active=e,e?this.node.active&&this.shadowNode&&(this.shadowNode.active=!0,this.shadowData.length&&this.updateShadowData()):this.shadowNode.active=!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowNum",{get:function(){return this._shadowNum},set:function(e){this._shadowNum=Math.max(e,0),this.updateShadowNum(),this.updateDeltTime(),this.updateShadowData(),this.updateColor()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deltTime",{get:function(){return this._deltTime},set:function(e){this._deltTime=Math.max(e,1),this.updateDeltTime(),this.updateShadowData()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{get:function(){return this._shadowColor},set:function(e){this._shadowColor=e,this.updateColor()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowScale",{get:function(){return this._shadowScale},set:function(e){this._shadowScale=e,this.updateShadowData()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(e){this._opacity=e,this.updateOpacity()},enumerable:!1,configurable:!0}),t.prototype.start=function(){var e=this.node.name+"<ActionShadow>";this.shadowNode=this.node.parent.getChildByName(e),this.shadowNode||(this.shadowNode=new cc.Node(e),this.shadowNode.setParent(this.node.parent),this.shadowNode.setSiblingIndex(this.node.getSiblingIndex())),this.nodeOpacity=this.node.opacity,this.model=this.node.getComponent(cc.Animation),this.model&&(this.model.currentClip=this.model.defaultClip),this.node._updateWorldMatrix(),this.updateShadowNum(),this.updateDeltTime(),this.updateShadowData(),this.updateColor(),this.updateOpacity()},t.prototype.onEnable=function(){this.active&&this.shadowNode&&(this.shadowNode.active=!0,this.shadowData.length&&this.updateShadowData())},t.prototype.onDisable=function(){this.shadowNode.active=!1},t.prototype.update=function(){this.nodeOpacity!==this.node.opacity&&(this.nodeOpacity=this.node.opacity,this.updateOpacity());for(var e=this.shadowNum*this.deltTime;e>0;--e){var t=this.shadowData[e],n=this.shadowData[e-1];t.x=n.x,t.y=n.y,t.scaleX=n.scaleX,t.scaleY=n.scaleY,t.angle=n.angle,t.actionName=n.actionName,t.frameTime=n.frameTime}var o=this.shadowData[0],i=this.node._worldMatrix.m;for(o.x=i[12],o.y=i[13],o.scaleX=this.node.scaleX,o.scaleY=this.node.scaleY,o.angle=this.node.angle,null!==this.model&&(o.actionName=this.model.currentClip.name,o.frameTime=this.model.getAnimationState(o.actionName).time),this.shadowNode._updateWorldMatrix(),i=this.shadowNode._worldMatrix.m,e=this.shadowNum-1;e>=0;--e){var a=this.shadowNode.children[e];o=this.shadowData[this.deltTime*(e+1)],a.x=o.x-i[12],a.y=o.y-i[13],a.scaleX=o.scaleX*o.scale,a.scaleY=o.scaleY*o.scale,a.angle=o.angle;var s=a.getComponent(cc.Animation);null!==s&&s.play(o.actionName,o.frameTime)}},t.prototype.updateShadowNum=function(){this.shadowNode.removeAllChildren(),this.shadowNode.destroyAllChildren();for(var e=0,t=this.shadowNum;e<t;++e){var n=cc.instantiate(this.node);n.name=this.node.name+e;for(var o=n._components,i=o.length-1;i>=0;--i)o[i]instanceof cc.RenderComponent||o[i]instanceof cc.Animation||o[i].destroy();n.setParent(this.shadowNode)}},t.prototype.updateDeltTime=function(){this.shadowData=[];for(var e=this.shadowNum*this.deltTime;e>=0;--e)this.shadowData[e]=new g},t.prototype.updateShadowData=function(){for(var e=(1-this.shadowScale)/(this.shadowNum*this.deltTime),t=this.node._worldMatrix.m,n=this.shadowNum*this.deltTime;n>=0;--n){var o=this.shadowData[n];o.x=t[12],o.y=t[13],o.scaleX=this.node.scaleX,o.scaleY=this.node.scaleY,o.scale=1-n*e,o.angle=this.node.angle,null!==this.model&&(o.actionName=this.model.currentClip.name,o.frameTime=this.model.getAnimationState(o.actionName).time,this.model.play(o.actionName,o.frameTime))}},t.prototype.setColor=function(e,t){e.color=t;for(var n=e.childrenCount-1;n>=0;--n)this.setColor(e.children[n],t)},t.prototype.updateColor=function(){this.setColor(this.shadowNode,this.shadowColor)},t.prototype.updateOpacity=function(){this.shadowNode.opacity=this.opacity*this.node.opacity/255},t.prototype.onDestroy=function(){cc.isValid(this.shadowNode)&&(this.shadowNode.removeFromParent(),this.shadowNode.destroy())},a([r],t.prototype,"_active",void 0),a([r({displayName:!1,tooltip:!1})],t.prototype,"active",null),a([r()],t.prototype,"_shadowNum",void 0),a([r({type:cc.Integer,displayName:!1})],t.prototype,"shadowNum",null),a([r()],t.prototype,"_deltTime",void 0),a([r({type:cc.Integer,displayName:!1})],t.prototype,"deltTime",null),a([r()],t.prototype,"_shadowColor",void 0),a([r({displayName:!1})],t.prototype,"shadowColor",null),a([r()],t.prototype,"_shadowScale",void 0),a([r({min:0,max:1,step:.1,slide:!0,displayName:!1})],t.prototype,"shadowScale",null),a([r()],t.prototype,"_opacity",void 0),a([r({type:cc.Integer,min:0,max:255,slide:!0,displayName:!1})],t.prototype,"opacity",null),a([c,l,f,h("Comp/ActionShadow")],t)}(cc.Component);n.default=d,cc._RF.pop()},{}],CSUp:[function(e,t){"use strict";cc._RF.push(t,"f2fd6FVndhJ7ZKAPhcnO1qF","CSUp"),cc.Class({extends:e("buffBase"),properties:{},start:function(){}}),cc._RF.pop()},{buffBase:"buffBase"}],CanvasCtrl:[function(e,t){"use strict";cc._RF.push(t,"da9ca5N+3BIEIu958mB2b1E","CanvasCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.content=this.node.getChildByName("content"),this.bg=this.node.getChildByName("bg"),config.UICtrl.UIList.Canvas=this.node,config.UICtrl.UIList.content=this.content,this.initUI(),this.selectUI("main")},initUI:function(){config.UICtrl.addUI("playerInfo",cc.director.getScene()),config.UICtrl.addUI("resInfo",cc.director.getScene()),config.UICtrl.addUI("sceneMenu",cc.director.getScene()),config.UICtrl.addUI("other",cc.director.getScene())},selectUI:function(e){switch(e){case"main":config.dj.playMusic(config.warehouse.sound["NO.788 - \u50f5 \u5c38 \u5148 \u751f"],.25),config.UICtrl.addUI("main",this.content);break;case"masterSelection":config.dj.playMusic(config.warehouse.sound["Ha\u0308ruki - \u6bad \u5c4d \u5148 \u751f (1)"],1),config.UICtrl.addUI("masterSelection",this.content);break;case"shopLayer":config.dj.playMusic(config.warehouse.sound["\u5431\u5431\u5431\u5c0f\u5431 - \u3010\u94a2\u7434\u7248\u3011\u9b3c\u65b0\u5a18\uff08\u7535\u5f71\u300a\u50f5\u5c38\u5148\u751f\u300b\u6b4c\u66f2\uff09\u7684\u526f\u672c"],1),config.UICtrl.addUI("shopLayer",this.content);break;case"home":config.dj.playMusic(config.warehouse.sound["NO.788 - \u50f5 \u5c38 \u5148 \u751f"],.25),config.UICtrl.addUI("home",this.content);break;case"event":config.dj.playMusic(config.warehouse.sound["NO.788 - \u50f5 \u5c38 \u5148 \u751f"],.25),config.UICtrl.addUI("event",this.content);break;case"chessSelection":config.dj.playMusic(config.warehouse.sound["\u5431\u5431\u5431\u5c0f\u5431 - \u3010\u94a2\u7434\u7248\u3011\u9b3c\u65b0\u5a18\uff08\u7535\u5f71\u300a\u50f5\u5c38\u5148\u751f\u300b\u6b4c\u66f2\uff09\u7684\u526f\u672c"],1),config.UICtrl.addUI("chessSelection",this.content)}"home"==e?config.UICtrl.showUI("resInfo",!1):config.UICtrl.showUI("resInfo",!0),this.bg.getComponent(cc.Sprite).spriteFrame="shopLayer"==e?config.warehouse.spriteFrame["\u5546\u57ce\u80cc\u666f"]:config.warehouse.spriteFrame["\u4e3b\u754c\u9762\u80cc\u666f\u56fe"];for(var t=0;t<this.content.children.length;t++)this.content.children[t].name==e?this.content.children[t].active=!0:this.content.children[t].active=!1}}),cc._RF.pop()},{}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"95be0R3ixxH1YBp9RKrtl4i","Game");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.Game=void 0;var s=cc._decorator,c=s.ccclass,r=s.property,l=(cc.Enum({EASY:1,HARD:2}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starPrefab=null,t.maxStarDuration=0,t.minStarDuration=0,t.groundNode=null,t.playerNode=null,t.scoreLabel=null,t.scoreAudio=null,t}return i(t,e),t.prototype.onLoad=function(){this.groundY=this.groundNode.y+this.groundNode.height/2,this.timer=0,this.starDuration=0,this.spawnNewStar(),this.score=0},t.prototype.spawnNewStar=function(){var e=cc.instantiate(this.starPrefab);this.node.addChild(e),e.setPosition(this.getNewStarPosition()),e.getComponent("Star").init(this),this.starDuration=this.minStarDuration+cc.randomRange(0,1)*(this.maxStarDuration-this.minStarDuration),this.timer=0},t.prototype.getNewStarPosition=function(){var e,t=this.groundY+cc.randomRange(0,1)*this.playerNode.getComponent("Player").jumpHeight+50,n=this.node.width/2;return e=cc.randomRange(0,1)*n,cc.v2(e,t)},t.prototype.update=function(e){this.timer>this.starDuration?this.gameOver():this.timer+=e},t.prototype.gainScore=function(){this.score+=1,this.scoreLabel.string="Score: "+this.score.toString(),cc.audioEngine.play(this.scoreAudio,!1,1)},t.prototype.gameOver=function(){this.playerNode.stopAllActions(),cc.director.loadScene("game")},a([r(cc.Prefab)],t.prototype,"starPrefab",void 0),a([r(cc.Integer)],t.prototype,"maxStarDuration",void 0),a([r(cc.Integer)],t.prototype,"minStarDuration",void 0),a([r(cc.Node)],t.prototype,"groundNode",void 0),a([r(cc.Node)],t.prototype,"playerNode",void 0),a([r(cc.Label)],t.prototype,"scoreLabel",void 0),a([r(cc.AudioClip)],t.prototype,"scoreAudio",void 0),a([c],t)}(cc.Component));n.Game=l,cc._RF.pop()},{}],Helloworld:[function(e,t,n){"use strict";cc._RF.push(t,"e1b90/rohdEk4SdmmEZANaD","Helloworld");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,r=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return i(t,e),t.prototype.start=function(){this.label.string=this.text},a([r(cc.Label)],t.prototype,"label",void 0),a([r],t.prototype,"text",void 0),a([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],Player:[function(e,t,n){"use strict";cc._RF.push(t,"6903ajMiC5Brr2g3ohA0fj/","Player");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,r=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return i(t,e),t.prototype.start=function(){},a([r(cc.Label)],t.prototype,"label",void 0),a([r],t.prototype,"text",void 0),a([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],UICtrl:[function(e,t){"use strict";cc._RF.push(t,"58f18GHVoNLz6o72a0Rxn5Q","UICtrl"),t.exports={UIList:{},BLACK:null,outUI:null,zIndex:0,addUI:function(e,t,n){if(this.findUI(e))return n&&this.findUI(e).getComponent(e+"Ctrl").init(n),this.showUI(e,!0),this.findUI(e);var o=cc.instantiate(config.warehouse.prefabList[e]);return n?o.addComponent(e+"Ctrl").init(n):o.addComponent(e+"Ctrl"),t.addChild(o),this.UIList[e]=o,o},checkUIKey:function(e){for(var t in this.UIList)if(t===e)return!0;return!1},findUI:function(e){return!!this.UIList[e]&&this.UIList[e]},getUIComponent:function(e){if(this.UIList[e].getComponent(e+"Ctrl"))return this.UIList[e].getComponent(e+"Ctrl");this.UIList[e].addComponent(e+"Ctrl")},removeUI:function(e){this.UIList[e]?delete this.UIList[e]:console.log(e+"\u4e0d\u5b58\u5728")},showUI:function(e,t){this.UIList[e]?this.UIList[e].active=t:console.log(e+"\u4e0d\u5b58\u5728")},setUIParent:function(e,t){this.UIList[e]?this.UIList[e].parent=t:console.log(e+"\u4e0d\u5b58\u5728")},stickOutUI:function(e){if(this.outUI=e,this.zIndex=e.getSiblingIndex(),e){if(this.BLACK){this.BLACK.parent=e.parent;var t=e.parent.children.length-1;e.setSiblingIndex(t)}else this.BLACK=cc.instantiate(config.warehouse.prefabList.black),e.parent.addChild(this.BLACK),t=e.parent.children.length-1,e.setSiblingIndex(t);this.BLACK.active=!0}},setBlack:function(e){this.BLACK.active=!0,this.BLACK.parent=e.parent;var t=e.getSiblingIndex();this.BLACK.setSiblingIndex(t-1)},cancelStickOut:function(){this.BLACK&&(this.BLACK.active&&(this.BLACK.active=!1),this.BLACK.parent=null,this.outUI.setSiblingIndex(this.zIndex))}},cc._RF.pop()},{}],VSShowCtrl:[function(e,t){"use strict";cc._RF.push(t,"a933c/nMbJP14tYw0oE0Rpd","VSShowCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){config.dj.playMusic(config.warehouse.sound["\u5c0f\u65ed\u97f3\u4e50 - \u50f5\u5c38\u5927\u4f5c\u6218-\u68ee\u6797\u80cc\u666f\u97f3\u4e50"],1),this.zombieLayer=this.node.getChildByName("zombieLayer"),this.playerLayer=this.node.getChildByName("playerLayer"),this.vs=this.node.getChildByName("vs");var e=config.playerInfoManager.getEnemyData(config.passInfo.enemyID).pic,t=config.playerInfoManager.getMasterData(config.playerInfo.usingMaster).pic;this.zombieLayer.getChildByName("pic").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[e],this.playerLayer.getChildByName("pic").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[t],this.zombieMove(),this.playerMove(),this.vsShow()},zombieMove:function(){var e=this.zombieLayer.getChildByName("pic").x;this.zombieLayer.getChildByName("pic").x+=300,config.dj.playEffect(config.warehouse.sound["\u7269\u4f53\u63a0\u8fc7"],1),cc.tween(this.zombieLayer.getChildByName("pic")).to(.5,{x:e+50},{easing:"expoIn"}).to(1.5,{x:e}).start()},playerMove:function(){var e=this.playerLayer.getChildByName("pic").x;this.playerLayer.getChildByName("pic").x-=350,config.dj.playEffect(config.warehouse.sound["\u7269\u4f53\u63a0\u8fc7"],1),cc.tween(this.playerLayer.getChildByName("pic")).to(.5,{x:e-50},{easing:"expoIn"}).to(1.5,{x:e}).start()},vsShow:function(){var e=this;this.vs.scale=0,cc.tween(this.vs).delay(.5).by(.5,{scale:1},{easing:"backOut"}).delay(.5).call(function(){e.toGame()}).start()},toGame:function(){cc.director.loadScene("game")}}),cc._RF.pop()},{}],animCtrl:[function(e,t){"use strict";cc._RF.push(t,"a43f0j6l4lDYqg+4MWBNCet","animCtrl"),t.exports={waitingAnim:[],playProgress:0,chessGroup:[],getWaitingTween:function(e){return new o(e)},playWaitingAnim:function(){this.waitingAnim.length?this.playCurrentAnim():(this.playProgress=0,this.waitingAnim=[],config.UICtrl.getUIComponent("boardLayer").removeChess())},playCurrentAnim:function(){this.waitingAnim[this.playProgress]?this.waitingAnim[this.playProgress].play():config.eventDelegate.dispatchEvent("waitingAnimDone")},initWaitingAnimEvent:function(){var e=this;config.eventDelegate.addEvent("waitingAnimDone",function(){e.playProgress+=1,e.playProgress>=e.waitingAnim.length?(e.playProgress=0,e.waitingAnim=[],config.UICtrl.getUIComponent("boardLayer").removeChess()):e.playCurrentAnim()})},addWaitingAnim:function(e){e.init(),this.waitingAnim.push(e)},getAnimDataByLevel:function(e,t,n){var o={shoot:null,hit:null,effect:null,base:e,set:n,level:t};return 1==t?(o.shoot=e.level1ShootEffect,o.hit=e.level1HitEffect,o.effect=config.playerInfoManager.getChessEffectByLevel(e,config.playerInfoManager.getChessLevel(e.id)).level1Effect):2==t?(o.shoot=e.level2ShootEffect,o.hit=e.level2HitEffect,o.effect=config.playerInfoManager.getChessEffectByLevel(e,config.playerInfoManager.getChessLevel(e.id)).level2Effect):(o.shoot=e.level3ShootEffect,o.hit=e.level3HitEffect,o.effect=config.playerInfoManager.getChessEffectByLevel(e,config.playerInfoManager.getChessLevel(e.id)).level3Effect),o},creatLevel1Anim:function(){for(var e=this.chessGroup[0].type,t=this.chessGroup[0].level,o=config.gameInfo.chessData[e],i=this.getAnimDataByLevel(o,t,e),a=[],s=0;s<this.chessGroup.length;s++){var c=this.getShootTween(i.shoot,this.chessGroup[s]);a.push(c)}var r=new n(a,i);this.addWaitingAnim(r),this.chessGroup=[]},creatHigherLevelAnim:function(){for(var e=0;e<this.chessGroup.length;e++){var t=this.chessGroup[e].type,n=this.chessGroup[e].level,i=config.gameInfo.chessData[t],a=this.getAnimDataByLevel(i,n,t),s=this.getShootTween(a.shoot,this.chessGroup[e]),c=new o(s,a);this.addWaitingAnim(c)}this.chessGroup=[]},getTarget:function(e){switch(e){case"enemy":var t=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),config.UICtrl.getUIComponent("enemyUI").aimPoint),n=50*Math.random()-25,o=50*Math.random()-25;return t.x+=n,t.y+=o,t;case"player":return config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),config.UICtrl.getUIComponent("playerUI").skillButton);case"chessEnemy":return t=config.tools.transformPositionOnNode(config.UICtrl.getUIComponent("boardLayer").mapLayer,config.UICtrl.getUIComponent("enemyUI").aimPoint),n=50*Math.random()-25,o=50*Math.random()-25,t.x+=n,t.y+=o,t;case"chessPlayer":return config.tools.transformPositionOnNode(config.UICtrl.getUIComponent("boardLayer").mapLayer,config.UICtrl.getUIComponent("playerUI").skillButton);case"board":return config.tools.transformPositionOnNode(config.UICtrl.findUI("boardLayer"),config.UICtrl.getUIComponent("playerUI").skillButton)}return cc.v2(0,0)},getShootTween:function(e,t){var n=e.type,o=e.size,i=e.target,a=e.callType,s=null;switch(n){case 1:s=r("\u706b\u7403",o,t.middle,cc.WrapMode.Loop);break;case 2:s=r("\u516b\u5366\u955c",o,t.middle,cc.WrapMode.Loop);break;case 3:s=r("\u6253\u9b3c\u68d2",o,t.middle,cc.WrapMode.Loop);break;case 4:s=r("\u706b\u4ee4\u65d7",o,t.middle,cc.WrapMode.Loop);break;case 5:s=r("\u70c8\u706b\u7b26",o,t.middle,cc.WrapMode.Loop)}switch(a){case"tween":var c=this.getTarget(i);return cc.tween(s).call(function(){config.objectPool.put("chessPool",t.middle),t.middle=null,s.getComponent("effectBaseNodeCtrl").show(!0)}).to(.5,{position:c}).call(function(){s.getComponent("effectBaseNodeCtrl").reclaim()});case"chessTween":return c=this.getTarget(i),cc.tween(t.middle).to(.5,{position:c}).call(function(){config.objectPool.put("chessPool",t.middle),t.middle=null})}function r(e,t,n,o){var i=config.objectPool.getEffect(e),a=i.getComponent("effectBaseNodeCtrl");return a.type||(a.type=e,a.initAnimation(e,o)),i.scale=t,config.UICtrl.findUI("effect").addChild(i),i.setPosition(config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),n)),a.playAnim(),i}},playHitEffect:function(e){var t=e.type,n=e.size,o=this.getTarget(e.target);switch(t){case 1:var i=config.objectPool.getPrefab("\u722a\u5370"),a=o;a.y+=100,i.setPosition(a),i.scale=n,config.UICtrl.findUI("effect").addChild(i),i.getComponent(cc.Sprite).fillStart=1,i.opacity=255,cc.tween(i.getComponent(cc.Sprite)).to(.5,{fillStart:0},{easing:"quadIn"}).call(function(){s.start(),config.tools.nodeShake(config.UICtrl.getUIComponent("game").player,5),config.tools.nodeShake(config.UICtrl.findUI("boardLayer"),5)}).start();var s=cc.tween(i).to(.25,{opacity:0},{easing:"quadIn"}).call(function(){config.objectPool.put("\u722a\u5370",i)});break;case 2:config.dj.playEffect(config.warehouse.sound["\u706b\u74031\u9636"],1),r("\u706b\u7403\u6253\u51fb1",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 3:config.dj.playEffect(config.warehouse.sound["\u706b\u74032\u9636"],1),r("\u706b\u7403\u6253\u51fb2",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 4:config.dj.playEffect(config.warehouse.sound["\u706b\u74033\u9636"],1),r("\u706b\u7403\u6253\u51fb3",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 5:config.dj.playEffect(config.warehouse.sound["\u56db\u6d88"],1),r("\u516b\u5366\u955c\u6253\u51fb1",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 6:config.dj.playEffect(config.warehouse.sound["\u516b\u5366\u955c1\u9636"],1),r("\u516b\u5366\u955c\u6253\u51fb2",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 7:config.dj.playEffect(config.warehouse.sound["\u6843\u6728\u52511\u9636"],1),r("\u6843\u6728\u5251\u6253\u51fb1",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 8:config.dj.playEffect(config.warehouse.sound["\u6843\u6728\u52512\u9636"],1),r("\u6843\u6728\u5251\u6253\u51fb2",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 9:config.dj.playEffect(config.warehouse.sound["\u6843\u6728\u52513\u9636"],1),r("\u6843\u6728\u5251\u6253\u51fb3",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 10:config.dj.playEffect(config.warehouse.sound["\u516b\u5366\u955c1\u9636"],1),r("\u516b\u5366\u955c\u6253\u51fb3",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 11:config.dj.playEffect(config.warehouse.sound["\u7b26\u5492"],1),r("\u7b26\u6253\u51fb2",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 12:config.dj.playEffect(config.warehouse.sound["\u7b26\u5492"],1),r("\u7b26\u6253\u51fb3",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 13:config.dj.playEffect(config.warehouse.sound["\u7cef\u7c73"],1);var c=config.objectPool.getPrefab("\u98de\u7c73");c.scale=n,config.UICtrl.findUI("effect").addChild(c),c.setPosition(o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 14:config.dj.playEffect(config.warehouse.sound["\u6062\u590d\u751f\u547d\u503c"],1),r("\u6062\u590d",n,o);break;case 15:config.dj.playEffect(config.warehouse.sound["\u62a4\u76fe"],1),r("\u62a4\u76fe",n,o);break;case 16:r("\u4e03\u661f\u5251\u6253\u51fb1",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5),config.dj.playEffect(config.warehouse.sound["\u4e03\u661f\u52511\u9636"],1);break;case 17:r("\u4e03\u661f\u5251\u6253\u51fb2",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5),config.dj.playEffect(config.warehouse.sound["\u4e03\u661f\u52512\u9636"],1);break;case 18:r("\u4e03\u661f\u5251\u6253\u51fb3",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5),config.dj.playEffect(config.warehouse.sound["\u4e03\u661f\u52513\u9636"],1);break;case 19:config.dj.playEffect(config.warehouse.sound["\u6240\u6709\u50f5\u5c38\u666e\u901a\u653b\u51fb"],1),r("\u50f5\u5c38\u666e\u653b",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("game").player,5),config.tools.nodeShake(config.UICtrl.findUI("boardLayer"),5);break;case 20:config.dj.playEffect(config.warehouse.sound["\u5251\u5b97_\u4e07\u5251\u5f52\u5b97\u6253\u51fb"],1),r("\u5251\u5b97\u4e3b\u52a8\u6253\u51fb",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 21:config.dj.playEffect(config.warehouse.sound["\u548c\u5c1a_\u91d1\u521a\u8eab"],1),r("\u548c\u5c1a\u4e3b\u52a8\u91ca\u653e",n,o);break;case 22:config.dj.playEffect(config.warehouse.sound["\u5927\u53a8_\u4e71\u65a9"],1),r("\u5927\u53a8\u4e71\u65a9",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("game").player,5),config.tools.nodeShake(config.UICtrl.findUI("boardLayer"),5);break;case 23:config.dj.playEffect(config.warehouse.sound["\u5927\u53a8_\u5fe7\u90c1\u4e4b\u58f0"],1),r("\u5927\u53a8\u5fe7\u90c1\u4e4b\u58f0",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("game").player,5),config.tools.nodeShake(config.UICtrl.findUI("boardLayer"),5);break;case 24:config.dj.playEffect(config.warehouse.sound["\u6349\u9b3c\u5929\u5e08_\u68cb\u5b50\u5347\u7ea7"],1),r("\u5929\u5e08\u4e3b\u52a8\u91ca\u653e",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 25:r("\u6062\u590d\u80fd\u91cf",n,o);break;case 26:config.dj.playEffect(config.warehouse.sound["\u6253\u9b3c\u68d21\u9636"],1),r("\u6253\u9b3c\u68d2\u6253\u51fb1",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 27:config.dj.playEffect(config.warehouse.sound["\u6253\u9b3c\u68d22\u9636"],1),r("\u6253\u9b3c\u68d2\u6253\u51fb2",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 28:config.dj.playEffect(config.warehouse.sound["\u6253\u9b3c\u68d23\u9636"],1),r("\u6253\u9b3c\u68d2\u6253\u51fb3",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 29:config.dj.playEffect(config.warehouse.sound["\u638c\u67dc_\u6536\u503a"],1),r("\u6536\u503a",n,o);break;case 30:config.dj.playEffect(config.warehouse.sound["\u6728\u96d5\u5e08_\u66ff\u8eab\u6728\u96d5"],1),r("\u6728\u96d5\u732b",n,o);break;case 31:config.dj.playEffect(config.warehouse.sound["\u6ed1\u677f\u5c11\u5e74_\u52a0\u901f\u6280\u80fd"],1),r("\u6ed1\u677f\u52a0\u901f",n,o);break;case 32:config.dj.playEffect(config.warehouse.sound["\u706b\u4ee4\u65d71\u9636"],1),r("\u706b\u4ee4\u65d7\u6253\u51fb1",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 33:config.dj.playEffect(config.warehouse.sound["\u706b\u4ee4\u65d72\u9636"],1),r("\u706b\u4ee4\u65d7\u6253\u51fb2",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 34:config.dj.playEffect(config.warehouse.sound["\u706b\u4ee4\u65d73\u9636"],1),r("\u706b\u4ee4\u65d7\u6253\u51fb3",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5);break;case 35:config.dj.playEffect(config.warehouse.sound["\u4e66\u6cd5\u5bb6_\u8986\u5199"],1),r("\u8986\u5199",n,o);break;case 36:config.dj.playEffect(config.warehouse.sound["\u88c1\u7f1d_\u9488\u523a\u8bc5\u5492\u65bd\u653e"],1),r("\u9488\u523a\u6253\u51fb",n,o);break;case 37:config.dj.playEffect(config.warehouse.sound["\u7b26\u5492"],1),r("\u7b26\u6253\u51fb1",n,o),config.tools.nodeShake(config.UICtrl.getUIComponent("enemyUI").enemySkeleton,5)}function r(e,t,n){var o=config.objectPool.getEffect(e),i=o.getComponent("effectBaseNodeCtrl");i.type||(i.type=e,i.initAnimation(e,cc.WrapMode.Default),i.animation.on("stop",function(){i.reclaim()},this)),o.scale=t,config.UICtrl.findUI("effect").addChild(o),i.show(!0),o.setPosition(n),i.playAnim()}},jumpNum:function(e,t){var n=new cc.Node;n.scale=.33;var o=n.addComponent(cc.Label);o.string=e,o.fontSize=90,o.lineHeight=80,o.enableBold=!0;var i=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),t);n.setPosition(i),config.UICtrl.findUI("effect").addChild(n);var a=n.addComponent(cc.LabelOutline);a.color=new cc.Color(186,186,186),a.width=2,a.color=new cc.Color(34,34,34),a.blur=5,cc.tween(n).by(.5,{y:60}).call(function(){n.destroy()}).start()},showCost:function(){},sellNum:function(e,t){this.windowSize=cc.winSize;var n=(844-this.windowSize.height)/2,o=new cc.Node,i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u94b1"],i.x=-180,i.scale=.54,o.addChild(i),o.scale=.33;var a=o.addComponent(cc.Label);a.string="+"+e+"W",a.fontSize=70,a.lineHeight=80,a.enableBold=!0;var s=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),t);o.x=s.x,o.y-=n/2.5,o.y+=90,config.UICtrl.findUI("effect").addChild(o);var c=o.addComponent(cc.LabelOutline);c.color=new cc.Color(186,186,186),c.width=2,c.color=new cc.Color(34,34,34),c.blur=5,cc.tween(o).by(.75,{y:40}).call(function(){o.destroy()}).start()},packageGoods:function(e,t,n){var o=this;e.getChildByName("level").active=!1,e.getChildByName("pic").active=!1,e.getChildByName("bg").active=!1;var i=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),config.UICtrl.getUIComponent("priceBoard").getPriceNodeByType(n));cc.tween(e).to(.05,{scale:1.1}).delay(.1).call(function(){e.destroy(),o.flyFruit(i,t,e,n)}).start()},composeEffect:function(e){this.effectPool||(this.effectPool=new cc.NodePool),this.effectPool.size()<=0&&this.addEffectPool(),config.dj.playEffect(config.warehouse.sound["\u68cb\u5b50\u5408\u6210"],.6);var t=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),n=this.effectPool.get();n.scale=.74,n.setPosition(t),config.UICtrl.findUI("effect").addChild(n),n.getComponent(cc.Animation).play("composeEffect")},composeTwoEffect:function(e){this.effectPool2||(this.effectPool2=new cc.NodePool),this.effectPool2.size()<=0&&this.addEffectPool2(),config.dj.playEffect(config.warehouse.sound["\u68cb\u5b50\u5408\u6210"],.8);var t=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),n=this.effectPool2.get();n.scale=.94,n.setPosition(t),config.UICtrl.findUI("effect").addChild(n),n.getComponent(cc.Animation).play("composeTwo")},composeThreeEffect:function(e){this.effectPool3||(this.effectPool3=new cc.NodePool),this.effectPool3.size()<=0&&this.addEffectPool3(),config.dj.playEffect(config.warehouse.sound["\u68cb\u5b50\u5408\u6210"]);var t=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),n=this.effectPool3.get();n.scale=.74,n.setPosition(t),config.UICtrl.findUI("effect").addChild(n),n.getComponent(cc.Animation).play("composeThree")},bonusEffect:function(e,t){this.windowSize=cc.winSize;var n=new cc.Node;n.scale=.33;var o=n.addComponent(cc.Label);o.string="\u5956\u52b1+"+t,o.fontSize=70,o.lineHeight=80,o.enableBold=!0;var i=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);n.setPosition(i),config.UICtrl.findUI("effect").addChild(n);var a=n.addComponent(cc.LabelOutline);a.color=new cc.Color(186,186,186),a.width=2,a.color=new cc.Color(71,46,25),a.blur=5,cc.tween(n).by(1.75,{y:40}).call(function(){n.destroy()}).start()},addEffectPool:function(){var e=cc.instantiate(config.warehouse.prefabList.composeEffect);e.getComponent(cc.Animation).addClip(config.warehouse.animationClip.composeEffect,"composeEffect"),e.getComponent(cc.Animation).on("stop",function(){this.effectPool.put(e)},this),this.effectPool.put(e)},addEffectPool2:function(){var e=cc.instantiate(config.warehouse.prefabList.composeTwo);e.getComponent(cc.Animation).addClip(config.warehouse.animationClip.composeTwo,"composeTwo"),e.getComponent(cc.Animation).on("stop",function(){this.effectPool2.put(e)},this),this.effectPool2.put(e)},addEffectPool3:function(){var e=cc.instantiate(config.warehouse.prefabList.composeThree);e.getComponent(cc.Animation).addClip(config.warehouse.animationClip.composeThree,"composeThree"),e.getComponent(cc.Animation).on("stop",function(){this.effectPool3.put(e)},this),this.effectPool3.put(e)},flyMoney:function(e,t,n){var o=this,i=0,a=0;1==t?(i=1,a=0):t<=5?(i=2,a=25):t<=10?(i=3,a=25):t<=14?(i=4,a=50):t<=19?(i=5,a=50):t<=40?(i=8,a=50):t<=100?(i=10,a=75):t<=200?(i=15,a=100):t<=300?(i=20,a=125):t<=400?(i=22,a=125):t<=500?(i=24,a=125):t<=800?(i=26,a=125):t<=1e3?(i=28,a=125):t<=1500?(i=30,a=125):t<=2e3?(i=35,a=150):t<=3e3?(i=40,a=160):t<=4e3?(i=50,a=170):(i=60,a=180),this.moneyPool||(this.moneyPool=new cc.NodePool);var s=this.moneyPool.size(),c=s>i?0:i-s;this.initMoneyPool(c);for(var r=this.getCirclePoints(a,config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),n),i,60),l=function(t){h=.3*Math.random()+.3;var i=o.moneyPool.get();i.scale=.12,i.setPosition(config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),n)),config.UICtrl.findUI("effect").addChild(i),cc.tween(i).to(.2,{position:r[t],scale:.2},{easing:"quadOut"}).to(h,{position:e,scale:.2},{easing:"quadIn"}).call(function(){t==r.length-1&&(config.dj.playEffect(config.warehouse.sound["\u652f\u4ed8\u5b9d"]),config.UICtrl.getUIComponent("assets").changeAssets(cc.find("Canvas").getComponent("gameCtrl").assetCount)),o.moneyPool.put(i)}).start()},f=0;f<r.length;f++){var h;l(f)}},flyFruit:function(e,t,n,o){var i=this,a=0,s=0;1==t?(a=1,s=0):t<=5?(a=2,s=25):t<=10?(a=3,s=25):t<=14?(a=4,s=50):t<=19?(a=5,s=50):t<=40?(a=8,s=50):t<=100?(a=10,s=75):t<=200?(a=15,s=100):t<=300?(a=20,s=125):t<=400?(a=22,s=125):t<=500?(a=24,s=125):t<=800?(a=26,s=125):t<=1e3?(a=28,s=125):t<=1500?(a=30,s=125):t<=2e3?(a=35,s=150):t<=3e3?(a=40,s=160):t<=4e3?(a=50,s=170):(a=60,s=180),this.fruitPool||(this.fruitPool=new cc.NodePool);var c=this.fruitPool.size(),r=c>a?0:a-c;this.initFruitPool(r);for(var l=this.getCirclePoints(s,config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),n),a,60),f=function(t){g=.3*Math.random()+.3;var a=i.fruitPool.get();a.getComponent(cc.Sprite).spriteFrame=config.tools.getChessPic(o),a.setPosition(config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),n)),config.UICtrl.findUI("effect").addChild(a),cc.tween(a).to(g,{position:e},{easing:"quadIn"}).call(function(){t==l.length-1&&(config.dj.playEffect(config.warehouse.sound["\u652f\u4ed8\u5b9d2"]),config.UICtrl.getUIComponent("assets").changeAssets(cc.find("Canvas").getComponent("gameCtrl").assetCount)),i.fruitPool.put(a)}).start()},h=0;h<l.length;h++){var g;f(h)}},initFruitPool:function(e){for(var t=0;t<e;t++){var n=new cc.Node;n.addComponent(cc.Sprite),n.scale=.28,this.fruitPool.put(n)}},UIJumpOut:function(){},showSellReword:function(e){this.windowSize=cc.winSize;var t=(844-this.windowSize.height)/2,n=new cc.Node,o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u94b1"],o.scale=.7,o.x=-150,n.addChild(o),n.scale=.33;var i=n.addComponent(cc.Label);i.string="+"+e+"W",i.fontSize=70,i.lineHeight=80,i.enableBold=!0;var a=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),config.UICtrl.findUI("assets"));n.y=a.y,n.y-=30,n.y-=t/2.5,config.UICtrl.findUI("effect").addChild(n);var s=n.addComponent(cc.LabelOutline);s.color=new cc.Color(186,186,186),s.width=2,s.color=new cc.Color(34,34,34),s.blur=5,cc.tween(n).by(.5,{y:20}).call(function(){n.destroy()}).start()},initMoneyPool:function(e){for(var t=0;t<e;t++){var n=new cc.Node;n.addComponent(cc.Sprite),n.addComponent(cc.Animation).addClip(config.warehouse.animationClip.coinFlip,"coinFlip"),n.getComponent(cc.Animation).play("coinFlip"),n.scale=.08,this.moneyPool.put(n)}},getCirclePoints:function(e,t,n,o){for(var i=[],a=Math.PI/180*Math.round(360/n),s=0;s<n;s++){var c=t.x+e*Math.sin(a*s),r=t.y+e*Math.cos(a*s);i.unshift(cc.v2(c+Math.random()*o,r+Math.random()*o))}return i},keepSlide:function(e,t,n){var o=cc.instantiate(config.warehouse.prefabList.point);if(config.UICtrl.findUI("effect").addChild(o),n){var i=new cc.Node;i.scale=1.2,i.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u5408\u6210\u66f4\u9ad8\u7ea7\u5546\u54c1"],o.addChild(i),i.y+=280}var a=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);return a.x+=10,a.y-=30,o.setPosition(a),0==t?cc.tween(o).by(.5,{x:-50}).delay(.25).call(function(){o.setPosition(a)}).union().repeatForever().start():1==t?cc.tween(o).by(.5,{x:50}).delay(.25).call(function(){o.setPosition(a)}).union().repeatForever().start():2==t?cc.tween(o).by(.5,{y:50}).delay(.25).call(function(){o.setPosition(a)}).union().repeatForever().start():cc.tween(o).by(.5,{y:-50}).delay(.25).call(function(){o.setPosition(a)}).union().repeatForever().start(),o},keepSlide1:function(e,t,n){var o=cc.winSize.height/844,i=new cc.Node;config.UICtrl.findUI("effect").addChild(i);var a=new cc.Node;a.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,i.addChild(a),a.scale=.85,a.scale*=o;var s=new cc.Node;s.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,i.addChild(s),s.scale=.85,s.scale*=o;var c=cc.instantiate(config.warehouse.prefabList.arrowSlide);i.addChild(c),c.scale*=o;var r=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);if(n){var l=cc.instantiate(config.warehouse.prefabList.cowTip);i.addChild(l),l.getChildByName("tip").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[1],l.y=r.y,l.y-=90}c.setPosition(r),s.setPosition(r),a.setPosition(r),0==t?(a.x-=65*o,c.x-=35*o):1==t?(a.x+=65*o,c.x+=35*o):2==t?(a.y+=65*o,c.y+=40*o,c.angle=90):(a.y-=65*o,c.y-=40*o,c.angle=90),cc.tween(c.children[0]).by(.25,{x:10}).by(.25,{x:-10}).delay(.25).union().repeatForever().start(),cc.tween(c.children[1]).by(.25,{x:-20}).by(.25,{x:20}).delay(.25).union().repeatForever().start(),config.eventDelegate.addEvent("cancelSlide1",function(){i.destroy()})},showSlideAnim:function(e,t,n){var o=cc.instantiate(config.warehouse.prefabList.point);if(config.UICtrl.findUI("effect").addChild(o),n){var i=new cc.Node;i.scale=1.2,i.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u5408\u6210\u66f4\u9ad8\u7ea7\u5546\u54c1"],o.addChild(i),i.y+=280}var a=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);a.x+=10,a.y-=30,o.setPosition(a),0==t?cc.tween(o).by(.5,{x:-50}).delay(.25).call(function(){o.setPosition(a)}).union().repeat(3).call(function(){o.destroy()}).start():1==t?cc.tween(o).by(.5,{x:50}).delay(.25).call(function(){o.setPosition(a)}).union().repeat(3).call(function(){o.destroy()}).start():2==t?cc.tween(o).by(.5,{y:50}).delay(.25).call(function(){o.setPosition(a)}).union().repeat(3).call(function(){o.destroy()}).start():cc.tween(o).by(.5,{y:-50}).delay(.25).call(function(){o.setPosition(a)}).union().repeat(3).call(function(){o.destroy()}).start()},showSlideAnim1:function(e,t){var n=cc.winSize.height/844,o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,config.UICtrl.findUI("effect").addChild(o),o.scale=.85,o.scale*=n;var i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,config.UICtrl.findUI("effect").addChild(i),i.scale=.85,i.scale*=n;var a=cc.instantiate(config.warehouse.prefabList.arrowSlide);config.UICtrl.findUI("effect").addChild(a),a.scale*=n;var s=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);a.setPosition(s),i.setPosition(s),o.setPosition(s),0==t?(o.x-=65*n,a.x-=35*n):1==t?(o.x+=65*n,a.x+=35*n):2==t?(o.y+=65*n,a.y+=40*n,a.angle=90):(o.y-=65*n,a.y-=40*n,a.angle=90),cc.tween(a.children[0]).by(.25,{x:10}).by(.25,{x:-10}).delay(.25).union().repeat(3).call(function(){o.destroy(),a.destroy(),i.destroy()}).start(),cc.tween(a.children[1]).by(.25,{x:-20}).by(.25,{x:20}).delay(.25).union().repeat(3).start()},teachSlide:function(e,t){var n=cc.winSize.height/844,o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,config.UICtrl.findUI("effect").addChild(o),o.scale=.85,o.scale*=n;var i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,config.UICtrl.findUI("effect").addChild(i),i.scale=.85,i.scale*=n;var a=cc.instantiate(config.warehouse.prefabList.arrowSlide);config.UICtrl.findUI("effect").addChild(a),a.scale*=n;var s=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);a.setPosition(s),i.setPosition(s),o.setPosition(s),0==t?(o.x-=65*n,a.x-=35*n):1==t?(o.x+=65*n,a.x+=35*n):2==t?(o.y+=65*n,a.y+=40*n,a.angle=90):(o.y-=65*n,a.y-=40*n,a.angle=90),cc.tween(a.children[0]).by(.25,{x:10}).by(.25,{x:-10}).delay(.25).union().repeat(3).call(function(){o.destroy(),a.destroy(),i.destroy()}).start(),cc.tween(a.children[1]).by(.25,{x:-20}).by(.25,{x:20}).delay(.25).union().repeat(3).start()},keepPoint:function(e,t){var n=cc.winSize.height/844,o=new cc.Node;config.UICtrl.findUI("effect").addChild(o);var i=cc.instantiate(config.warehouse.prefabList.point);i.getComponent(cc.Animation).addClip(config.warehouse.animationClip.keepPoint,"keepPoint");var a=new cc.Node;a.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,o.addChild(a),o.addChild(i),a.scale=.85,a.scale*=n;var s=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);if(a.setPosition(s),t){var c=cc.instantiate(config.warehouse.prefabList.cowTip);o.addChild(c),c.getChildByName("tip").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[3],c.y=s.y,c.y-=110}s.x+=10,s.y-=30,i.setPosition(s),i.getComponent(cc.Animation).play("keepPoint"),config.eventDelegate.addEvent("cancelKeepPoint",function(){o.destroy()})},showPointAnim:function(e){var t=cc.winSize.height/844,n=cc.instantiate(config.warehouse.prefabList.point);config.UICtrl.findUI("effect").addChild(n),n.getComponent(cc.Animation).addClip(config.warehouse.animationClip.point,"point"),n.getComponent(cc.Animation).on("stop",function(){n.destroy()},this);var o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,n.addChild(o),o.x-=45,o.y+=150,o.scale=3,o.scale*=t;var i=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);i.x+=10,i.y-=30,n.setPosition(i),n.getComponent(cc.Animation).play("point")},showADPointAnim:function(e){var t=cc.instantiate(config.warehouse.prefabList.point);config.UICtrl.findUI("effect").addChild(t),t.getComponent(cc.Animation).addClip(config.warehouse.animationClip.point,"point"),t.getComponent(cc.Animation).on("stop",function(){t.destroy()},this);var n=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);return n.x+=10,n.y-=30,t.setPosition(n),t.getComponent(cc.Animation).play("point"),t},showPriceBoardFruit:function(){var e=config.UICtrl.findUI("priceBoard"),t=cc.instantiate(config.warehouse.prefabList.select),n=new cc.Node;n.scale=.4,n.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[2],n.y-=65,t.addChild(n),t.width=340,t.height=80,config.UICtrl.findUI("effect").addChild(t),t.setPosition(config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e)),t.y-=30,config.eventDelegate.addEvent("cancelPriceBoard",function(){t.destroy()})},showAssets:function(){var e=config.UICtrl.findUI("assets"),t=cc.instantiate(config.warehouse.prefabList.select),n=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),o=cc.instantiate(config.warehouse.prefabList.cowTip);t.addChild(o),o.getChildByName("tip").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[4],o.y=n.y,o.y-=570,t.width=220,config.UICtrl.findUI("effect").addChild(t),t.setPosition(n),config.eventDelegate.addEvent("cancelAsset",function(){t.destroy()})},showTarget:function(){var e=config.UICtrl.findUI("aim"),t=cc.instantiate(config.warehouse.prefabList.select);t.height=80,t.width=200,config.UICtrl.findUI("effect").addChild(t),t.setPosition(config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e)),t.x+=72.5,config.eventDelegate.addEvent("cancelTarget",function(){t.destroy()})},showStep:function(){var e=config.UICtrl.findUI("step"),t=new cc.Node;config.UICtrl.findUI("effect").addChild(t);var n=cc.instantiate(config.warehouse.prefabList.select);t.addChild(n);var o=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),i=cc.instantiate(config.warehouse.prefabList.cowTip);t.addChild(i),i.getChildByName("tip").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[5],i.y=o.y,i.y-=90,n.setPosition(o),config.eventDelegate.addEvent("cancelStep",function(){t.destroy()})},showAD:function(){var e=config.UICtrl.findUI("speculation"),t=new cc.Node;config.UICtrl.findUI("effect").addChild(t);var n=cc.instantiate(config.warehouse.prefabList.select);t.addChild(n);var o=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),i=cc.instantiate(config.warehouse.prefabList.cowTip);t.addChild(i),i.getChildByName("tip").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[11],i.y=o.y,i.y+=160,n.width=360,n.setPosition(o),config.eventDelegate.addEvent("cancelAD",function(){t.destroy()})},teachDone:function(){},levelJump:function(e,t){var n=e.middle.getChildByName("pic"),o=.38;3==t?o=.38:4==t?o=.48:t>4&&(o=.58),cc.tween(n).to(.1,{scale:o},{easing:"quadIn"}).to(.05,{scale:.28}).start()},initCowTip:function(){this.cowPool||(this.cowPool=new cc.NodePool),this.cowPool.size()<=0&&this.addCowPool()},addCowPool:function(){var e=cc.instantiate(config.warehouse.prefabList.cowTip);config.UICtrl.findUI("effect").addChild(e),this.cowPool.put(e)},teachStage1:function(e){var t=cc.instantiate(config.warehouse.prefabList.teachStage1);config.UICtrl.findUI("effect").addChild(t),t.getComponent("teachStage1Ctrl").initTeach(e)},outComTip:function(e){this.cowPool.size()<=0&&this.addCowPool();var t=this.cowPool.get();config.UICtrl.findUI("effect").addChild(t);var n=t.getChildByName("cover"),o=t.getChildByName("cow"),i=o.getChildByName("bg"),a=i.getChildByName("label"),s=t.getChildByName("block");switch(n.width=644,n.height=655,n.x=0,n.y=0,o.x=90,o.y=-60,e){case"board":a.getComponent(cc.Label).string="\u6ed1\u52a8\u5408\u6210\u66f4\u9ad8\u7b49\u7ea7\u5546\u54c1\uff01",o.y+=130,n.y-=95,n.x+=5,n.active=!1,i.active=!1,n.width=785,n.height=795,config.UICtrl.stickOutUI(config.UICtrl.findUI("play")),config.UICtrl.findUI("board").setSiblingIndex(4),i.active=!0,s.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),"undefined"==typeof wx||"undefined"==typeof KSGameGlobal&&config.wxTools.boardTeach();break;case"sell":a.getComponent(cc.Label).string="\u70b9\u51fb\u5356\u51fa\u589e\u52a0\u8d44\u91d1",o.y+=130,n.y-=95,n.x+=5,n.active=!1,n.width=785,n.height=795,config.UICtrl.stickOutUI(config.UICtrl.findUI("play")),config.UICtrl.findUI("board").setSiblingIndex(4),i.active=!0,s.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),config.wxTools.sellTeach();break;case"priceBoard":a.getComponent(cc.Label).string="\u8fd9\u91cc\u662f\u4ef7\u683c\u677f\uff0c\u5408\u6210\u5546\u54c1\u4f1a\u63d0\u9ad8\u4ef7\u683c\uff01",n.y+=257,n.x+=3,n.width=740,n.height=530,o.y+=190,o.x+=60,n.active=!1,config.UICtrl.findUI("board").setSiblingIndex(2),config.UICtrl.stickOutUI(config.UICtrl.findUI("priceBoard")),i.active=!0,s.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),"undefined"==typeof wx||"undefined"==typeof KSGameGlobal&&config.wxTools.priceBoard();break;case"herald":a.getComponent(cc.Label).string="\u8fd9\u91cc\u5c55\u793a\u4ef7\u683c\u4f1a\u5728\u51e0\u56de\u5408\u540e\u53d8\u5316\u3002",n.y+=200,n.width=620,n.height=490,o.y+=100,n.active=!1,config.UICtrl.stickOutUI(config.UICtrl.findUI("herald")),i.active=!0,s.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),config.UICtrl.getUIComponent("play").givePromptOnce();break;case"step":a.getComponent(cc.Label).string="\u8fd9\u91cc\u662f\u5269\u4f59\u6b65\u6570,\u5408\u6210\u53ca\u70b9\u51fb\u5356\u51fa\u90fd\u4f1a\u6d88\u8017\u6b65\u6570\u3002",n.y+=135,n.x+=140,n.width=510,n.height=500,o.x+=60,o.y+=120,n.active=!1,config.UICtrl.findUI("board").setSiblingIndex(2),config.UICtrl.stickOutUI(config.UICtrl.findUI("step")),i.active=!0,s.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),"undefined"==typeof wx||"undefined"==typeof KSGameGlobal&&config.wxTools.stepTeach();break;case"asset":a.getComponent(cc.Label).string="\u8fd9\u91cc\u662f\u8d44\u91d1,\u8fbe\u6210\u76ee\u6807\u5373\u53ef\u901a\u5173\uff01",n.y+=135,n.x-=20,n.width=655,n.height=510,n.active=!1,config.UICtrl.stickOutUI(config.UICtrl.findUI("assets")),i.active=!0,s.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),o.y+=120,o.x+=50,"undefined"==typeof wx||"undefined"==typeof KSGameGlobal&&config.wxTools.assetsTeach();break;case"ad":a.getComponent(cc.Label).string="\u8fd9\u91cc\u662f\u5e7f\u544a\u9053\u5177\uff0c\u5206\u522b\u53ef\u4ee5\n\u201c\u83b7\u5f97\u8d44\u91d1\u201d\u3001\u201c\u5237\u65b0\u4ef7\u683c\u201d\u3001\n\u201c\u589e\u52a0\u6b65\u6570\u201d\uff0c\u597d\u597d\u5229\u7528\u5427\uff01",n.y-=340,n.width=760,n.height=510,o.y-=270,o.x+=50,n.active=!1,config.UICtrl.setBlack(config.UICtrl.findUI("bailout")),i.active=!0,s.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),config.UICtrl.getUIComponent("play").givePromptOnce();break;case"lowAsset":a.getComponent(cc.Label).string="\u5c0f\u5fc3\uff0c\u4f60\u5feb\u7834\u4ea7\u5566,\u70b9\u51fb\u5356\u51fa\u83b7\u5f97\u8d44\u91d1\u3002",n.active=!1,i.active=!0,s.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),o.y+=80;break;case"animate":case"moreAnimate":break;case"boardLocked":a.getComponent(cc.Label).string="\u65e0\u6cd5\u4e09\u6d88\u5408\u6210\u4e86\uff0c\u70b9\u51fb\u5356\u51fa\u3002",n.active=!1,i.active=!0,s.on(cc.Node.EventType.TOUCH_END,this.tipBack,this);break;case"highLevelChess":a.getComponent(cc.Label).string="\u673a\u4e0d\u53ef\u5931,\u70b9\u51fb\u5356\u51fa\u83b7\u5f97\u8d44\u91d1\u3002",n.active=!1,i.active=!0,s.on(cc.Node.EventType.TOUCH_END,this.tipBack,this);break;case"target":a.getComponent(cc.Label).string="\u8fd9\u662f\u6e38\u620f\u76ee\u6807",config.UICtrl.stickOutUI(config.UICtrl.findUI("aim")),i.active=!0,s.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),o.y+=260}},tipBack:function(e){var t=e.currentTarget.parent,n=t.getChildByName("cow").getChildByName("bg"),o=t.getChildByName("block");n.active=!1,o.off(cc.Node.EventType.TOUCH_END,this.tipBack,this),config.UICtrl.cancelStickOut(),this.cowPool.put(t)},remindProvince:function(e){var t=cc.instantiate(config.warehouse.prefabList.point);config.UICtrl.findUI("UI").addChild(t),t.getComponent(cc.Animation).addClip(config.warehouse.animationClip.keepPoint,"keepPoint");var n=e.position;n.x+=10,n.y-=40,t.setPosition(n),t.getComponent(cc.Animation).play("keepPoint");var o=new cc.Node;o.addComponent(cc.Label).string="\u8bf7\u8bbe\u7f6e\u5730\u533a\uff0c\n\u4ee5\u52a0\u5165\u725b\u7fa4",o.getComponent(cc.Label).lineHeight=60;var i=o.addComponent(cc.LabelOutline);return i.color=new cc.Color(0,0,0),i.width=2,t.addChild(o),o.scale*=1.5,o.y-=280,t}};var n=function(){function e(e,t){this.array=e,this.count=this.array.length,this.data=t}var t=e.prototype;return t.init=function(){},t.play=function(){for(var e=this,t=0;t<this.array.length;t++)this.array[t].call(function(){e.count--,config.eventDelegate.dispatchEvent("\u68cb\u5b50\u6d88\u9664",e.data),0==e.count&&config.eventDelegate.dispatchEvent("waitingAnimDone")}).start()},t.checkCallType=function(){},e}(),o=function(){function e(e,t){this.anim=e,this.data=t}var t=e.prototype;return t.init=function(){var e=this;this.anim.call(function(){config.eventDelegate.dispatchEvent("\u68cb\u5b50\u6d88\u9664",e.data),config.eventDelegate.dispatchEvent("waitingAnimDone")})},t.play=function(){this.anim.start()},t.checkCallType=function(){},e}();cc._RF.pop()},{}],baseBottomEffect:[function(e,t){"use strict";cc._RF.push(t,"5b14a5l7ghEWIcnO+/6DE/H","baseBottomEffect"),cc.Class({extends:e("baseEffectDealer"),properties:{id:0,data:null,turn:0,bottom:null},init:function(e,t,n){this.id=e.id,this.data=e,this.turn=t,this.bottom=n},refresh:function(){},onRefresh:function(){this.refresh()},turnBegin:function(){},onTurnBegin:function(){this.turnBegin()},turnEnd:function(){},onTurnEnd:function(){this.turnEnd()},nextStage:function(){this.data.haveTurn&&(this.turn-=1,this.turn<=0&&(this.onCostSkill(),this.removeBottom()))},onNextStage:function(){this.nextStage()},onCostSkill:function(){this.costSkill()},costSkill:function(){this.data.costSkill.length>0&&this.dealEffect(this.data.costSkill,this)},removeBottom:function(){this.bottom.removeBottomEffect(this.id)},checkRemovable:function(){return!!this.data.removable},dealEffect:function(e,t){config.UICtrl.getUIComponent("game").chessDealer.dealEffect(e,t)}}),cc._RF.pop()},{baseEffectDealer:"baseEffectDealer"}],baseData:[function(e,t){"use strict";cc._RF.push(t,"2ccb8o0i2ZOQqpnBqYY7nRL","baseData"),cc.Class({extends:cc.Component,properties:{currentHP:0,MaxHP:0,shield:0,buffList:[],ATKFix:0,hurtFix:0,additionalBaseATK:0,damageFix:0,invincible:!1,UI:null},addBuff:function(e,t){var n=config.tools.getBuffDataByID(e);if(n.turnBuff){for(var o=0;o<this.buffList.length;o++)if(this.buffList[o].component.id==e)return void this.buffList[o].component.countChange(t);(a=this.UI.addBuff(n.script)).component.onInitData(e,t,n,this),this.buffList.push(a)}else for(var i=0;i<t;i++){var a;(a=this.checkBuff(e))?a.component.countChange(1):((a=this.UI.addBuff(n.script)).component.onInitData(e,1,n,this),this.buffList.push(a))}},checkBuff:function(e){for(var t=0;t<this.buffList.length;t++)if(this.buffList[t].component.id==e)return this.buffList[t];return!1},removeBuff:function(e){for(var t=0;t<this.buffList.length;t++)this.buffList[t].component.id==e&&(this.buffList[t].ui.destroy(),this.buffList.splice(t,1))},getBuff:function(e){for(var t=0;t<this.buffList.length;t++)if(this.buffList[t].component.id==e)return this.buffList[t].component;return null},checkBuffList:function(e){switch(e){case"turnBegin":for(var t=0;t<this.buffList.length;t++)this.buffList[t].component.onRefresh(),this.buffList[t].component.onTurnBegin();break;case"turnEnd":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onTurnEnd(),this.buffList[t].component.nextStage();break;case"getATK":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onAttack();break;case"getAttack":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onGetHurt();break;case"remove":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onRemove()}},getAttack:function(){},getHeal:function(e){this.currentHP+=e,this.currentHP>=this.MaxHP&&(this.currentHP=this.MaxHP),this.UI.refreshLife()},getShield:function(e){this.shield+=e,this.shield>=this.MaxHP&&(this.shield=this.MaxHP),this.UI.refreshShield()},changeMaxHP:function(e){this.MaxHP+=e,this.currentHP>this.MaxHP&&(this.currentHP=this.MaxHP),this.UI.refreshLife()},getATk:function(){}}),cc._RF.pop()},{}],baseEffectDealer:[function(e,t){"use strict";cc._RF.push(t,"42be1O/c6pLt4iXpri/ivcA","baseEffectDealer"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.game=config.UICtrl.getUIComponent("game"),this.playerData=this.game.playerData,this.enemyData=this.game.enemyData,this.board=config.UICtrl.getUIComponent("boardLayer")},checkBaseEffect:function(e,t,n){switch(e.type){case 0:var o=this.enemyData.getATK()*e.num1/100;o*=(100+this.enemyData.damageFix)/100,(r=n.getAttack(Math.floor(o)))>0&&(config.animCtrl.playHitEffect(t),config.animCtrl.jumpNum(r,n.node));break;case 1:var i=t.base.element;o=this.playerData.getATK(t)*e.num1/100,o*=(100+this.playerData.getDamageFix(i))/100,o*=config.playerInfoManager.elementCounter(i,this.enemyData.elementType),(l=n.getAttack(Math.floor(o)))>0&&(config.animCtrl.playHitEffect(t.hit),config.animCtrl.jumpNum(l,n.node));break;case 2:o=this.playerData.getMasterATK()*e.num1/100,o*=(100+this.playerData.damageFix)/100,n.getAttack(Math.floor(o)),t&&t.buff&&50001==t.buff.data.id&&console.log("\u8ffd\u8e2a\u98de\u5251\u4f24\u5bb3"+o);break;case 3:case 4:case 5:break;case 6:var a=0;if((c=this.board.getSkillChess(e.num1)).length>0){for(var s=0;s<c.length;s++)c[s]&&(config.objectPool.put("chessPool",c[s].middle),c[s].middle=null,a+=c[s].level);a>0&&(o=this.enemyData.getATK()*a*e.num2/100,o*=(100+this.enemyData.damageFix)/100,(r=n.getAttack(Math.floor(o)))>0&&(config.animCtrl.playHitEffect(t),config.animCtrl.jumpNum(r,n.node)))}break;case 7:var c;if((c=this.board.getSkillChess(e.num1)).length>0){for(s=0;s<c.length;s++)c[s]&&(c[s].level=1,c[s].setPic(c[s].getChessPic()));var r;o=this.enemyData.getATK()*c.length*e.num2/100,o*=(100+this.enemyData.damageFix)/100,(r=n.getAttack(Math.floor(o)))>0&&(config.animCtrl.playHitEffect(t),config.animCtrl.jumpNum(r,n.node))}break;case 100:n.getHeal(e.num1),t&&t.hit&&config.animCtrl.playHitEffect(t.hit);break;case 101:break;case 102:n.getShield(e.num1),t&&t.hit&&config.animCtrl.playHitEffect(t.hit);break;case 103:n.changeEnergy(e.num1);break;case 104:break;case 105:n.ATKFix+=e.num1;break;case 106:case 107:case 108:break;case 109:n.CSFix&&(n.CSFix+=e.num1);break;case 110:n.CSDFix&&(n.CSDFix+=e.num1);break;case 111:n.changeMaxHP(e.num1),n.getHeal(e.num1);break;case 112:n.hurtFix+=e.num1;break;case 113:break;case 114:n.addBuff(e.num1,e.num2);break;case 115:break;case 116:e.num1?this.enemyData.invincible=!0:this.enemyData.invincible=!1;break;case 117:for(var s in config.gameInfo.chessData)config.gameInfo.chessData[s]&&(config.gameInfo.chessData[s].removeEnergyEfficient+=e.num1);break;case 118:for(var s in config.gameInfo.chessData)config.gameInfo.chessData[s]&&(config.gameInfo.chessData[s].comboEnergyEfficient+=e.num1);break;case 119:break;case 120:var l=Math.floor(Math.random()*config.gameInfo.mapHigh);for(s=0;s<config.gameInfo.mapWide;s++)this.board.addBottomEffectToMap(e,s,l);config.animCtrl.playHitEffect(t);break;case 121:break;case 122:for(s=0;s<e.num2;s++){var f=this.board.getRandomCell();f.level<=4?this.board.setSpecialChess(f,e.num1):s--}break;case 123:break;case 124:t.bottom&&(config.objectPool.put("chessPool",t.bottom.middle),t.bottom.middle=null);break;case 125:n.getBuff(e.num1).deleteLayer(e.num2);break;case 126:n.damageFix&&(n.damageFix+=e.num1);break;case 127:case 128:case 129:break;case 130:n.fireATKFix&&(n.fireATKFix+=e.num1);break;case 131:break;case 132:l=Math.floor(n.MaxHP*e.num1/100),n.getHeal(l),t&&t.hit&&config.animCtrl.playHitEffect(t.hit);break;case 133:e.num1?this.board.silence=!1:this.board.silence=!0;break;case 134:var h=this.board.getSomeRandomCell(e.num2);for(s=0;s<h.length;s++)h[s].addBottomEffect(e.num1,0)}},checkCondition:function(e,t){switch(e.condition){case 0:return!0;case 1:return 100*Math.random<=e.num3;case 2:case 3:case 4:case 5:return!0;case 6:return t.damage>=e.num3;case 7:return t.buff.layer>=e.num2;case 8:return!this.board.checkSpecialChess(e.num3)}},getTarget:function(e){switch(e){case 0:return this.playerData;case 1:return this.enemyData;case 2:return this.board}},getBuffTarget:function(e,t){var n=t.buff;switch(e){case 0:return"player"==n.parent.node.name?this.playerData:this.enemyData;case 1:return"player"==n.parent.node.name?this.enemyData:this.playerData;case 2:return this.board}}}),cc._RF.pop()},{}],boardLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"78c1fr9UJtEbaKQfVREeVZY","boardLayerCtrl");var n=cc.Enum({play:1,selection:2}),o=cc.Enum({onBegin:1,begin:2,onEnd:3,end:4});cc.Class({extends:e("./cellBase"),properties:{controlMode:{default:n.play,type:n},stage:{default:o.begin,type:o},silence:!1},onLoad:function(){config.UICtrl.UIList.boardLayer=this.node,this.mapLayer=this.node.getChildByName("mapLayer"),this.bottomLayer=this.node.getChildByName("bottomLayer"),this.coverLayer=this.node.getChildByName("coverlayer"),this.checking=!1,this.checkingBottom=!1,this.moved=!1,this.combo=0,this.bottomEffectCount=0,this.target=null,this.movedChess=null,this.bemovedChess=null,this.chessDir=[],this.dir={left:0,right:1,up:2,down:3},config.objectPool.creatNewPool("chessPool"),this.initEvent(),this.initIndexMap(),this.initBottom(),this.startGame()},initEvent:function(){var e=this;config.eventDelegate.addEvent("\u73a9\u5bb6\u56de\u5408\u5f00\u59cb\u65f6",function(){e.checkAllBottomEffect("turnBegin"),e.checkingBottom=!0}),config.eventDelegate.addEvent("\u73a9\u5bb6\u56de\u5408\u5f00\u59cb",function(){e.checking=!1,config.UICtrl.getUIComponent("game").playerData.checkBuffList("turnBegin")}),config.eventDelegate.addEvent("\u73a9\u5bb6\u56de\u5408\u7ed3\u675f\u65f6",function(){e.checkAllBottomEffect("turnEnd"),e.checking=!0,e.checkingBottom=!0}),config.eventDelegate.addEvent("\u73a9\u5bb6\u56de\u5408\u7ed3\u675f",function(){config.UICtrl.getUIComponent("game").checkGameResult()||(e.checking=!0,config.UICtrl.getUIComponent("game").playerData.checkBuffList("turnEnd"),config.eventDelegate.dispatchEvent("\u654c\u4eba\u56de\u5408\u5f00\u59cb"))})},setControlMode:function(e){switch(e){case 1:this.controlMode=n.play;break;case 2:this.controlMode=n.selection}},initIndexMap:function(){this.high=5,config.gameInfo.mapHigh=5,this.wide=7,config.gameInfo.mapWide=7,this.map=[];for(var e=0;e<this.high;e++){this.map[e]=[];for(var t=0;t<this.wide;t++)this.map[e][t]=this.getMapCell([t,e])}},initBottom:function(){for(var e=0,t=0;t<this.high;t++)for(var n=0;n<this.wide;n++){var o;o=e%2==0?this.getSet("\u683c\u5b50\u6d45"):this.getSet("\u683c\u5b50\u6df1"),this.putTouchCallBack(o),this.mapLayer.addChild(o),this.map[t][n].bottom=o,e++}},initElement:function(){for(var e=0;e<this.high;e++)for(var t=0;t<this.wide;t++)this.map[e][t].setRandomType(),this.map[e][t].level=1,e>0&&this.map[e][t].type==this.map[e-1][t].type?t--:t>0&&this.map[e][t].type==this.map[e][t-1].type&&t--},drawMap:function(){this.addChessToPool(40);for(var e=0;e<this.high;e++)for(var t=0;t<this.wide;t++){var n=this.map[e][t].getChessPic(),o=config.objectPool.get("chessPool");this.map[e][t].middle=o,this.map[e][t].setPic(n),this.mapLayer.addChild(o),this.map[e][t].initPosition()}},addChessToPool:function(e){for(var t=0;t<e;t++){var n=cc.instantiate(config.warehouse.prefabList.chess);config.objectPool.put("chessPool",n)}},putTouchCallBack:function(e){e.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),e.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),e.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},startGame:function(){for(this.initElement();!this.checkRemovable();)this.initElement();this.drawMap()},touchStart:function(e){if(this.controlMode==n.play){if(this.checking)return;this.moved=!1}this.target=e.target},touchMove:function(e){if(this.controlMode==n.play){if(this.checking)return;if(e.touch.getDelta().x>6)return void this.checkDir(this.dir.right);if(e.touch.getDelta().x<-6)return void this.checkDir(this.dir.left);if(e.touch.getDelta().y>6)return void this.checkDir(this.dir.up);if(e.touch.getDelta().y<-6)return void this.checkDir(this.dir.down)}},touchEnd:function(){if(this.controlMode==n.play){if(this.checking||this.moved)return;this.cast()}if(this.controlMode==n.selection){var e=config.tools.getChessIndex(this.target,this.map);config.eventDelegate.checkEvent("\u68c0\u67e5\u68cb\u5b50")?config.eventDelegate.dispatchEvent("\u68c0\u67e5\u68cb\u5b50",this.map[e[1]][e[0]]):config.eventDelegate.dispatchEvent("\u9009\u62e9\u68cb\u5b50",this.map[e[1]][e[0]])}},cast:function(){var e=config.tools.getChessIndex(this.target,this.map);this.map[e[1]][e[0]].level>1&&(this.checking=!0,this.dealGroup([this.map[e[1]][e[0]]]))},checkRemovable:function(){for(var e=0;e<this.high;e++)for(var t=0;t<this.wide;t++){if(e>0&&this.map[e-1][t].type&&this.map[e][t].type){this.exchangeMapContent(t,e,t,e-1);var n=this.getRemovableChess(this.map);if(this.exchangeMapContent(t,e,t,e-1),n.length>0)return this.chessDir=[this.map[e][t],this.dir.down,this.map[e-1][t],n[0].type],!0}if(e<this.high-1&&this.map[e+1][t].type&&this.map[e][t].type&&(this.exchangeMapContent(t,e,t,e+1),n=this.getRemovableChess(this.map),this.exchangeMapContent(t,e,t,e+1),n.length>0))return this.chessDir=[this.map[e][t],this.dir.up,this.map[e+1][t],n[0].type],!0;if(t>0&&this.map[e][t-1].type&&this.map[e][t].type&&(this.exchangeMapContent(t,e,t-1,e),n=this.getRemovableChess(this.map),this.exchangeMapContent(t,e,t-1,e),n.length>0))return this.chessDir=[this.map[e][t],this.dir.left,this.map[e][t-1],n[0].type],!0;if(t<this.wide-1&&this.map[e][t+1].type&&this.map[e][t].type&&(this.exchangeMapContent(t,e,t+1,e),n=this.getRemovableChess(this.map),this.exchangeMapContent(t,e,t+1,e),n.length>0))return this.chessDir=[this.map[e][t],this.dir.right,this.map[e][t+1],n[0].type],!0}return!1},checkDir:function(e){if(this.target&&!this.checking){this.checking=!0,this.moved=!0;var t=config.tools.getChessIndex(this.target,this.map),n=t[0],o=t[1],i=void 0,a=void 0;switch(e){case this.dir.up:o<config.gameInfo.mapHigh-1&&(i=n,a=o+1);break;case this.dir.down:o>0&&(i=n,a=o-1);break;case this.dir.left:n>0&&(i=n-1,a=o);break;case this.dir.right:n<config.gameInfo.mapWide-1&&(i=n+1,a=o)}i>=0&&a>=0?this.map[o][n].middle&&this.map[a][i].middle&&(this.exchangeMapContent(n,o,i,a),this.result=this.getRemovableChess(this.map),this.result.length>0?(this.movedChess=this.map[o][n],this.bemovedChess=this.map[a][i],this.removeSuccess(n,o,i,a)):(this.exchangeMapContent(n,o,i,a),this.removeFail(n,o,i,a))):this.checking=!1}},exchangeMapContent:function(e,t,n,o){var i=this.map[t][e].level;this.map[t][e].level=this.map[o][n].level,this.map[o][n].level=i;var a=this.map[t][e].type;this.map[t][e].type=this.map[o][n].type,this.map[o][n].type=a;var s=this.map[t][e].middle;this.map[t][e].middle=this.map[o][n].middle,this.map[o][n].middle=s;var c=this.map[t][e].specialChessData;this.map[t][e].specialChessData=this.map[o][n].specialChessData,this.map[o][n].specialChessData=c},removeSuccess:function(e,t,n,o){var i=this;cc.tween(this.map[t][e].middle).to(.15,{position:this.map[o][n].middle.position}).start(),cc.tween(this.map[o][n].middle).to(.15,{position:this.map[t][e].middle.position}).call(function(){i.removeChess()}).start()},removeFail:function(e,t,n,o){var i=this;cc.tween(this.map[t][e].middle).to(.15,{position:this.map[o][n].middle.position}).to(.15,{position:this.map[t][e].middle.position}).start(),cc.tween(this.map[o][n].middle).to(.15,{position:this.map[t][e].middle.position}).to(.15,{position:this.map[o][n].middle.position}).call(function(){i.map[t][e].resetPosition(),i.map[o][n].resetPosition(),i.checking=!1}).start()},removeChess:function(){function e(e,t){for(var n=0;n<e.length;n++)for(var o=0;o<t.length;o++)if(e[n]==t[o])return!0;return!1}if(this.result.length>0){var t=this.result.shift();if(t.length<=0)return void this.removeChess();for(var n=0;n<this.result.length;n++)if(e(t,this.result[n])){var o=this.result[n];t=t.concat(o),this.result[n]=[]}t=Array.from(new Set(t)),this.dealGroup(t)}else this.fixMap()},removeGroup:function(e){for(var t=0;t<e.length;t++)config.objectPool.put("chessPool",e[t].middle),e[t].middle=null;this.fixMap()},dealGroup:function(e){for(var t=e[0],n=0;n<e.length;n++)e[n]!=this.movedChess&&e[n]!=this.bemovedChess||(t=e[n]);for(var o=0;o<e.length;o++)for(var i=e[o].getAroundIndex(),a=0;a<i.length;a++){var s=i[a][0],c=i[a][1];this.map[c][s].type>5&&this.map[c][s].middle&&this.map[c][s].specialChessData&&this.map[c][s].specialChessData.removable&&(config.objectPool.put("chessPool",this.map[c][s].middle),this.map[c][s].middle=null,this.map[c][s].type=0,this.map[c][s].checkSpecialChessEffect("cost"))}for(s=0;s<e.length;s++)if(e[s].bottomEffect.length>0){var r=e[s].bottomEffect;for(c=0;c<r.length;c++)r[c].component.checkRemovable()&&(r[c].component.onCostSkill(),r[c].component.removeBottom())}for(n=0;n<e.length;n++)1==e[n].level&&config.animCtrl.chessGroup.push(e[n]);config.animCtrl.chessGroup.length>0&&config.animCtrl.creatLevel1Anim();for(var l=0;l<e.length;l++)e[l].level>=2&&config.animCtrl.chessGroup.push(e[l]);config.animCtrl.chessGroup.length>0&&config.animCtrl.creatHigherLevelAnim(),1==e.length||(3==e.length?(config.eventDelegate.dispatchEvent("\u4e09\u6d88",e),config.eventDelegate.dispatchEvent("\u666e\u901a\u6d88\u9664",e),this.combo>0&&config.eventDelegate.dispatchEvent("\u8fde\u6d88",[e,this.combo])):4==e.length?(config.eventDelegate.dispatchEvent("\u56db\u6d88",e),config.eventDelegate.dispatchEvent("\u666e\u901a\u6d88\u9664",e),config.dj.playEffect(config.warehouse.sound["\u4e09\u6d88\u97f3\u6548"],1),this.combo>0&&config.eventDelegate.dispatchEvent("\u8fde\u6d88",[e,this.combo]),this.silence||(t.levelUp=!0,t.levelToChange=2)):e.length>=5&&(config.eventDelegate.dispatchEvent("\u4e94\u6d88",e),config.eventDelegate.dispatchEvent("\u666e\u901a\u6d88\u9664",e),config.dj.playEffect(config.warehouse.sound["\u4e94\u6d88"],1),this.combo>0&&config.eventDelegate.dispatchEvent("\u8fde\u6d88",[e,this.combo]),this.silence||(t.levelUp=!0,t.levelToChange=3))),config.animCtrl.playWaitingAnim()},fixMap:function(){for(var e=0;e<this.wide;e++)for(var t=0;t<this.high;t++)if(this.map[t][e].levelUp){var n=this.creatChess(e,t,this.map[t][e].levelToChange,this.map[t][e].type);this.mapLayer.addChild(n.middle),n.resetPosition(),this.map[t][e].levelUp=!1}for(var o=0;o<this.wide;o++)for(var i=this.high-1;i>=0;i--)if(!this.map[i][o].middle&&(this.map[i][o].onseat=!1,i>0)){for(var a=i-1;!this.map[a][o].middle&&a>0;)a--;this.exchangeMapContent(o,i,o,a),this.map[i][o].onseat=!1,this.map[a][o].onseat=!1}for(var s=0;s<this.wide;s++)for(var c=0;c<this.high;c++)this.map[c][s].middle||(n=this.creatChess(s,c,1),this.mapLayer.addChild(n.middle),n.resetPosition(),n.middle.y-=250);this.fixAnim()},creatChess:function(e,t,n,o){this.map[t][e].level=n,o>=0?this.map[t][e].type=o:this.map[t][e].setRandomType();var i=this.map[t][e].getChessPic();return config.objectPool.checkSize("chessPool",5)||this.addChessToPool(5),this.map[t][e].middle=config.objectPool.get("chessPool"),this.map[t][e].setPic(i),this.map[t][e]},fixAnim:function(){for(var e=this,t=0,n=0;n<this.wide;n++)for(var o=0;o<this.high;o++)if(!this.map[o][n].onseat){t++;var i=this.map[o][n].bottom.position;cc.tween(this.map[o][n].middle).to(.5,{position:i},{easing:"quadIn"}).call(function(){0!=--t||e.nextStage()}).start()}0!=t||this.nextStage()},nextStage:function(){this.result=this.getRemovableChess(this.map),this.result.length>0?(this.combo++,this.removeChess()):(this.combo=0,this.stage==o.onBegin?this.stage=o.begin:this.stage==o.begin?this.stage=o.onEnd:this.stage==o.onEnd?this.stage=o.end:this.stage==o.end&&(this.stage=o.onBegin),this.checkStage())},checkStage:function(){switch(this.stage){case o.onBegin:config.eventDelegate.dispatchEvent("\u73a9\u5bb6\u56de\u5408\u5f00\u59cb\u65f6");break;case o.begin:config.eventDelegate.dispatchEvent("\u73a9\u5bb6\u56de\u5408\u5f00\u59cb");break;case o.onEnd:config.eventDelegate.dispatchEvent("\u73a9\u5bb6\u56de\u5408\u7ed3\u675f\u65f6");break;case o.end:config.eventDelegate.dispatchEvent("\u73a9\u5bb6\u56de\u5408\u7ed3\u675f")}},addBottomEffectToMap:function(e,t,n){this.map[n][t].addBottomEffect(e.num1,e.num2)},checkAllBottomEffect:function(e){for(var t=0;t<this.wide;t++)for(var n=0;n<this.high;n++)this.map[n][t].bottomEffect.length>0&&(this.bottomEffectCount+=this.map[n][t].bottomEffect.length,this.map[n][t].checkEffect(e))},getSkillChess:function(e){for(var t=[],n=0;n<this.wide;n++)for(var o=0;o<this.high;o++)if(this.map[o][n].level>1&&(t.push(this.map[o][n]),t.length>=e))return t;return t},setSpecialChess:function(e,t){var n=config.playerInfoManager.getSpecialChessById(t);e.setSpecialChess(n)},checkSpecialChess:function(e){for(var t=0;t<this.wide;t++)for(var n=0;n<this.high;n++)if(this.map[n][t].type==e)return!0;return!1},getSomeRandomCell:function(e){var t=[];function n(e){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}for(var o=0;o<e;o++){var i=Math.floor(Math.random()*this.wide),a=Math.floor(Math.random()*this.high);n(this.map[a][i])?o--:t.push(this.map[a][i])}return t},getRandomCell:function(){var e=Math.floor(Math.random()*this.wide),t=Math.floor(Math.random()*this.high);return this.map[t][e]},update:function(){this.checkingBottom&&0==this.bottomEffectCount&&(this.checkingBottom=!1,this.fixMap())}}),cc._RF.pop()},{"./cellBase":"cellBase"}],bottomWarning:[function(e,t){"use strict";cc._RF.push(t,"2c674hsaVVCAa3bezRWGpWo","bottomWarning"),cc.Class({extends:e("baseBottomEffect"),properties:{}}),cc._RF.pop()},{baseBottomEffect:"baseBottomEffect"}],boxLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"c7fd4/ac5VDfpki5OiTw2uH","boxLayerCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.boxLevelUped=!1,this.rewordList=null,this.bronzeBox=this.node.getChildByName("bronzeBox"),this.silverBox=this.node.getChildByName("silverBox"),this.goldBox=this.node.getChildByName("goldBox"),this.levelProgress=this.node.getChildByName("levelProgress"),config.tools.addCallBackToButton(this.node,"boxLayerCtrl","buyBronzeBox",null,this.bronzeBox.getChildByName("buy")),config.tools.addCallBackToButton(this.node,"boxLayerCtrl","buySilverBox",null,this.silverBox.getChildByName("buy")),config.tools.addCallBackToButton(this.node,"boxLayerCtrl","buyGoldBox",null,this.goldBox.getChildByName("buy")),this.refreshProgress()},refreshProgress:function(){var e=config.warehouse.json.boxData,t=this.checkProgress();this.levelProgress.getChildByName("level").getComponent(cc.Label).string="LV"+t.level,t.level>0?this.levelProgress.getChildByName("progress").getComponent(cc.ProgressBar).progress=(config.playerInfo.boxProgress-e[t.level-1].levelUpRequire)/(t.levelUpRequire-e[t.level-1].levelUpRequire):this.levelProgress.getChildByName("progress").getComponent(cc.ProgressBar).progress=config.playerInfo.boxProgress/t.levelUpRequire},boxProgressGrow:function(e){var t=config.warehouse.json.boxData,n=this.checkProgress();config.playerInfo.boxProgress+=e,config.playerInfo.boxProgress>=t[n.level].levelUpRequire&&(this.boxLevelUped=!0),this.refreshProgress()},checkProgress:function(){var e=config.playerInfo.boxProgress,t=config.warehouse.json.boxData;return e<t[0].levelUpRequire?t[0]:e<t[1].levelUpRequire?t[1]:e<t[2].levelUpRequire?t[2]:e<t[3].levelUpRequire?t[3]:e<t[4].levelUpRequire?t[4]:e<t[5].levelUpRequire?t[5]:e<t[6].levelUpRequire?t[6]:e<t[7].levelUpRequire?t[7]:e<t[8].levelUpRequire?t[8]:e<t[9].levelUpRequire?t[9]:(t[10].levelProgress,t[10])},buyBronzeBox:function(){config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1);var e=this.checkProgress();this.initProbability(e.bronzeProbability),this.getFragments(e.bronzeOutput),this.boxProgressGrow(30),this.showBoxOpenlayer()},buySilverBox:function(){config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1);var e=this.checkProgress();this.initProbability(e.sliverProbability),this.getFragments(e.sliverOutput),this.boxProgressGrow(400),this.showBoxOpenlayer()},buyGoldBox:function(){config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1);var e=this.checkProgress();this.initProbability(e.goldProbability),this.getFragments(e.goldOutput),this.boxProgressGrow(1e3),this.showBoxOpenlayer()},initProbability:function(e){this.normal=e.normal,this.rare=e.rare,this.epic=e.epic},getFragments:function(e){for(var t={},n=0;n<e;n++){var o=100*Math.random();if(o<=this.epic)t[i=this.getEpicFragment()]?t[i]+=1:t[i]=1;else if(o<=this.epic+this.rare)t[i=this.getRareFragment()]?t[i]+=1:t[i]=1;else{var i;t[i=this.getNormalFragment()]?t[i]+=1:t[i]=1}}for(var n in t)config.playerInfoManager.addFragment(n,t[n]);this.rewordList=t},getEpicFragment:function(){var e=config.playerInfo.epicPool;return e[Math.floor(e.length*Math.random())]},getRareFragment:function(){var e=config.playerInfo.rarePool;return e[Math.floor(e.length*Math.random())]},getNormalFragment:function(){var e=config.playerInfo.normalPool;return e[Math.floor(e.length*Math.random())]},showBoxOpenlayer:function(){config.UICtrl.addUI("boxOpenLayer",config.UICtrl.findUI("other"),this.node)}}),cc._RF.pop()},{}],boxOpenLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"4ad23anHE5IR7SCK0CNK2Mz","boxOpenLayerCtrl"),cc.Class({extends:e("otherUIBase"),properties:{},init:function(e){this.source=e},onLoad:function(){var e=this;this.mask=this.node.getChildByName("mask"),this.title=this.node.getChildByName("title"),this.rewordContent=this.node.getChildByName("rewordContent"),this.content=this.rewordContent.getChildByName("scroll").getChildByName("view").getChildByName("content"),this.continue=this.node.getChildByName("continue"),this.case=this.node.getChildByName("\u7bb1\u5b50"),this.open=this.node.getChildByName("open"),config.tools.addAnimationToNode(this.case,config.warehouse.atlas["\u5f00\u7bb1"].getSpriteFrames(),"\u5f00\u7bb1",cc.WrapMode.Default,1),this.case.getComponent(cc.Animation).on("stop",function(){e.showReword(),e.mask.on(cc.Node.EventType.TOUCH_END,e.skip,e),e.mask.off(cc.Node.EventType.TOUCH_END,e.openBox,e)},this)},onEnable:function(){this.index=0,this.currentTween=null,this.mask.on(cc.Node.EventType.TOUCH_END,this.openBox,this),this.initRewordContent(),this.case.active=!0,this.case.getComponent(cc.Sprite).spriteFrame=config.warehouse.atlas["\u5f00\u7bb1"].getSpriteFrame("\u5f00\u7bb1\u52a8\u753b\u5e27_1"),this.open.active=!0,this.title.active=!1,this.rewordContent.active=!1,this.continue.active=!1},initRewordContent:function(){for(var e=0;e<this.content.children.length;e++)this.content.children[e].destroy();var t=this.source.getComponent("boxLayerCtrl").rewordList;for(var e in t){var n=new cc.Node;this.content.addChild(n);var o=cc.instantiate(config.warehouse.prefabList.chessItem);n.addChild(o),o.getComponent("chessItemCtrl").id=e,o.getComponent("chessItemCtrl").showNum(t[e])}},playRewordAnim:function(){for(var e=0;e<this.content.children.length;e++)this.content.children[e].scale=0;this.playNextChessAnim()},playNextChessAnim:function(){var e=this;this.content.children[this.index].scale=1,this.currentTween=cc.tween(this.content.children[this.index]).to(.35,{scale:1.5},{easing:"quadOut"}).call(function(){config.dj.playEffect(config.warehouse.sound["\u8df3\u5361"],1)}).to(.15,{scale:1},{easing:"quadIn"}).call(function(){e.index+=1,e.index<e.content.children.length?(e.index%4<=0&&console.log("\u4e0b\u6eda"),e.playNextChessAnim()):(e.index=0,e.mask.off(cc.Node.EventType.TOUCH_END,e.skip,e),e.mask.on(cc.Node.EventType.TOUCH_END,e.leave,e))}).start()},openBox:function(){this.case.getComponent(cc.Animation).play("\u5f00\u7bb1")},showReword:function(){this.case.active=!1,this.open.active=!1,this.title.active=!0,this.rewordContent.active=!0,this.continue.active=!0,this.playRewordAnim();for(var e=0;e<this.content.children.length;e++)this.content.children[e].getChildByName("chessItem").getComponent("chessItemCtrl").refreshInfo()},skip:function(){this.currentTween&&this.currentTween.stop();for(var e=0;e<this.content.children.length;e++)this.content.children[e].scale=1;this.mask.off(cc.Node.EventType.TOUCH_END,this.skip,this),this.mask.on(cc.Node.EventType.TOUCH_END,this.leave,this)},leave:function(){this.mask.off(cc.Node.EventType.TOUCH_END,this.leave,this),this.cancel()}}),cc._RF.pop()},{otherUIBase:"otherUIBase"}],buffBase:[function(e,t){"use strict";cc._RF.push(t,"7311cUYKvZJTaE1nXo6tDE5","buffBase"),cc.Class({extends:e("./buffUICtrl"),properties:{id:0,layer:0,duration:0,data:null,parent:null},nextStage:function(){this.data.turnBuff?this.duration>0&&(this.duration-=1,this.refreshCount(this.duration),this.duration<=0&&this.onBuffRemove()):this.data.unsustainable?(this.layer>0&&(this.layer-=1),this.refreshCount(this.layer),this.layer<=0&&this.onBuffRemove()):this.layer<=0&&this.onBuffRemove()},onInitData:function(e,t,n,o){this.initData(e,t,n,o)},initData:function(e,t,n,o){this.id=e,this.data=n,this.parent=o,this.refreshName(n.buffName),this.data.turnBuff?this.duration=t:this.layer=t,this.refreshCount(t),this.onGetSkill()},countChange:function(e){this.data.turnBuff?this.onCoverDutation(e):this.onAddLayer(e)},onCoverDutation:function(e){this.coverDuration(e)},coverDuration:function(e){this.duration=e,this.duration>0&&this.refreshCount(this.duration)},onAddLayer:function(e){this.addLayer(e)},addLayer:function(e){this.layer+=e,this.layer>0&&this.refreshCount(this.layer),this.onGetSkill()},deleteLayer:function(e){if(!(this.layer<=0)){this.layer-=e;for(var t=0;t<e;t++)this.onCostSkill();this.layer<0&&(this.layer=0),this.refreshCount(this.layer)}},onBuffRemove:function(){this.onCostSkill(),this.buffRemove()},buffRemove:function(){this.parent.removeBuff(this.id)},onRefresh:function(){this.refresh()},refresh:function(){this.data.refreshable&&(this.costSkill(),this.getSkill())},onGetSkill:function(){this.getSkill()},getSkill:function(){if(this.data.getSkill.length){var e={damage:null,buff:this};this.dealEffect(this.data.getSkill,e)}},onCostSkill:function(){this.costSkill()},costSkill:function(){if(this.data.costSkill.length){var e={damage:null,buff:this};this.dealEffect(this.data.costSkill,e)}},onTurnEnd:function(){this.turnEndSkill()},turnEndSkill:function(){if(this.data.turnEndSkill.length){var e={damage:null,buff:this};this.dealEffect(this.data.turnEndSkill,e)}},onTurnBegin:function(){this.turnBeginSkill()},turnBeginSkill:function(){if(this.data.turnBeginSkill.length){var e={damage:null,buff:this};this.dealEffect(this.data.turnBeginSkill,e)}},onGetHurt:function(e){this.getHurtSkill(e)},getHurtSkill:function(e){if(this.data.getHurtSkill.length){var t={damage:e,buff:this};this.dealEffect(this.data.getHurtSkill,t)}},onAttack:function(){this.attackSkill()},attackSkill:function(){if(this.data.attackSkill.length){var e={damage:null,buff:this};this.dealEffect(this.data.attackSkill,e)}},onRemove:function(){this.removeSkill()},removeSkill:function(){if(this.data.removeSkill.length){var e={damage:null,buff:this};this.dealEffect(this.data.removeSkill,e)}},dealEffect:function(e,t){config.UICtrl.getUIComponent("game").buffDealer.dealEffect(e,t)}}),cc._RF.pop()},{"./buffUICtrl":"buffUICtrl"}],buffDealer:[function(e,t){"use strict";cc._RF.push(t,"f5a45jeEnRMe4suJn+km2Ug","buffDealer"),cc.Class({extends:e("baseEffectDealer"),properties:{},onLoad:function(){this.enemyData=this.node.getChildByName("enemy").getComponent("enemyData"),this.playerData=this.node.getChildByName("player").getComponent("playerData"),this.board=this.node.getChildByName("boardCover").getChildByName("boardLayer").getComponent("boardLayerCtrl")},dealEffect:function(e,t){for(var n=0;n<e.length;n++)this.checkEffect(e[n],t)},checkEffect:function(e,t){if(!e.condition||this.checkCondition(e,t)){var n=this.getBuffTarget(e.target,t);this.checkBaseEffect(e,t,n)}},getTarget:function(e,t){switch(e){case 0:return"player"==t.parent.node.name?this.playerData:this.enemyData;case 1:return"player"==t.parent.node.name?this.enemyData:this.playerData;case 2:return this.board}}}),cc._RF.pop()},{baseEffectDealer:"baseEffectDealer"}],buffUICtrl:[function(e,t){"use strict";cc._RF.push(t,"67318TkDz1Ghq0fOzGu2oFZ","buffUICtrl"),cc.Class({extends:cc.Component,properties:{},refreshName:function(e){this.node.getChildByName("name").getComponent(cc.Label).string=e},refreshCount:function(e){this.node.getChildByName("count").getComponent(cc.Label).string=e}}),cc._RF.pop()},{}],burn:[function(e,t){"use strict";cc._RF.push(t,"892d9v3YEFJ9KJfLlrcxLDX","burn"),cc.Class({extends:e("./buffBase"),properties:{},onTurnEnd:function(){console.log("\u71c3\u70e7"),this.turnEndSkill()}}),cc._RF.pop()},{"./buffBase":"buffBase"}],cellBase:[function(e,t){"use strict";cc._RF.push(t,"eb3bbvRdGdNQpKkWoez/syi","cellBase"),cc.Class({extends:e("baseEffectDealer"),properties:{},onLoad:function(){this.board=config.UICtrl.getUIComponent("boardLayer")},getMapCell:function(e){return new n(e)},getRemovableChess:function(e){for(var t=[],n=[],o=config.gameInfo.mapWide,i=config.gameInfo.mapHigh,a=0;a<o;a++){t=[];for(var s=0;s<i;s++)t.length?e[s][a].type==t[0].type?t.push(e[s][a]):(t.length>=3&&n.push(t),(t=[]).push(e[s][a])):t.push(e[s][a]);t.length>=3&&n.push(t),t=[]}for(var c=0;c<i;c++){t=[];for(var r=0;r<o;r++)t.length?e[c][r].type==t[0].type?t.push(e[c][r]):(t.length>=3&&n.push(t),(t=[]).push(e[c][r])):t.push(e[c][r]);t.length>=3&&n.push(t),t=[]}return n},chooseGoods:function(e){var t=cc.instantiate(config.warehouse.prefabList.chess);switch(e){case"red":t.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("red"),config.red+=1;break;case"blue":t.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("orange"),config.blue+=1;break;case"green":t.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("green"),config.green+=1;break;case"yellow":t.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("yellow"),config.yellow+=1;break;case"purple":t.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("purple"),config.purple+=1}return t.getChildByName("pic").getComponent(cc.Sprite).trim=!1,t.getChildByName("pic").getComponent(cc.Sprite).sizeMode=2,config.total+=1,t},randomGoods:function(){var e=cc.instantiate(config.warehouse.prefabList.chess);switch(Math.floor(5*Math.random()+1)){case 1:e.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("red");break;case 2:e.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("orange");break;case 3:e.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("green");break;case 4:e.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("yellow");break;case 5:e.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("purple")}return e.getChildByName("pic").getComponent(cc.Sprite).trim=!1,e.getChildByName("pic").getComponent(cc.Sprite).sizeMode=2,e},getSet:function(e){var t=cc.instantiate(config.warehouse.prefabList.bottom);return t.getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[e],t},checkMovedMap:function(){},getChessIndex:function(e,t){for(var n=0;n<t.length;n++)for(var o=0;o<t[0].length;o++)if(t[n][o].bottom==e||t[n][o].middle==e)return t[n][o].index},checkCross:function(e,t){for(var n=0;n<e.length;n++)for(var o=0;o<t.length;o++)if(e[n]==t[o])return e[n];return!1},checkSameLine:function(){},checkEmpty:function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e[0].length;n++)if(!e[t][n].middle)return e[t][n];return!1},checkLinked:function(e,t){var n=Math.abs(e[0]-t[0]),o=Math.abs(e[1]-t[1]);return console.log(e,t,Math.abs(n-o)),1==Math.abs(n-o)}});var n=function(){function e(e){this.index=e,this.level=1,this.levelToChange=0,this.removable=!0,this.onseat=!0,this.middle=null,this.type=0,this.bottom=null,this.bottomEffect=[],this.tween=null,this.checked=!1,this.packed=!1,this.touchable=!0,this.levelUp=!1,this.specialChessData=null}var t=e.prototype;return t.setSpecialChess=function(e){this.specialChessData=e,this.checkSpecialChessEffect("get"),this.type=this.specialChessData.id,this.setPic(config.warehouse.spriteFrame[this.specialChessData.Pic]),this.level=1},t.removeBottomEffect=function(e){for(var t=0;t<this.bottomEffect.length;t++)if(this.bottomEffect[t].component.id==e){var n=this.bottomEffect[t].component.data.prefab;config.objectPool.put(n,this.bottomEffect[t].ui),this.bottomEffect.splice(t,1)}},t.checkEffect=function(e){switch(e){case"turnEnd":for(var t=0;t<this.bottomEffect.length;t++)this.bottomEffect[t].component.onTurnEnd(),this.bottomEffect[t].component.nextStage(),config.UICtrl.getUIComponent("boardLayer").bottomEffectCount-=1;break;case"turnBegin":for(t=0;t<this.bottomEffect.length;t++)this.bottomEffect[t].component.onRefresh(),this.bottomEffect[t].component.onTurnBegin(),config.UICtrl.getUIComponent("boardLayer").bottomEffectCount-=1}},t.addBottomEffect=function(e,t){var n=config.playerInfoManager.getBottomEffectData(e),o=config.objectPool.getPrefab(n.prefab);n.layer?config.UICtrl.getUIComponent("boardLayer").coverLayer.addChild(o):config.UICtrl.getUIComponent("boardLayer").bottomLayer.addChild(o),o.setPosition(this.middle.position);var i=o.addComponent(n.script);i.init(n,t,this),this.bottomEffect.push({ui:o,component:i})},t.checkSpecialChessEffect=function(e){switch(e){case"get":for(var t=0;t<this.specialChessData.getSkill.length;t++)config.eventDelegate.dispatchEvent("\u7279\u6b8a\u68cb\u5b50\u6548\u679c",[this.specialChessData.getSkill,this]);break;case"cost":for(t=0;t<this.specialChessData.costSkill.length;t++)config.eventDelegate.dispatchEvent("\u7279\u6b8a\u68cb\u5b50\u6548\u679c",[this.specialChessData.costSkill,this])}},t.shakeChess=function(){cc.tween(this.middle.getChildByName("pic")).to(.25,{angle:30}).to(.25,{angle:0}).to(.25,{angle:-30}).to(.25,{angle:0}).union().repeat(2).start()},t.stopShake=function(){},t.refreshLevel=function(){this.level<=1?this.middle.getChildByName("level").active=!1:this.middle.getChildByName("level").active=!0,this.middle.getChildByName("level").getChildByName("num").getComponent(cc.Label).string="x "+this.level},t.refreshSize=function(){this.middle.getChildByName("pic").scale=.28},t.setPic=function(e){this.middle.getChildByName("pic").getComponent(cc.Sprite).spriteFrame=e},t.resetPosition=function(){this.middle.setPosition(this.bottom.position)},t.initPosition=function(){this.bottom.x=this.index[0]*config.gameInfo.heightSpace,this.bottom.y=this.index[1]*config.gameInfo.widthSpace,this.resetPosition()},t.resetType=function(){var e=this.middle.getChildByName("pic").getComponent(cc.Sprite).spriteFrame.name;switch(e=e.slice(0,e.length-1)){case"orange":this.type="blue";break;case"green":this.type="green";break;case"purple":this.type="purple";break;case"red":this.type="red";break;case"yellow":this.type="yellow"}},t.setRandomType=function(){var e=config.gameInfo.chessData;for(this.type=Math.floor(5*Math.random());!e[this.type];)this.type=Math.floor(5*Math.random())},t.init=function(e){this.resetPosition(),this.refreshSize(),this.resetType(),e?(this.middle.getChildByName("level").active=!0,this.middle.getChildByName("bg").active=!0,this.refreshLevel()):(this.middle.getChildByName("level").active=!1,this.middle.getChildByName("bg").active=!1)},t.creatTweenToBottom=function(e){var t=config.tools.getDistance(this.middle.position,this.bottom.position)/config.speed;e&&(t*=.5*Math.random()+1),this.tween=cc.tween(this.middle).to(t,{position:this.bottom.position},{easing:"quadIn"}).call(function(){config.eventDelegate.dispatchEvent("tweenDone")})},t.startTween=function(){this.tween.start()},t.getChessPic=function(){var e=config.gameInfo.chessData[""+this.type],t=config.warehouse.spriteFrame;switch(this.level){case 1:return t[e.level1Pic];case 2:return t[e.level2Pic];case 3:return t[e.level3Pic]}},t.getAroundIndex=function(){for(var e=[],t=[[0,1],[0,-1],[1,0],[-1,0]],n=0;n<t.length;n++){var o=this.index[0]+t[n][0],i=this.index[1]+t[n][1];o<0||o>=config.gameInfo.mapWide||i<0||i>=config.gameInfo.mapHigh||e.push([o,i])}return e},e}();cc._RF.pop()},{baseEffectDealer:"baseEffectDealer"}],chessDealer:[function(e,t){"use strict";cc._RF.push(t,"7a1bbf17aBDBYwKNqa7pSEw","chessDealer"),cc.Class({extends:e("baseEffectDealer"),properties:{},onLoad:function(){this.playerData=this.node.getChildByName("player").getComponent("playerData"),this.enemyData=this.node.getChildByName("enemy").getComponent("enemyData"),this.board=this.node.getChildByName("boardCover").getChildByName("boardLayer").getComponent("boardLayerCtrl"),this.initChessData(),this.initRemoveEvent()},start:function(){this.initEquipEffect()},initChessData:function(){config.gameInfo.chessData[0]=config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[0]),config.gameInfo.chessData[1]=config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[1]),config.gameInfo.chessData[2]=config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[2]),config.gameInfo.chessData[3]=config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[3]),config.gameInfo.chessData[4]=config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[4]),config.gameInfo.chessEffect[0]=config.tools.getChessEffectByLevel(config.gameInfo.chessData[0],this.getChessLevel(config.gameInfo.chessData[0])),config.gameInfo.chessEffect[1]=config.tools.getChessEffectByLevel(config.gameInfo.chessData[1],this.getChessLevel(config.gameInfo.chessData[1])),config.gameInfo.chessEffect[2]=config.tools.getChessEffectByLevel(config.gameInfo.chessData[2],this.getChessLevel(config.gameInfo.chessData[2])),config.gameInfo.chessEffect[3]=config.tools.getChessEffectByLevel(config.gameInfo.chessData[3],this.getChessLevel(config.gameInfo.chessData[3])),config.gameInfo.chessEffect[4]=config.tools.getChessEffectByLevel(config.gameInfo.chessData[4],this.getChessLevel(config.gameInfo.chessData[4]))},initEquipEffect:function(){for(var e in config.gameInfo.chessEffect)config.gameInfo.chessEffect[e].equipEffect.length&&this.dealEffect(config.gameInfo.chessEffect[e].equipEffect)},getChessLevel:function(e){return config.playerInfoManager.getChessLevel(e.id)},initRemoveEvent:function(){var e=this;config.eventDelegate.addEvent("\u7279\u6b8a\u68cb\u5b50\u6548\u679c",function(t){var n=t.detail[0];e.dealEffect(n,t.detail[1])}),config.eventDelegate.addEvent("\u68cb\u5b50\u6d88\u9664",function(t){var n=t.detail.effect;e.dealEffect(n,t.detail)}),config.eventDelegate.addEvent("\u4e09\u6d88",function(t){var n=t.detail[0].type,o=config.gameInfo.chessEffect[""+n];o.threeRemoveEffect.length&&e.dealEffect(o.threeRemoveEffect)}),config.eventDelegate.addEvent("\u666e\u901a\u6d88\u9664",function(t){var n=t.detail[0].type,o=config.gameInfo.chessEffect[""+n],i=config.gameInfo.chessData[""+n];o.normalRemoveEffect.length&&e.dealEffect(o.normalRemoveEffect),e.playerData.changeEnergy(i.removeEnergyEfficient)}),config.eventDelegate.addEvent("\u8fde\u6d88",function(t){var n=t.detail,o=n[0][0].type,i=n[1],a=config.gameInfo.chessEffect[""+o],s=config.gameInfo.chessData[""+o];a.comboRemoveEffect.length&&e.dealEffect(a.comboRemoveEffect,i),e.playerData.changeEnergy(s.comboEnergyEfficient)}),config.eventDelegate.addEvent("\u56db\u6d88",function(t){var n=t.detail[0].type,o=config.gameInfo.chessEffect[""+n];o.fourRemoveEffect.length&&e.dealEffect(o.fourRemoveEffect)}),config.eventDelegate.addEvent("\u4e94\u6d88",function(t){var n=t.detail[0].type,o=config.gameInfo.chessEffect[""+n];o.fiveRemoveEffect.length&&e.dealEffect(o.fiveRemoveEffect)})},dealEffect:function(e,t){if(e.length>0)for(var n=0;n<e.length;n++)this.checkEffect(e[n],t)},checkEffect:function(e,t){if(!e.condition||this.checkCondition(e,t)){var n=this.getTarget(e.target);this.checkBaseEffect(e,t,n)}},getTarget:function(e){switch(e){case 0:return this.playerData;case 1:return this.enemyData;case 2:return this.board}}}),cc._RF.pop()},{baseEffectDealer:"baseEffectDealer"}],chessInfoCtrl:[function(e,t){"use strict";cc._RF.push(t,"c8b67EZEPpKlZ4415aFfZNV","chessInfoCtrl"),cc.Class({extends:e("./otherUIBase"),properties:{id:0,source:null},init:function(e){this.source=e[1],this.id=e[0]},onLoad:function(){this.content=this.node.getChildByName("content"),this.title=this.content.getChildByName("title"),this.rarity=this.content.getChildByName("rarity"),this.mark=this.content.getChildByName("mark"),this.baseData=this.content.getChildByName("baseData"),this.ATK=this.baseData.getChildByName("ATK"),this.energy=this.baseData.getChildByName("energy"),this.chessItem=this.content.getChildByName("chessItem"),this.levelUp=this.content.getChildByName("levelUp"),this.leave=this.content.getChildByName("leave"),this.disc=this.content.getChildByName("disc"),this.info=this.content.getChildByName("info"),this.intro=this.content.getChildByName("intro").getChildByName("scroll").getChildByName("view").getChildByName("content"),this.three=this.intro.getChildByName("three"),this.four=this.intro.getChildByName("four"),this.five=this.intro.getChildByName("five"),this.unlock=this.intro.getChildByName("unlock"),config.tools.addCallBackToButton(this.node,"chessInfoCtrl","levelUpChess",null,this.levelUp),config.tools.addCallBackToButton(this.node,"chessInfoCtrl","leaveUI",null,this.leave)},onEnable:function(){this.refreshUI(),this.refreshIntro(),this.playOutAnim()},levelUpChess:function(){if(config.playerInfoManager.checkOwnedChess(this.id)){var e=config.playerInfoManager.getLevelUpRequire(this.id);config.playerInfoManager.getChessFragments(this.id)>=e?(config.playerInfoManager.changeFragment(this.id,e),config.playerInfo.chessLevel[this.id]+=1,this.refreshUI(),config.dj.playEffect(config.warehouse.sound["\u5f3a\u5316\u97f3\u6548"],1)):(console.log("\u788e\u7247\u4e0d\u591f"),config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1))}else config.playerInfoManager.getChessFragments(this.id)>=3?(config.playerInfoManager.changeFragment(this.id,3),config.playerInfoManager.addOwnedChess(this.id),this.refreshUI(),config.dj.playEffect(config.warehouse.sound["\u5f3a\u5316\u97f3\u6548"],1)):(console.log("\u788e\u7247\u4e0d\u591f"),config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1))},refreshUI:function(){config.playerInfoManager.checkOwnedChess(this.id)?this.levelUp.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="\u5347\u7ea7":this.levelUp.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="\u672a\u89e3\u9501",this.chessItem.getComponent("chessItemCtrl").id=this.id,this.chessItem.getComponent("chessItemCtrl").refreshInfo(),this.refreshBaseData(),this.refreshDisc(),this.refreshRarity(),this.refreshMark(),this.refreshIitle()},refreshBaseData:function(){var e=config.tools.getBaseChessDataByID(this.id);this.baseData.getChildByName("ATK").getComponent(cc.Label).string="\u653b\u51fb\u529b:"+config.playerInfoManager.getBaseATK(e),this.baseData.getChildByName("energy").getComponent(cc.Label).string="\u80fd\u91cf\u6548\u7387:"+e.removeEnergyEfficient},refreshDisc:function(){var e=config.tools.getBaseChessDataByID(this.id);e.intro&&(this.disc.getChildByName("label").getComponent(cc.Label).string=e.intro)},refreshIntro:function(){var e=config.tools.getBaseChessDataByID(this.id);this.three.getComponent(cc.Label).string="\u4e00\u9636\u6cd5\u5668:"+e.threeIntro,this.four.getComponent(cc.Label).string="\u4e8c\u9636\u6cd5\u5668:"+e.fourIntro,this.five.getComponent(cc.Label).string="\u4e09\u9636\u6cd5\u5668:"+e.fiveIntro,this.unlock.getComponent(cc.Label).string="3\u7ea7\u89e3\u9501\u6548\u679c:"+e.unlockIntro[0]+"\n5\u7ea7\u89e3\u9501\u6548\u679c"+e.unlockIntro[1]+"\n10\u7ea7\u89e3\u9501\u6548\u679c"+e.unlockIntro[2]+"\n15\u7ea7\u89e3\u9501\u6548\u679c"+e.unlockIntro[3]},refreshIitle:function(){var e=config.tools.getBaseChessDataByID(this.id);this.title.getComponent(cc.Label).string=e.name},refreshRarity:function(){switch(config.tools.getBaseChessDataByID(this.id).rarity){case 0:this.rarity.getComponent(cc.Label).string="\u666e\u901a\u6cd5\u5668";break;case 1:this.rarity.getComponent(cc.Label).string="\u7a00\u6709\u6cd5\u5668";break;case 3:this.rarity.getComponent(cc.Label).string="\u53f2\u8bd7\u6cd5\u5668"}},refreshMark:function(){var e=config.tools.getBaseChessDataByID(this.id),t=config.playerInfoManager.getChessLevel(this.id);switch(e.rarity){case 0:this.mark.getComponent(cc.Label).string="\u6cd5\u5668\u79ef\u5206:"+this.getMark(t,10);break;case 1:this.mark.getComponent(cc.Label).string="\u6cd5\u5668\u79ef\u5206:"+this.getMark(t,20);break;case 3:this.mark.getComponent(cc.Label).string="\u6cd5\u5668\u79ef\u5206:"+this.getMark(t,30)}},getMark:function(e,t){for(var n=[],o=0,i=1;i<=e;i++)n.push(1*t);for(var a=0;a<n.length;a++)o+=n[a];return o},leaveUI:function(){config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1),config.UICtrl.getUIComponent("chessSelection").refreshContent(),this.cancel()}}),cc._RF.pop()},{"./otherUIBase":"otherUIBase"}],chessItemCtrl:[function(e,t){"use strict";cc._RF.push(t,"11b63TWL0xCJa70aLYW7jMS","chessItemCtrl"),cc.Class({extends:cc.Component,properties:{id:0,using:!1},onLoad:function(){this.showing=!1,this.bg=this.node.getChildByName("bg"),this.icon=this.node.getChildByName("icon"),this.level=this.node.getChildByName("level"),this.progress=this.node.getChildByName("progress"),this.progressNum=this.progress.getChildByName("num"),this.type=this.node.getChildByName("type"),this.select=this.node.getChildByName("select"),this.info=this.node.getChildByName("info")},init:function(){config.tools.addCallBackToButton(this.node,"chessItemCtrl","showButton",null,this.node)},getSelect:function(){return this.node.getChildByName("select")},getInfo:function(){return this.node.getChildByName("info")},showButton:function(){this.showing?this.showing=!1:this.showing=!0,this.select.active=this.showing,this.info.active=this.showing},refreshInfo:function(){if(this.id){this.using&&(this.node.active=!0);var e=config.tools.getBaseChessDataByID(this.id);switch(this.icon.getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[e.level1Pic],this.checkOwn()?(this.level.getComponent(cc.Label).string="\u7b49\u7ea7"+config.playerInfoManager.getChessLevel(this.id),this.select.getComponent(cc.Button).interactable=!0):(this.level.getComponent(cc.Label).string="\u672a\u89e3\u9501",this.select.getComponent(cc.Button).interactable=!1),this.type.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.checkType(),config.playerInfo.chessFragmentProgress[this.id]>=0&&(this.progress.getComponent(cc.ProgressBar).progress=config.playerInfo.chessFragmentProgress[this.id]/config.playerInfoManager.getLevelUpRequire(this.id),this.progressNum.getComponent(cc.Label).string=config.playerInfo.chessFragmentProgress[this.id]+"/"+config.playerInfoManager.getLevelUpRequire(this.id)),e.rarity){case 0:this.bg.getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u6cd5\u5668\u5361\u7247\u7eff"];break;case 1:this.bg.getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u6cd5\u5668\u5361\u7247\u84dd"];break;case 3:this.bg.getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u6cd5\u5668\u5361\u7247\u7d2b"]}}else this.node.active=!1,this.showing=!1,this.select.active=this.showing,this.info.active=this.showing},check:function(){this.checkUsing()?(this.node.active=!1,this.showing=!1,this.select.active=this.showing,this.info.active=this.showing):this.checkOwn()?this.node.active=!0:config.playerInfo.chessFragmentProgress[this.id]?this.node.active=!0:(this.node.active=!1,this.showing=!1,this.select.active=this.showing,this.info.active=this.showing)},checkOwn:function(){for(var e=config.playerInfo.ownedChess,t=0;t<e.length;t++)if(e[t]==this.id)return!0;return!1},checkUsing:function(){for(var e=config.playerInfo.usingChesses,t=0;t<e.length;t++)if(e[t]==this.id)return!0;return!1},showNum:function(e){this.node.getChildByName("num").active=!0,this.node.getChildByName("num").getComponent(cc.Label).string="x"+e},checkType:function(){switch(config.tools.getBaseChessDataByID(this.id).element){case 0:return config.warehouse.spriteFrame["\u91d1\u5c5e\u6027"];case 1:return config.warehouse.spriteFrame["\u6728\u5c5e\u6027"];case 2:return config.warehouse.spriteFrame["\u6c34\u5c5e\u6027"];case 3:return config.warehouse.spriteFrame["\u706b\u5c5e\u6027"];case 4:return config.warehouse.spriteFrame["\u571f\u5c5e\u6027"]}}}),cc._RF.pop()},{}],chessSelectionCtrl:[function(e,t){"use strict";cc._RF.push(t,"e83ceA9SyxCRLtBQwO7jDjE","chessSelectionCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.selectedObj=null,this.content=this.node.getChildByName("content"),this.usingChess=this.content.getChildByName("usingChess"),this.chessList=this.content.getChildByName("chessList"),this.chessContent=this.chessList.getChildByName("content").getChildByName("view").getChildByName("content"),this.leave=this.content.getChildByName("leave"),this.set1=this.usingChess.getChildByName("set1"),this.set2=this.usingChess.getChildByName("set2"),this.set3=this.usingChess.getChildByName("set3"),this.set4=this.usingChess.getChildByName("set4"),this.set5=this.usingChess.getChildByName("set5"),this.initContent()},start:function(){},onEnable:function(){this.refreshContent()},initContent:function(){this.set1.addChild(this.initChessItem(config.playerInfo.usingChesses[0],!0)),this.set2.addChild(this.initChessItem(config.playerInfo.usingChesses[1],!0)),this.set3.addChild(this.initChessItem(config.playerInfo.usingChesses[2],!0)),this.set4.addChild(this.initChessItem(config.playerInfo.usingChesses[3],!0)),this.set5.addChild(this.initChessItem(config.playerInfo.usingChesses[4],!0));for(var e=config.warehouse.json.chessBaseData,t=0;t<e.length;t++)this.chessContent.addChild(this.initChessItem(e[t].id,!1))},initChessItem:function(e,t){var n=cc.instantiate(config.warehouse.prefabList.chessItem);return n.getComponent("chessItemCtrl").using=t,e&&this.setChessItemData(n,e),config.tools.addCallBackToButton(this.node,"chessSelectionCtrl","showChess",n,n.getComponent("chessItemCtrl").getInfo()),config.tools.addCallBackToButton(this.node,"chessSelectionCtrl","selectChess",n,n.getComponent("chessItemCtrl").getSelect()),n},setChessItemData:function(e,t){e.getComponent("chessItemCtrl").id=t,e.getComponent("chessItemCtrl").init()},showChess:function(e,t){config.UICtrl.addUI("chessInfo",config.UICtrl.findUI("other"),[t.getComponent("chessItemCtrl").id,this.node]),config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1)},selectChess:function(e,t){var n=t.getComponent("chessItemCtrl").using,o=t.getComponent("chessItemCtrl").id;if(config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1),!config.playerInfoManager.checkLockedChess(o)){if(n)for(var i=0;i<config.playerInfo.usingChesses.length;i++)config.playerInfo.usingChesses[i]==o&&(config.playerInfo.usingChesses[i]=0);else for(i=0;i<config.playerInfo.usingChesses.length;i++)if(!config.playerInfo.usingChesses[i]){config.playerInfo.usingChesses[i]=o;break}this.refreshContent()}},refreshContent:function(){this.set1.getChildByName("chessItem").getComponent("chessItemCtrl").id=config.playerInfo.usingChesses[0],this.set1.getChildByName("chessItem").getComponent("chessItemCtrl").refreshInfo(),this.set2.getChildByName("chessItem").getComponent("chessItemCtrl").id=config.playerInfo.usingChesses[1],this.set2.getChildByName("chessItem").getComponent("chessItemCtrl").refreshInfo(),this.set3.getChildByName("chessItem").getComponent("chessItemCtrl").id=config.playerInfo.usingChesses[2],this.set3.getChildByName("chessItem").getComponent("chessItemCtrl").refreshInfo(),this.set4.getChildByName("chessItem").getComponent("chessItemCtrl").id=config.playerInfo.usingChesses[3],this.set4.getChildByName("chessItem").getComponent("chessItemCtrl").refreshInfo(),this.set5.getChildByName("chessItem").getComponent("chessItemCtrl").id=config.playerInfo.usingChesses[4],this.set5.getChildByName("chessItem").getComponent("chessItemCtrl").refreshInfo();for(var e=0;e<this.chessContent.children.length;e++)this.chessContent.children[e].getComponent("chessItemCtrl").check(),this.chessContent.children[e].getComponent("chessItemCtrl").refreshInfo()},onDestroy:function(){config.UICtrl.UIList[this.node.name]=null}}),cc._RF.pop()},{}],chooseChessCtrl:[function(e,t){"use strict";cc._RF.push(t,"a8924litrdC5bIcB7ef3rPo","chooseChessCtrl"),cc.Class({extends:cc.Component,properties:{requireNum:0,chessList:[]},onLoad:function(){var e=this;config.eventDelegate.addEvent("\u9009\u62e9\u68cb\u5b50",function(t){e.checkSameChess(t.detail)||(e.chessList.push(t.detail),e.chessList.length>=e.requireNum&&(config.eventDelegate.dispatchEvent("\u9009\u62e9\u68cb\u5b50\u5b8c\u6bd5",e.chessList),e.chessList=[],e.requireNum=0,e.node.destroy(),config.eventDelegate.cleanEvent("\u9009\u62e9\u68cb\u5b50")))})},setChessList:function(e){this.chessList=e},checkSameChess:function(e){for(var t=0;t<this.chessList.length;t++)if(e==this.chessList[t])return!0;return!1},start:function(){this.setChooseMode()},setMaskSize:function(e,t){this.node.getChildByName("mask").width=e,this.node.getChildByName("mask").height=t},setMaskPosition:function(e,t){this.node.getChildByName("mask").setPosition(e,t)},setText:function(e){this.node.getChildByName("text").getComponent(cc.Label).string=e},setTextPosition:function(e,t){this.node.getChildByName("text").setPosition(e,t)},setChooseMode:function(){config.UICtrl.getUIComponent("boardLayer").setControlMode(2)}}),cc._RF.pop()},{}],config:[function(e,t){"use strict";cc._RF.push(t,"6e09cb6LuJM1JR16LhquW5V","config"),e("./warehouse").sound,window.config={warehouse:e("./warehouse"),tools:e("./tools"),dj:e("./dj"),eventDelegate:e("./eventDelegate"),resultCreator:e("./randomResultCreator"),animCtrl:e("./animCtrl"),UICtrl:e("./UICtrl"),saver:e("./saver"),wxTools:e("./wxtools"),ksTools:e("./kstools"),objectPool:e("./objectPool"),effectCtrl:e("./effectCtrl"),playerInfoManager:e("./playerInfoManager"),gameInfo:{chessData:{0:null,1:null,2:null,3:null,4:null},chessEffect:{0:null,1:null,2:null,3:null,4:null},widthSpace:50,heightSpace:50,mapHigh:0,mapWide:0,currentDangerCountdown:1,masterData:{},targetScene:""},UIInfo:{currentPass:0},passInfo:{},accountInfo:{openID:null,nickName:null,avatarlUrl:null},updateInfo:{nickName:null,avatarlUrl:null,province:null,usingSkin:null,cowNum:null,highestMoney:null,lowestStep:null,firstPassTime:null},currentDate:0,avatarPic:null,needUpdate:!1,playerInfo:{firstGame:!0,passedYesterday:!1,firstLunchToday:!0,creatAccountDate:null,lastLunchDate:null,playTimesToday:0,passedTime:0,highestMoneyToday:0,lowestStepToday:0,firstPassToday:null,starNum:0,cowNum:0,unlockedSkin:[],usingSkin:"",province:"",data1:0,data2:0,data3:0,data4:0,data5:1,saverVersion:1.12,raceList:[],rank:10,data6:0,skinFragmentProgress:{s1:0,s2:0,s3:0,s4:0,s5:0,s6:0,s7:0,s8:0,s9:0,s10:0,s11:0,s12:0,s13:0,s14:0,s15:0,s16:0,s17:0,s18:0},missionList:[],missionProgress:0,boxProgress:0,behaviorDataCollection:{shareGame:0,fourRemove:0,fiveRemove:0,watchAD:0,sell1000W:0,sell20Fruits:0,buyCommodity:0,checkRank:0,useAddStep:0,usePriceUp:0,useGetMoney:0},dailyCommodityList:[],usingMaster:4e4,ownedMaster:[4e4,40002,40003],usingChesses:[1e4,10004,10003,10002,10001],ownedChess:[1e4,10001,10002,10003,10004],chessLevel:{1e4:0,10001:0,10002:0,10003:0,10004:0,10005:0,10006:0,10007:0,10008:0,10009:0,10010:0,10011:0,10012:0,10013:0,10014:0,10015:0,10016:0,10017:0,10018:0,10019:0,10020:0,10021:0,10022:0,10023:0,10024:0,10025:0},chessFragmentProgress:{1e4:0,10001:0,10002:0,10003:0,10004:0},normalPool:[1e4,10001,10002,10003,10004,10005],rarePool:[10006,10007,10009,10010,10011,10012],epicPool:[10008,10013,10014,10015,10016,10017,10018,10019,10020,10021,10022,10023,10024,10025],lockedChess:[10005,10007,10008,10011,10012,10013,10014,10015,10017,10018,10019,10020,10022,10023,10024,10025],lockedMaster:[40001,40004],sound:!0,music:!0},totalSkin:18,areaList:["\u5317\u4eac","\u5929\u6d25","\u4e0a\u6d77","\u91cd\u5e86","\u6cb3\u5317","\u5c71\u897f","\u5185\u8499\u53e4","\u8fbd\u5b81","\u5409\u6797","\u9ed1\u9f99\u6c5f","\u6c5f\u82cf","\u6d59\u6c5f","\u5b89\u5fbd","\u798f\u5efa","\u6c5f\u897f","\u5c71\u4e1c","\u6cb3\u5357","\u6e56\u5317","\u6e56\u5357","\u5e7f\u4e1c","\u5e7f\u897f","\u6d77\u5357","\u56db\u5ddd","\u8d35\u5dde","\u4e91\u5357","\u897f\u85cf","\u9655\u897f","\u7518\u8083","\u9752\u6d77","\u5b81\u590f","\u65b0\u7586","\u9999\u6e2f","\u6fb3\u95e8","\u53f0\u6e7e"],dailyRank:null,dailyrankList:[],dailyDone:!1,dailyProgress:0,historyRank:null,historyRankList:[],historyDone:!1,yesterdayRank:null,yesterdayRankList:[],yesterdayDone:!1,raceProgress:0,raceDone:!1,red:0,green:0,yellow:0,blue:0,purple:0,total:0,teachStageNum:0,stage14:{match3Grow:2,matchComboGrow:1,match4Grow:3,match5Grow:7,step:20,target:100,bailout:2,finance:30,speculation:[1,5]},stageNum:1,stage1:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:20,target:100,bailout:2,finance:30,speculation:[1,3]},stage2:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:30,target:1e3,bailout:3,finance:100,speculation:[1,4]},stage3:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:1e4,bailout:4,finance:300,speculation:[1,5]},stage4:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:30,target:1e4,bailout:4,finance:500,speculation:[1,5]},stage5:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:30,target:15e3,bailout:4,finance:750,speculation:[1,5]},stage6:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:2e4,bailout:4,finance:1e3,speculation:[1,5]},stage7:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:3e4,bailout:4,finance:1500,speculation:[1,5]},stage8:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:5e4,bailout:4,finance:2500,speculation:[1,5]},stage9:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:7e4,bailout:4,finance:3500,speculation:[1,5]},stage10:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:1e5,bailout:4,finance:5e3,speculation:[1,5]},gameSetting:null,lastClickPoint:null,thisClickPoint:null,usedAD:0,transcribed:!1,cloudPlayerSaver:{avatarlUrl:null,usingSkin:null,unlockedSkin:[],firstLunchToday:null,UID:null,nickName:null,province:null,cowNum:null,starNum:null,passNumToday:null,highestMoneyToday:null,lowestStepToday:null,firstPassTimeToday:null,creatAccountDate:null,firstGame:!0,historyHighestMoney:null}},cc._RF.pop()},{"./UICtrl":"UICtrl","./animCtrl":"animCtrl","./dj":"dj","./effectCtrl":"effectCtrl","./eventDelegate":"eventDelegate","./kstools":"kstools","./objectPool":"objectPool","./playerInfoManager":"playerInfoManager","./randomResultCreator":"randomResultCreator","./saver":"saver","./tools":"tools","./warehouse":"warehouse","./wxtools":"wxtools"}],coverSpine:[function(e,t){"use strict";cc._RF.push(t,"ff0c92NIi9OqqaCQ0gTIZgJ","coverSpine"),cc.Class({extends:e("baseBottomEffect"),properties:{}}),cc._RF.pop()},{baseBottomEffect:"baseBottomEffect"}],damageDerate:[function(e,t){"use strict";cc._RF.push(t,"a08a7NvjiNHI56IE3kC2f7M","damageDerate"),cc.Class({extends:e("buffBase"),properties:{},start:function(){}}),cc._RF.pop()},{buffBase:"buffBase"}],dj:[function(e,t){"use strict";var n,o,i,a;cc._RF.push(t,"b3691Xew0hFoLgSzqnc7TBD","dj"),t.exports=(o=null,i=!1,a=null,(n={}).playMusic=function(e,t){if(config.playerInfo.music){if(o){if(o==e)return;cc.audioEngine.stopMusic()}cc.audioEngine.playMusic(e,!0);var n=void 0===t?1:t;cc.audioEngine.setMusicVolume(n),o=e}},n.stopMusic=function(){o&&cc.audioEngine.stopMusic()},n.pauseMusic=function(){o&&cc.audioEngine.pauseMusic()},n.resumeMusic=function(){o&&cc.audioEngine.resumeMusic()},n.setMusicVolume=function(e){cc.audioEngine.setMusicVolume(e)},n.switchMusic=function(){},n.playEffect=function(e,t,n){if(!i&&config.playerInfo.sound){n?a=cc.audioEngine.playEffect(e,n):cc.audioEngine.playEffect(e,n);var o=void 0===t?1:t;cc.audioEngine.setEffectsVolume(o)}},n.setEffectVolume=function(){},n.stopEffect=function(){a&&cc.audioEngine.stop(a)},n.switchEffect=function(e){i=e},n),cc._RF.pop()},{}],effectBaseNodeCtrl:[function(e,t){"use strict";cc._RF.push(t,"f39f4YEjP5CRr6o9nIE9gUe","effectBaseNodeCtrl"),cc.Class({extends:cc.Component,properties:{type:"",using:null},initSprite:function(){this.initThis(),this.using=this.sprite},initAnimation:function(e,t){this.initThis(),this.using=this.sprite;var n=config.warehouse.atlas[e].getSpriteFrames(),o=cc.AnimationClip.createWithSpriteFrames(n,n.length);o.name=this.type,o.wrapMode=t,this.animation.addClip(o)},playAnim:function(){this.animation.play(this.type)},initParticle:function(e){this.initThis(),this.using=this.particle,this.particle.addChild(config.objectPool.getPrefab(e))},initThis:function(){this.sprite=this.node.getChildByName("sprite"),this.spriteComponent=this.sprite.getComponent(cc.Sprite),this.animation=this.sprite.getComponent(cc.Animation),this.particle=this.node.getChildByName("particle")},show:function(e){this.using.active=e},reclaim:function(){config.objectPool.put(this.type,this.node)}}),cc._RF.pop()},{}],effectCtrl:[function(e,t){"use strict";cc._RF.push(t,"4c637LXKj1DMqrAwJZZVO6E","effectCtrl"),t.exports={showEffect:function(){}},cc._RF.pop()},{}],enemyData:[function(e,t){"use strict";cc._RF.push(t,"cd2ccK66oFKSJAUtc/lq9UC","enemyData"),cc.Class({extends:e("baseData"),properties:{spine:"",zombieName:"",ATK:0,elementType:0,dodge:0,actionLine:[],actionProgress:0,action1Data:null,action2Data:null,action3Data:null,dangerCountdown:1},removeBuff:function(e){for(var t=0;t<this.buffList.length;t++)this.buffList[t].component.id==e&&(this.buffList[t].ui.destroy(),this.buffList.splice(t,1))},checkBuffList:function(e,t){switch(e){case"turnBegin":for(var n=0;n<this.buffList.length;n++)this.buffList[n].component.onRefresh(),this.buffList[n].component.onTurnBegin();break;case"turnEnd":for(n=0;n<this.buffList.length;n++)this.buffList[n].component.onTurnEnd(),this.buffList[n].component.nextStage();break;case"getATK":for(n=0;n<this.buffList.length;n++)this.buffList[n].component.onAttack();break;case"getAttack":for(n=0;n<this.buffList.length;n++)this.buffList[n].component.onGetHurt(t)}},getCurrentActionData:function(){var e=this.actionLine[this.actionProgress];if(e)return 1==e?this.action1Data:2==e?this.action2Data:3==e?this.action3Data:null},getActionPreview:function(){var e=1,t=this.actionProgress+1;for(t>=this.actionLine.length&&(t=0);!this.actionLine[t];)e+=1,(t+=1)>=this.actionLine.length&&(t=0);return 1==this.actionLine[t]?[this.action1Data[0],e]:2==this.actionLine[t]?[this.action2Data[0],e]:3==this.actionLine[t]?[this.action3Data[0],e]:void 0},getAttack:function(e){return 100*Math.random()<=this.dodge?(console.log("\u654c\u4eba\u95ea\u907f"),0):this.invincible?(console.log("\u654c\u4eba\u65e0\u654c"),0):(e*=(100+this.hurtFix)/100,this.shield>0&&(this.shield>e?(this.shield-=e,e=0):(e-=this.shield,this.shield=0)),config.eventDelegate.dispatchEvent("\u654c\u4eba\u53d7\u5230\u4f24\u5bb3",e),this.currentHP-=Math.floor(e),this.currentHP<=0&&(config.UICtrl.getUIComponent("game").gameResult||(config.UICtrl.getUIComponent("game").gameResult="win",console.log("\u6e38\u620f\u80dc\u5229"))),this.UI.refreshShield(),this.UI.refreshLife(),e)},getHeal:function(e){this.currentHP+=e,this.currentHP>=this.MaxHP&&(this.currentHP=this.MaxHP),this.UI.refreshLife()},getShield:function(e){this.shield+=e,this.shield>=this.MaxHP&&(this.shield=this.MaxHP),this.UI.refreshShield()},nextAction:function(){this.actionProgress+=1,this.actionProgress>=this.actionLine.length&&(this.actionProgress=0)},nextTurn:function(){this.dangerCountdown+=1,this.UI.refreshDangerCountdown(),this.UI.refreshActionCountdown()},getATK:function(){return this.checkBuffList("getATK"),(this.ATK+this.additionalBaseATK)*((100+this.ATKFix)/100)},onLoad:function(){this.UI=this.node.getComponent("enemyUICtrl")}}),cc._RF.pop()},{baseData:"baseData"}],enemyDealer:[function(e,t){"use strict";cc._RF.push(t,"11786+VPdlEapiM9mgRBhJa","enemyDealer"),e("../overall/animCtrl").enemyMove,cc.Class({extends:e("baseEffectDealer"),properties:{currentAction:null},onLoad:function(){this.enemyData=this.node.getChildByName("enemy").getComponent("enemyData"),this.enemyUI=this.node.getChildByName("enemy").getComponent("enemyUICtrl"),this.playerData=this.node.getChildByName("player").getComponent("playerData"),this.board=this.node.getChildByName("boardCover").getChildByName("boardLayer").getComponent("boardLayerCtrl"),this.initEnemyActionLine(),this.initEnemyEvent()},initEnemyActionLine:function(){},initEnemyEvent:function(){var e=this;config.eventDelegate.addEvent("\u654c\u4eba\u56de\u5408\u5f00\u59cb",function(){e.enemyData.checkBuffList("turnBegin"),e.action(),e.turnEnd()}),config.eventDelegate.addEvent("\u654c\u4eba\u56de\u5408\u7ed3\u675f",function(){config.UICtrl.getUIComponent("game").checkGameResult()||(e.enemyData.checkBuffList("turnEnd"),e.board.nextStage())}),config.eventDelegate.addEvent("\u654c\u4eba\u72c2\u66b4",function(){e.enemyData.ATK+=config.passInfo.attack,console.log("\u654c\u4eba\u72c2\u66b4")}),config.eventDelegate.addEvent("\u654c\u4eba\u53d7\u5230\u4f24\u5bb3",function(t){var n=t.detail;e.enemyData.checkBuffList("getAttack",n)})},turnEnd:function(){config.eventDelegate.dispatchEvent("\u654c\u4eba\u56de\u5408\u7ed3\u675f")},action:function(){this.enemyData.nextAction();var e=this.enemyData.getCurrentActionData();e&&(this.currentAction=e,this.enemyUI.enemyMove()),this.enemyData.nextTurn()},checkAction:function(){for(var e=0;e<this.currentAction[0].length;e++)this.checkEffect(this.currentAction[0][e],this.currentAction[1])},checkEffect:function(e,t){var n=this.getTarget(e.target);this.checkBaseEffect(e,t,n)}}),cc._RF.pop()},{"../overall/animCtrl":"animCtrl",baseEffectDealer:"baseEffectDealer"}],enemyUICtrl:[function(e,t){"use strict";cc._RF.push(t,"daa228mPfpKwoF9vMZV5u8J","enemyUICtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){config.UICtrl.UIList.enemyUI=this.node,this.aimPoint=this.node.getChildByName("aimPoint"),this.enemyData=this.node.getComponent("enemyData"),this.enemyDealer=config.UICtrl.UIList.game.getComponent("enemyDealer"),this.lifeBar=this.node.getChildByName("life"),this.zombieName=this.lifeBar.getChildByName("name"),this.lifeNum=this.lifeBar.getChildByName("num"),this.typeName=this.node.getChildByName("type").getChildByName("name"),this.typePic=this.node.getChildByName("type").getChildByName("pic"),this.actionCountdown=this.node.getChildByName("actionCountdown"),this.buffList=this.node.getChildByName("buffList"),this.dangerCountdown=this.node.getChildByName("dangerCountdown"),this.passName=this.node.getChildByName("passName"),this.enemySkeleton=this.node.getChildByName("enemySkeleton"),this.shield=this.lifeBar.getChildByName("shield"),this.shieldNum=this.shield.getChildByName("num"),config.tools.addCallBackToButton(this.node,"enemyUICtrl","showPassInfo",null,this.enemySkeleton)},addBuff:function(e){var t=cc.instantiate(config.warehouse.prefabList.buff);return this.buffList.addChild(t),t.addComponent(e),{ui:t,component:t.getComponent(e)}},refreshUI:function(){this.lifeBar.getChildByName("name").getComponent(cc.Label).string=this.enemyData.zombieName,this.passName.getChildByName("num").getComponent(cc.Label).string=config.passInfo.background+config.passInfo.passName,this.refreshElementType(),this.refreshDangerCountdown(),this.refreshActionCountdown(),this.refreshLife(),this.refreshSkeleton()},refreshSkeleton:function(){var e=config.warehouse.SkeletonData;this.enemySkeleton.getComponent(sp.Skeleton).skeletonData=e[this.enemyData.spine],this.enemySkeleton.getComponent(sp.Skeleton).setAnimation(0,"daiji",!0)},refreshShield:function(){this.enemyData.shield>0?this.shieldNum.getComponent(cc.Label).string="\u62a4\u76fe:"+this.enemyData.shield:this.shieldNum.getComponent(cc.Label).string="",this.shield.getComponent(cc.ProgressBar).progress=this.enemyData.shield/this.enemyData.MaxHP},refreshLife:function(){this.lifeNum.getComponent(cc.Label).string="\u751f\u547d\u503c:"+this.enemyData.currentHP,this.lifeBar.getChildByName("lifeBar").getComponent(cc.ProgressBar).progress=this.enemyData.currentHP/this.enemyData.MaxHP},refreshDangerCountdown:function(){this.dangerCountdown.getChildByName("num").getComponent(cc.Label).string="\u7b2c"+this.enemyData.dangerCountdown+"\u56de\u5408"},refreshActionCountdown:function(){var e=this.enemyData.getActionPreview(),t="";switch(e[0][0].type){case 0:t="\u653b\u51fb";break;case 6:t="\u6536\u503a";break;case 7:t="\u8986\u5199";break;case 132:t="\u56de\u590d";break;case 114:t="\u52a0\u901f";break;case 4:t="\u51b2\u51fb";break;case 120:t="\u6380\u684c";break;case 122:t="\u66ff\u8eab\u6728\u96d5";break;case 134:t="\u9488\u523a\u8bc5\u5492"}this.actionCountdown.getChildByName("name").getComponent(cc.Label).string=t,this.actionCountdown.getChildByName("num").getComponent(cc.Label).string=e[1]},refreshElementType:function(){0==this.enemyData.elementType?this.typePic.getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u50f5\u5c38\u91d1"]:1==this.enemyData.elementType?this.typePic.getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u50f5\u5c38\u6728"]:2==this.enemyData.elementType?this.typePic.getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u50f5\u5c38\u6c34"]:3==this.enemyData.elementType?this.typePic.getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u50f5\u5c38\u706b"]:4==this.enemyData.elementType&&(this.typePic.getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u50f5\u5c38\u571f"])},showPassInfo:function(){var e=config.warehouse.json.passBaseData[config.UIInfo.currentPass];config.UICtrl.addUI("passInfo",config.UICtrl.findUI("other"),e),config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1)},enemyMove:function(){var e=this,t=this.enemySkeleton.y;this.enemySkeleton.getComponent("ActionShadow").active=!0,cc.tween(this.enemySkeleton).to(.5,{y:t+50},{easing:"cubicOut"}).to(.25,{y:t-50},{easing:"quartIn"}).call(function(){e.enemyDealer.checkAction(),e.enemySkeleton.getComponent("ActionShadow").active=!1}).to(.5,{y:t},{easing:"quadOut"}).start()}}),cc._RF.pop()},{}],eventCtrl:[function(e,t){"use strict";cc._RF.push(t,"ba89b9S/utORqZM16HaHoII","eventCtrl"),cc.Class({extends:cc.Component,properties:{},start:function(){},onDestroy:function(){config.UICtrl.UIList[this.node.name]=null}}),cc._RF.pop()},{}],eventDelegate:[function(e,t){"use strict";cc._RF.push(t,"c2defqIpcpOCrPv2wa9WPOi","eventDelegate");var n=e("../overall/notificationCenter");t.exports={eventTypeList:{},addEvent:function(e,t){return this.eventTypeList[e]||(this.eventTypeList[e]=[],n.on(e,function(t){var n=this,o=this.eventTypeList[e];t.target=this,o.forEach(function(e){e.call(n,t)})}.bind(this))),this.eventTypeList[e].push(t),this.eventTypeList[e].length-1},checkEvent:function(e){return!!this.eventTypeList[e]},dispatchEvent:function(e,t){if(this.eventTypeList[e]){var o=new cc.Event.EventCustom(e,!0);o.setUserData(t),n.dispatchEvent(o)}},cleanEvent:function(e){this.eventTypeList[e]&&(this.eventTypeList[e]=[])},cleanOneOfEvent:function(){},cleanAllEvent:function(){for(var e in this.eventTypeList)n.off(e);this.eventTypeList={}}},cc._RF.pop()},{"../overall/notificationCenter":"notificationCenter"}],fear:[function(e,t){"use strict";cc._RF.push(t,"e6e8e6mimVDQLku91qVXHt2","fear"),cc.Class({extends:e("buffBase"),properties:{},start:function(){}}),cc._RF.pop()},{buffBase:"buffBase"}],fireDamageUp:[function(e,t){"use strict";cc._RF.push(t,"6eb21AonN1OOrvf+Gw5f8h7","fireDamageUp"),cc.Class({extends:e("buffBase"),properties:{},start:function(){}}),cc._RF.pop()},{buffBase:"buffBase"}],frighten:[function(e,t){"use strict";cc._RF.push(t,"d2acdTn/a9Lt4Oad1GZw9ra","frighten"),cc.Class({extends:e("./buffBase"),properties:{}}),cc._RF.pop()},{"./buffBase":"buffBase"}],gameBeginCtrl:[function(e,t){"use strict";cc._RF.push(t,"0d1aePw40hDMqMH49GFyMGw","gameBeginCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){config.tools.addCallBackToButton(this.node,"gameBeginCtrl","gameBegin",null,this.node)},gameBegin:function(){function e(){for(var e=0,t=0;t<config.playerInfo.usingChesses.length;t++)config.playerInfo.usingChesses[t]&&e++;return e}config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1);for(var t=config.warehouse.json.masterData,n=config.playerInfo.usingMaster,o=0;o<t.length;o++)if(t[o].id==n){if(t[o].chessCtrl>e())return void console.log("\u4e0a\u9635\u68cb\u5b50\u4e0d\u591f");config.UICtrl.showUI("playerInfo",!1),config.UICtrl.showUI("resInfo",!1),config.UICtrl.showUI("sceneMenu",!1),config.playerInfoManager.toCurrentPass()}}}),cc._RF.pop()},{}],gameCtrl:[function(e,t){"use strict";cc._RF.push(t,"ef772hkIPxFLLA7/neq2RA8","gameCtrl"),cc.Class({extends:cc.Component,properties:{gameResult:null},onLoad:function(){this.enemy=this.node.getChildByName("enemy"),this.enemyData=this.enemy.getComponent("enemyData"),this.enemyUI=this.enemy.getComponent("enemyUICtrl"),this.player=this.node.getChildByName("player"),this.playerData=this.player.getComponent("playerData"),this.playerUI=this.player.getComponent("playerUICtrl"),this.chessDealer=this.node.getComponent("chessDealer"),this.enemyDealer=this.node.getComponent("enemyDealer"),this.masterDealer=this.node.getComponent("masterDealer"),this.buffDealer=this.node.getComponent("buffDealer"),this.effect=this.node.getChildByName("effect"),this.initGameInfo(),config.UICtrl.UIList.game=this.node,config.UICtrl.UIList.effect=this.effect,this.usingSkill=!1,config.animCtrl.initWaitingAnimEvent()},start:function(){this.enemyUI.refreshUI(),this.playerUI.refreshUI(),config.UICtrl.addUI("other",cc.director.getScene())},initGameInfo:function(){this.initEnemyData(),this.initEnemyBeginSkill(),this.initMasterData(),this.initPlayerData()},initEnemyData:function(){for(var e=config.passInfo,t=config.warehouse.json.enemyData,n=0;n<t.length;n++)t[n].id==e.enemyID&&this.loadEnemyData(t[n],e)},loadEnemyData:function(e,t){this.enemyData.MaxHP=t.life,this.enemyData.currentHP=t.life,this.enemyData.ATK=t.attack,this.enemyData.elementType=e.element,this.enemyData.actionLine=e.actionLine,this.enemyData.zombieName=e.zombieName,this.enemyData.action1Data=[e.action1,e.action1Effect],this.enemyData.action2Data=[e.action2,e.action2Effect],this.enemyData.action3Data=[e.action3,e.action3Effect],this.enemyData.spine=e.spine},initEnemyBeginSkill:function(){},initPlayerData:function(){this.playerData.MaxHP=100,this.playerData.currentHP=100,this.playerData.MaxEnergy=200,this.playerData.energy=0},initMasterData:function(){for(var e=config.warehouse.json.masterData,t=0;t<e.length;t++)e[t].id==config.playerInfo.usingMaster&&(config.gameInfo.masterData=e[t])},checkGameResult:function(){return"win"==this.gameResult?(config.UICtrl.addUI("winLayer",config.UICtrl.findUI("other")),!0):"lose"==this.gameResult&&(config.UICtrl.addUI("loseLayer",config.UICtrl.findUI("other")),!0)}}),cc._RF.pop()},{}],gameStatementCtrl:[function(e,t){"use strict";cc._RF.push(t,"ebf4cfsPVlOaq0J8fY24lz2","gameStatementCtrl"),cc.Class({extends:e("./otherUIBase"),properties:{},init:function(e){this.win=!!e},onLoad:function(){this.content=this.node.getChildByName("content"),this.bg=this.content.getChildByName("bg"),this.title=this.content.getChildByName("title"),this.leave=this.content.getChildByName("leave"),this.getReword=this.content.getChildByName("getReword"),this.getBonus=this.content.getChildByName("getBonus"),this.nextPass=this.content.getChildByName("nextPass"),this.win?this.title.getComponent(cc.Label).string="\u6e38\u620f\u80dc\u5229":this.title.getComponent(cc.Label).string="\u6e38\u620f\u5931\u8d25",config.tools.addCallBackToButton(this.node,"gameStatementCtrl","backToMain",null,this.leave)},backToMain:function(){config.eventDelegate.cleanAllEvent(),cc.director.loadScene("main")}}),cc._RF.pop()},{"./otherUIBase":"otherUIBase"}],heal:[function(e,t){"use strict";cc._RF.push(t,"ef0e69Tch9I8JLfsWi2GSmp","heal"),cc.Class({extends:e("buffBase"),properties:{},start:function(){}}),cc._RF.pop()},{buffBase:"buffBase"}],homeCtrl:[function(e,t){"use strict";cc._RF.push(t,"82f1eJcDJdFPoUDc9Hl3l0R","homeCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},onDestroy:function(){config.UICtrl.UIList[this.node.name]=null}}),cc._RF.pop()},{}],ironBody:[function(e,t){"use strict";cc._RF.push(t,"bb0ec6RYjNLTYOmIJLO3Tsi","ironBody"),cc.Class({extends:e("./buffBase"),properties:{nodeData:0},onInitData:function(e,t,n,o){this.initData(e,t,n,o),this.onGetSkill()},onGetSkill:function(){this.data.getSkill[1].num1=-1*(this.data.getSkill[0].num1+config.UICtrl.getUIComponent("game").playerData.hurtFix),this.getSkill()},onCostSkill:function(){this.data.costSkill[1].num1=this.data.getSkill[0].num1+config.UICtrl.getUIComponent("game").playerData.hurtFix,this.costSkill()},onRefresh:function(){this.data.getSkill[1].num1=-1*(this.data.getSkill[0].num1+config.UICtrl.getUIComponent("game").playerData.hurtFix),this.data.costSkill[1].num1=this.data.getSkill[0].num1+config.UICtrl.getUIComponent("game").playerData.hurtFix,this.refresh()},nextStage:function(){this.duration>0&&(this.duration-=1,this.refreshCount(this.duration),this.duration<=0&&(this.onCostSkill(),this.onBuffRemove()))}}),cc._RF.pop()},{"./buffBase":"buffBase"}],kstools:[function(require,module,exports){"use strict";cc._RF.push(module,"8e7ac0jphVMWbk1nizPqK7S","kstools"),module.exports={login:function(){var e=this;this.checkSession()?console.log("\u8fdb\u5165\u6e38\u620f"):ks.login({success:function(t){e.authorize("scope.userInfo",t.code)},fail:function(){}})},authorize:function(e,t){var n=this;ks.authorize({scope:e,success:function(){console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6210\u529f"),n.getKSUserInfo(t)},fail:function(e){console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25: "+JSON.stringify(e)),ks.exitMiniProgram()},complete:function(){}})},getKSUserInfo:function(e){var t=this;ks.getUserInfo({success:function(n){config.tools.loadAvatarPicOnKs(n.avatarUrl),config.accountInfo.nickName=n.nickName,config.accountInfo.avatarlUrl=n.avatarUrl,t.openIDRequest(e)},fail:function(e){console.log("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25\uff1a"+JSON.stringify(e))},complete:function(){}})},openIDRequest:function(e){var t=this,n="http://60.204.241.244:8079/cowplay/"+e;ks.request({url:n,method:"GET",success:function(e){console.log("\u767b\u5f55\u6210\u529f");var n=JSON.parse(e.data.data);config.accountInfo.openID=n.open_id,t.getPlayerInfoByOpenId()},fail:function(){}})},getPlayerInfoByOpenId:function(){var e=this;ks.request({url:"http://60.204.241.244:8079/cowplay/getinfobyopenid",data:{openid:config.accountInfo.openID},method:"POST",success:function(t){var n=t.data.data.playerinfo,o=t.data.data.userinfo;if(n){var i=config.saver.getData("playerInfo");config.saver.checkSaverVersion(i)?config.playerInfo=i:e.transfromVersion(i),e.readPlayerInfo(n),e.checkFirst(),e.editPlayerInfo(),console.log("\u8bfb\u53d6\u5b58\u6863\u6210\u529f")}else console.log("\u521b\u5efa\u5b58\u6863"),config.saver.deleteData("playerInfo"),e.checkSaver(),e.checkFirst(),e.creatPlayerInfo();o?console.log(o):e.addUserInfo(),config.UICtrl.getUIComponent("loading").lunched=!0,config.playerInfo.firstGame?config.UICtrl.getUIComponent("cutting").cutToScene("game"):config.UICtrl.getUIComponent("cutting").cutToScene("rank")},fail:function(){}})},getUserInfoByOpenId:function getUserInfoByOpenId(id,list,index,type){ks.request({url:"http://60.204.241.244:8079/cowplay/getinfobyopenid",data:{openid:id},method:"POST",success:function success(res){"daily"==type?(list[index].userinfo=res.data.data.userinfo,list[index].userinfo.firstpasstoday=JSON.parse(eval("("+res.data.data.playerinfo.firstpasstoday+")")),list[index].userinfo.loweststeptoday=res.data.data.playerinfo.loweststeptoday,list[index].userinfo.cownum=res.data.data.playerinfo.data4,list[index].userinfo.usingskin=res.data.data.playerinfo.usingskin,config.dailyProgress-=1,config.dailyProgress<=0&&(config.dailyDone=!0)):"history"==type?res.data.data.userinfo&&(list[index].userinfo=res.data.data.userinfo,list[index].userinfo.cownum=res.data.data.playerinfo.passedtime):"yesterday"==type?res.data.data.userinfo&&(list[index].userinfo=res.data.data.userinfo,list[index].userinfo.cownum=res.data.data.playerinfo.data4):"race"==type&&(list[index]=[res.data.data.userinfo.nickname,res.data.data.playerinfo.highestmoneytoday,res.data.data.playerinfo.openid],config.raceProgress-=1,config.raceProgress<=0&&config.UICtrl.getUIComponent("race").refreshUI())},fail:function(){}})},creatPlayerInfo:function(){ks.request({url:"http:/60.204.241.244:8079/cowplay/addplayerinfo",data:{openid:config.accountInfo.openID.toString(),firstGame:config.playerInfo.firstGame.toString(),passedYesterday:config.playerInfo.passedYesterday.toString(),firstLunchToday:config.playerInfo.firstLunchToday.toString(),creatAccountDate:JSON.stringify(JSON.stringify(config.playerInfo.creatAccountDate)),lastLunchDate:JSON.stringify(JSON.stringify(config.playerInfo.lastLunchDate)),playTimesToday:config.playerInfo.playTimesToday.toString(),passedTime:config.playerInfo.passedTime.toString(),highestMoneyToday:config.playerInfo.highestMoneyToday.toString(),lowestStepToday:config.playerInfo.lowestStepToday.toString(),firstPassToday:JSON.stringify(JSON.stringify(config.playerInfo.firstPassToday)),starNum:config.playerInfo.starNum.toString(),unlockedSkin:config.playerInfo.unlockedSkin.toString(),usingSkin:config.playerInfo.usingSkin.toString(),province:config.playerInfo.province.toString(),data1:config.playerInfo.data1.toString(),data2:config.playerInfo.data2.toString(),data3:config.playerInfo.data3.toString(),data4:config.playerInfo.data4.toString(),data5:config.playerInfo.data5.toString(),saverVersion:config.playerInfo.saverVersion.toString()},method:"POST",success:function(){console.log("\u65b0\u589e\u7528\u6237\u5b58\u6863\u4fe1\u606f\u6210\u529f")},fail:function(){console.log("\u65b0\u589e\u7528\u6237\u5b58\u6863\u4fe1\u606f\u5931\u8d25")}})},editPlayerInfo:function(){ks.request({url:"http:/60.204.241.244:8079/cowplay/editplayerinfo",data:{openid:config.accountInfo.openID.toString(),firstGame:config.playerInfo.firstGame.toString(),passedYesterday:config.playerInfo.passedYesterday.toString(),firstLunchToday:config.playerInfo.firstLunchToday.toString(),creatAccountDate:JSON.stringify(JSON.stringify(config.playerInfo.creatAccountDate)),lastLunchDate:JSON.stringify(JSON.stringify(config.playerInfo.lastLunchDate)),playTimesToday:config.playerInfo.playTimesToday.toString(),passedTime:config.playerInfo.passedTime.toString(),highestMoneyToday:config.playerInfo.highestMoneyToday.toString(),lowestStepToday:config.playerInfo.lowestStepToday.toString(),firstPassToday:JSON.stringify(JSON.stringify(config.playerInfo.firstPassToday)),starNum:config.playerInfo.starNum.toString(),unlockedSkin:config.playerInfo.unlockedSkin.toString(),usingSkin:config.playerInfo.usingSkin.toString(),province:config.playerInfo.province.toString(),data1:config.playerInfo.data1.toString(),data2:config.playerInfo.data2.toString(),data3:config.playerInfo.data3.toString(),data4:config.playerInfo.data4.toString(),data5:config.playerInfo.data5.toString(),saverVersion:config.playerInfo.saverVersion.toString()},method:"POST",success:function(){console.log("\u4fee\u6539\u7528\u6237\u5b58\u6863\u4fe1\u606f\u6210\u529f")},fail:function(){console.log("\u4fee\u6539\u7528\u6237\u5b58\u6863\u4fe1\u606f\u5931\u8d25")}})},addUserInfo:function(){ks.request({url:"http:/60.204.241.244:8079/cowplay/adduserinfo",data:{openid:config.accountInfo.openID.toString(),avatarlUrl:config.accountInfo.avatarlUrl.toString(),cowNum:config.playerInfo.passedTime.toString(),highestMoney:config.playerInfo.highestMoneyToday.toString(),lowestStepToday:config.playerInfo.lowestStepToday.toString(),firstPassToday:JSON.stringify(JSON.stringify(config.playerInfo.firstPassToday)),nickName:config.accountInfo.nickName.toString(),usingSkin:config.playerInfo.usingSkin.toString(),province:config.playerInfo.province.toString()},method:"POST",success:function(){console.log("\u65b0\u589e\u7528\u6237\u4fe1\u606f\u6210\u529f")},fail:function(){console.log("\u65b0\u589e\u7528\u6237\u4fe1\u606f\u5931\u8d25")}})},editUserInfo:function(){ks.request({url:"http:/60.204.241.244:8079/cowplay/edituserinfo",data:{openid:config.accountInfo.openID.toString(),avatarlUrl:config.accountInfo.avatarlUrl.toString(),cowNum:config.playerInfo.passedTime.toString(),highestMoney:config.playerInfo.highestMoneyToday.toString(),lowestStepToday:config.playerInfo.lowestStepToday.toString(),firstPassToday:JSON.stringify(JSON.stringify(config.playerInfo.firstPassToday)),nickName:config.accountInfo.nickName.toString(),usingSkin:config.playerInfo.usingSkin.toString(),province:config.playerInfo.province.toString()},method:"POST",success:function(){console.log("\u4fee\u6539\u7528\u6237\u4fe1\u606f\u6210\u529f")},fail:function(){console.log("\u4fee\u6539\u7528\u6237\u4fe1\u606f\u5931\u8d25")}})},readPlayerInfo:function readPlayerInfo(data){config.playerInfo.creatAccountDate=JSON.parse(eval("("+data.creataccountdate+")")),config.playerInfo.data1=parseInt(data.data1),config.playerInfo.data2=parseInt(data.data2),config.playerInfo.data3=parseInt(data.data3),config.playerInfo.data4=parseInt(data.data4),config.playerInfo.data5=parseInt(data.data5),config.playerInfo.firstGame=JSON.parse(data.firstgame),config.playerInfo.firstLunchToday=JSON.parse(data.firstlunchtoday),config.playerInfo.firstPassToday=JSON.parse(eval("("+data.firstpasstoday+")")),config.playerInfo.highestMoneyToday=parseInt(data.highestmoneytoday),config.playerInfo.lastLunchDate=JSON.parse(eval("("+data.lastlunchdate+")")),config.playerInfo.lowestStepToday=parseInt(data.loweststeptoday),config.accountInfo.openID=data.openid,config.playerInfo.passedTime=parseInt(data.passedtime),config.playerInfo.passedYesterday=JSON.parse(data.passedyesterday),config.playerInfo.playTimesToday=parseInt(data.playtimestoday),config.playerInfo.province=data.province,config.playerInfo.starNum=parseInt(data.starnum),data.unlockedskin?config.playerInfo.unlockedSkin=data.unlockedskin.split(","):config.playerInfo.unlockedSkin=[],config.playerInfo.usingSkin=data.usingskin},checkSession:function(){ks.checkSession({success:function(){return!0},fail:function(){return!1}})},addUserScore:function(){ks.request({url:"http:/60.204.241.244:8079/cowplay/adduserscore",data:{openid:config.accountInfo.openID.toString(),score:config.playerInfo.highestMoneyToday},method:"POST",success:function(e){console.log(e)},fail:function(e){console.log(e)}})},getScoreToday:function(){var e=this;ks.request({url:"http:/60.204.241.244:8079/cowplay/getscore/today",method:"GET",success:function(t){t.data.data.list.length>0?(config.dailyRank=e.extractData(t.data.data.list,"daily"),config.dailyProgress=config.dailyRank.length):(config.dailyRank=[],config.dailyDone=!0)},fail:function(){config.dailyDone=!0}})},getScoreYesterday:function(){var e=this;ks.request({url:"http:/60.204.241.244:8079/cowplay/getscore/yesterday",method:"GET",success:function(t){config.yesterdayDone=!0,config.yesterdayRank=e.extractData(t.data.data.list,"yesterday")},fail:function(){config.yesterdayDone=!0}})},getScoreAll:function(){var e=this;ks.request({url:"http:/60.204.241.244:8079/cowplay/getscore/all",method:"GET",success:function(t){config.historyDone=!0,config.historyRank=e.extractData(t.data.data.list,"history")},fail:function(){config.historyDone=!0}})},extractData:function(e,t){for(var n=[],o=0;o<e.length;o++){var i={openid:e[o].openid,score:e[o].score,score_day:e[o].score_day,userinfo:null};n.push(i),this.getUserInfoByOpenId(e[o].openid,n,o,t)}return n},getDailyPlayerInfoByOpenId:function(e){for(var t=0;t<config.dailyRank.length;t++)if(config.dailyRank[t].openid==e)return[config.dailyRank[t].userinfo.nickname,config.dailyRank[t].score,config.dailyRank[t].userinfo.openid];return null},getSetting:function(){ks.getSetting({success:function(){},fail:function(){}})},shareAppMessage:function(){ks.shareAppMessage()},checkDesk:function(){ks.checkShortcut({success:function(e){return console.log("\u662f\u5426\u5df2\u6dfb\u52a0\u5feb\u6377\u65b9\u5f0f",e.installed),!!e.installed},fail:function(e){-10005===e.code?console.log("\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd"):console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f\u5931\u8d25",e.msg)}})},addDesk:function(){ks.addShortcut({success:function(){console.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f")},fail:function(e){-10005===e.code?console.log("\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd"):console.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25",e.msg)}})},activeShare:function(e){ks.shareAppMessage({success:function(){console.log("\u5206\u4eab\u6210\u529f"),config.playerInfo.data5-=1,config.UICtrl.getUIComponent("checkLayer").getReword(e),config.saver.initData()},fail:function(){console.log("\u5206\u4eab\u5931\u8d25"),cc.find("Canvas").getComponent("gameCtrl").stepCount<=0&&config.UICtrl.getUIComponent("checkLayer").settle()}})},transfromVersion:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var o=n[t],i=o[0],a=o[1];"saverVersion"!=i&&(config.playerInfo[i]=a)}},checkSaver:function(){config.saver.hasData("playerInfo")&&config.saver.getData("playerInfo")?config.playerInfo.creatAccountDate||config.saver.noteCreatAccountDate():(console.log("\u6ce8\u518c\u6e38\u620f\u8d26\u53f7"),config.saver.noteCreatAccountDate())},checkFirst:function(){config.saver.checkFirstLunchToday()?(console.log("\u662f\u4eca\u5929\u7b2c\u4e00\u6b21\u767b\u5f55"),config.playerInfo.highestMoneyToday>0||config.playerInfo.lowestStepToday>0||config.playerInfo.firstPassToday?config.playerInfo.passedYesterday=!0:config.playerInfo.passedYesterday=!1,config.playerInfo.highestMoneyToday=0,config.playerInfo.lowestStepToday=0,config.playerInfo.firstPassToday=null,config.playerInfo.playTimesToday=0,config.playerInfo.data4=0,config.playerInfo.data2=0,config.playerInfo.raceList=[],config.playerInfo.firstLunchToday=!0,config.playerInfo.data1>7&&(config.playerInfo.data1=0),config.playerInfo.data1+=1,config.playerInfo.missionList=this.drawSixDailyMissions(),config.playerInfo.missionProgress=0,config.playerInfo.behaviorDataCollection={shareGame:0,fourRemove:0,fiveRemove:0,watchAD:0,sell1000W:0,sell20Fruits:0,buyCommodity:0,checkRank:0,useAddStep:0,usePriceUp:0,useGetMoney:0},config.playerInfo.dailyCommodityList=this.drawFourDailyCommodities(),0==config.playerInfo.rank?config.playerInfo.starNum+=10:1==config.playerInfo.rank?config.playerInfo.starNum+=8:2==config.playerInfo.rank?config.playerInfo.starNum+=6:3==config.playerInfo.rank?config.playerInfo.starNum+=5:4==config.playerInfo.rank?config.playerInfo.starNum+=4:5==config.playerInfo.rank?config.playerInfo.starNum+=3:6==config.playerInfo.rank?config.playerInfo.starNum+=2:config.playerInfo.rank>=7&&config.playerInfo.rank<10&&(config.playerInfo.starNum+=1),config.playerInfo.rank=10,config.playerInfo.data5=1,console.log(config.playerInfo),console.log("\u5237\u65b0\u6bcf\u65e5\u6570\u636e")):console.log("\u4e0d\u662f\u4eca\u5929\u7b2c\u4e00\u6b21\u767b\u5f55"),config.saver.noteLunchDate(),config.saver.initData()},drawFourDailyCommodities:function(){for(var e=[],t=config.warehouse.json.dailyCommodityList.length,n=0;n<4;n++)e.push(Math.floor(Math.random()*t));return e},drawSixDailyMissions:function(){for(var e=[],t=config.warehouse.json.missionList.length,n=0;n<t;n++)e.push(n);for(;e.length>6;)e.splice(Math.floor(Math.random()*e.length),1);return e}},cc._RF.pop()},{}],leaveCtrl:[function(e,t){"use strict";cc._RF.push(t,"80dedmwj29HTJHQhoKxREpn","leaveCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){config.tools.addCallBackToButton(this.node,"leaveCtrl","leave",null,this.node)},leave:function(){config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1),config.playerInfoManager.toMain()}}),cc._RF.pop()},{}],listButtonCtrl:[function(e,t){"use strict";cc._RF.push(t,"5dc12MEOdhHu64SfnkOBI+C","listButtonCtrl"),cc.Class({extends:cc.Component,properties:{},init:function(e,t){this.Background=this.node.getChildByName("Background"),this.icon=this.Background.getChildByName("icon"),this.label=this.Background.getChildByName("Label"),this.label.getComponent(cc.Label).string=t;var n=config.warehouse.atlas[e].getSpriteFrames();config.tools.addAnimationToNode(this.icon,n,e,cc.WrapMode.Loop,.5).play(e)}}),cc._RF.pop()},{}],loadingCtrl:[function(e,t){"use strict";cc._RF.push(t,"90f1ecRJGVOnqZjxXdAK8L1","loadingCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.progressCount=0,this.totalRes=Object.keys(config.warehouse).length,this.hasLoadRes=0,this.begin=this.node.getChildByName("begin"),this.begin.active=!1,config.tools.addCallBackToButton(this.node,"loadingCtrl","gameBegin",null,this.begin),this.loadGameAssets()},gameBegin:function(){cc.director.loadScene("main")},loadGameAssets:function(){this.loadMyRes("sprite",cc.SpriteFrame,"spriteFrame"),this.loadMyRes("json",cc.JsonAsset,"json"),this.loadMyRes("prefab",cc.Prefab,"prefabList"),this.loadMyRes("spine",sp.SkeletonData,"SkeletonData"),this.loadMyRes("atlas",cc.SpriteAtlas,"atlas"),this.loadMyRes("sound",cc.videoClip,"sound")},loadMySub:function(e,t,n){var o=this;cc.assetManager.loadBundle(e,function(e,i){e||i.loadDir("",t,function(e,t){if(e);else{for(var i=0;i<t.length;i++){var a=t[i]instanceof cc.SpriteAtlas?t[i].name.slice(0,-6):t[i].name;t[i]instanceof cc.JsonAsset?config.warehouse[n][a]=t[i].json:config.warehouse[n][a]=t[i]}o.hasLoadRes+=1}})})},loadMyRes:function(e,t,n){var o=this;cc.resources.loadDir(e,t,function(e,t){if(e);else{for(var i=0;i<t.length;i++){var a=t[i]instanceof cc.SpriteAtlas?t[i].name.slice(0,-6):t[i].name;t[i]instanceof cc.JsonAsset?config.warehouse[n][a]=t[i].json:config.warehouse[n][a]=t[i]}o.hasLoadRes+=1}})},update:function(){this.hasLoadRes===this.totalRes&&(this.begin.active=!0,this.hasLoadRes=0)}}),cc._RF.pop()},{}],loseLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"81232+ya8dIRKHT5FSoUFok","loseLayerCtrl"),cc.Class({extends:e("otherUIBase"),properties:{},onLoad:function(){this.mask=this.node.getChildByName("mask"),this.content=this.node.getChildByName("content"),this.next=this.content.getChildByName("next"),this.back=this.content.getChildByName("leave"),config.tools.addCallBackToButton(this.node,"loseLayerCtrl","currentPass",null,this.next),config.tools.addCallBackToButton(this.node,"loseLayerCtrl","leave",null,this.back),config.dj.playEffect(config.warehouse.sound["\u901a\u5173\u5931\u8d25-\u6e38\u620f\u7ed3\u675f"],1)},currentPass:function(){config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1),config.playerInfoManager.toCurrentPass()},leave:function(){config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1),config.playerInfoManager.toMain()}}),cc._RF.pop()},{otherUIBase:"otherUIBase"}],mainCtrl:[function(e,t){"use strict";cc._RF.push(t,"4b546cskNhBkolgbDi0CoTG","mainCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.passAdjustment=this.node.getChildByName("passAdjustment"),this.battleAdjustment=this.node.getChildByName("battleAdjustment"),this.leftList=this.node.getChildByName("leftList"),this.rightList=this.node.getChildByName("rightList"),this.masterSet=this.battleAdjustment.getChildByName("masterSet"),this.chessSet1=this.battleAdjustment.getChildByName("chessSet1"),this.chessSet2=this.battleAdjustment.getChildByName("chessSet2"),this.chessSet3=this.battleAdjustment.getChildByName("chessSet3"),this.chessSet4=this.battleAdjustment.getChildByName("chessSet4"),this.chessSet5=this.battleAdjustment.getChildByName("chessSet5"),config.tools.addCallBackToButton(this.node,"mainCtrl","showMasterSelection",null,this.masterSet),this.initChessButton(),this.refreshChessPreview(),this.refreshMasterPreview(),this.initBuffList(),this.initAnim()},initAnim:function(){cc.tween(this.chessSet1.getChildByName("chess").getChildByName("pic")).to(1,{y:9},{easing:"quadInOut"}).to(1,{y:6},{easing:"quadInOut"}).union().repeatForever().start(),cc.tween(this.chessSet2.getChildByName("chess").getChildByName("pic")).to(1,{y:9},{easing:"quadInOut"}).to(1,{y:6},{easing:"quadInOut"}).union().repeatForever().start(),cc.tween(this.chessSet3.getChildByName("chess").getChildByName("pic")).to(1,{y:9},{easing:"quadInOut"}).to(1,{y:6},{easing:"quadInOut"}).union().repeatForever().start(),cc.tween(this.chessSet4.getChildByName("chess").getChildByName("pic")).to(1,{y:9},{easing:"quadInOut"}).to(1,{y:6},{easing:"quadInOut"}).union().repeatForever().start(),cc.tween(this.chessSet5.getChildByName("chess").getChildByName("pic")).to(1,{y:9},{easing:"quadInOut"}).to(1,{y:6},{easing:"quadInOut"}).union().repeatForever().start()},showShowLayer:function(){},showMasterSelection:function(){config.UICtrl.getUIComponent("Canvas").selectUI("masterSelection"),config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1)},refreshMasterPreview:function(){var e=config.playerInfo.usingMaster,t=config.playerInfoManager.getMasterData(e).name;this.masterSet.getChildByName("bg").addChild(cc.instantiate(config.warehouse.prefabList[t+"\u534a\u8eab\u50cf"]))},initChessButton:function(){this.setChessButton(this.chessSet1),this.setChessButton(this.chessSet2),this.setChessButton(this.chessSet3),this.setChessButton(this.chessSet4),this.setChessButton(this.chessSet5)},refreshChessPreview:function(){function e(e,t){var a=config.playerInfoManager.getBaseChessDataByID(t),s=config.playerInfoManager.getChessFragments(a.id),c=config.playerInfoManager.getLevelUpRequire(a.id);i(e,a.level1Pic),o(e,a.element),n(e,s,c)}function t(e){i(e),o(e,-1),n(e,-1)}function n(e,t,n){t>=0?(e.getChildByName("chess").getChildByName("progress").getComponent(cc.ProgressBar).progress=t/n,e.getChildByName("chess").getChildByName("progress").active=!0,e.getChildByName("chess").getChildByName("progress").getChildByName("num").getComponent(cc.Label).string=t+"/"+n):e.getChildByName("chess").getChildByName("progress").active=!1}function o(e,t){if(t>=0)switch(t){case 0:e.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u91d1\u5c5e\u6027\u5e95\u677f"];break;case 1:e.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u6728\u5c5e\u6027\u5e95\u677f"];break;case 2:e.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u6c34\u5c5e\u6027\u5e95\u677f"];break;case 3:e.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u706b\u5c5e\u6027\u5e95\u677f"];break;case 4:e.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u571f\u5c5e\u6027\u5e95\u677f"]}else e.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=null}function i(e,t){e.getChildByName("chess").getChildByName("pic").getComponent(cc.Sprite).spriteFrame=t?config.warehouse.spriteFrame[t]:null}config.playerInfo.usingChesses[0]?e(this.chessSet1,config.playerInfo.usingChesses[0]):t(this.chessSet1),config.playerInfo.usingChesses[1]?e(this.chessSet2,config.playerInfo.usingChesses[1]):t(this.chessSet2),config.playerInfo.usingChesses[2]?e(this.chessSet3,config.playerInfo.usingChesses[2]):t(this.chessSet3),config.playerInfo.usingChesses[3]?e(this.chessSet4,config.playerInfo.usingChesses[3]):t(this.chessSet4),config.playerInfo.usingChesses[4]?e(this.chessSet5,config.playerInfo.usingChesses[4]):t(this.chessSet5)},setChessButton:function(e){config.tools.addCallBackToButton(this.node,"mainCtrl","showChessSelection",null,e.getChildByName("chess"))},showChessSelection:function(){config.UICtrl.getUIComponent("Canvas").selectUI("chessSelection"),config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1)},initBuffList:function(){this.creatListButton("\u7b7e\u5230",this.leftList),this.creatListButton("\u4efb\u52a1",this.leftList),this.creatListButton("\u56fe\u9274",this.leftList),this.creatListButton("\u5ba2\u670d",this.leftList),this.creatListButton("\u798f\u5229",this.rightList),this.creatListButton("\u6392\u884c",this.rightList),this.creatListButton("\u9886\u53d6",this.rightList)},creatListButton:function(e,t){var n=cc.instantiate(config.warehouse.prefabList.listButton);t.addChild(n),n.getComponent("listButtonCtrl").init(e,e)},onDestroy:function(){config.UICtrl.UIList[this.node.name]=null}}),cc._RF.pop()},{}],masterDealer:[function(e,t){"use strict";cc._RF.push(t,"7c778ajAnhDJqQuoZevlrys","masterDealer"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){switch(this.playerData=this.node.getChildByName("player").getComponent("playerData"),this.enemyData=this.node.getChildByName("enemy").getComponent("enemyData"),this.board=this.node.getChildByName("boardCover").getChildByName("boardLayer").getComponent("boardLayerCtrl"),config.playerInfo.usingMaster){case 4e4:this.init40000();break;case 40002:this.init40002();break;case 40003:this.init40003()}},init40000:function(){var e=this,t=config.gameInfo.masterData;config.eventDelegate.addEvent("\u4f7f\u7528\u6280\u80fd",function(){var t=cc.instantiate(config.warehouse.prefabList.chooseChess);e.node.getChildByName("effect").addChild(t),t.getComponent("chooseChessCtrl").setMaskSize(390,260),t.getComponent("chooseChessCtrl").setMaskPosition(0,-160),t.getComponent("chooseChessCtrl").requireNum=1}),config.eventDelegate.addEvent("\u68c0\u67e5\u68cb\u5b50",function(e){1!=e.detail.level&&2!=e.detail.level||config.eventDelegate.dispatchEvent("\u9009\u62e9\u68cb\u5b50",e.detail)}),config.eventDelegate.addEvent("\u9009\u62e9\u68cb\u5b50\u5b8c\u6bd5",function(t){for(var n=t.detail,o=0;o<n.length;o++)n[o].level+=1,n[o].setPic(n[o].getChessPic());config.UICtrl.getUIComponent("game").usingSkill=!1,e.board.setControlMode(1)}),config.eventDelegate.addEvent("\u68cb\u5b50\u6d88\u9664",function(n){n.detail.level>1&&e.playerData.changeEnergy(t.passiveSkillData[0])})},init40002:function(){var e=this,t=config.gameInfo.masterData,n=t.activeSkillData,o=t.passiveSkillData;this.playerData.hurtFix-=o[0],config.eventDelegate.addEvent("\u4f7f\u7528\u6280\u80fd",function(){e.playerData.addBuff(n[0],n[1]),config.UICtrl.getUIComponent("game").usingSkill=!1}),config.eventDelegate.addEvent()},init40003:function(){var e=this,t=config.gameInfo.masterData,n=t.activeSkillData,o=t.passiveSkillData;config.eventDelegate.addEvent("\u4f7f\u7528\u6280\u80fd",function(){for(var t=0;t<n[0];t++){var o=e.playerData.getMasterATK();console.log(o),e.enemyData.getAttack(n[1]/100*o),config.UICtrl.getUIComponent("game").usingSkill=!1,config.UICtrl.getUIComponent("game").checkGameResult()}}),config.eventDelegate.addEvent("\u654c\u4eba\u53d7\u5230\u4f24\u5bb3",function(){e.playerData.addBuff(o[0],o[1])})}}),cc._RF.pop()},{}],masterItemCtrl:[function(e,t){"use strict";cc._RF.push(t,"2fdccb+d7tGbqmQNYcmjK57","masterItemCtrl"),cc.Class({extends:cc.Component,properties:{id:0,data:null},onLoad:function(){config.tools.addCallBackToButton(this.node,"masterItemCtrl","check",null,this.node)},setData:function(e,t){this.id=e,this.data=t},check:function(){config.UICtrl.getUIComponent("masterSelection").refreshInfo(this.data),config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1)},unlock:function(){this.refreshLevel(this.data.name),this.refreshCard(this.data.name)},lock:function(){this.refreshLevel("\u672a\u89e3\u9501")},refreshLevel:function(e){this.node.getChildByName("level").getComponent(cc.Label).string=e},refreshCard:function(e){this.node.getChildByName("icon").addChild(cc.instantiate(config.warehouse.prefabList[e+"\u5361\u724c\u5934\u50cf"]))}}),cc._RF.pop()},{}],masterSelectionCtrl:[function(e,t){"use strict";cc._RF.push(t,"90e8cSwlgdAv5VOlu8Bjpvv","masterSelectionCtrl"),cc.Class({extends:cc.Component,properties:{checkID:0},onLoad:function(){this.content=this.node.getChildByName("content"),this.leave=this.content.getChildByName("leave"),this.select=this.content.getChildByName("select"),this.levelUp=this.content.getChildByName("levelUp"),this.container=this.content.getChildByName("container"),this.info=this.content.getChildByName("info"),this.skillIntro=this.info.getChildByName("skillIntro"),this.activeSkill=this.skillIntro.getChildByName("activeSkill"),this.passiveSkill=this.skillIntro.getChildByName("passiveSkill"),config.tools.addCallBackToButton(this.node,"masterSelectionCtrl","selectMaster",null,this.select),this.initContent()},start:function(){},onEnable:function(){this.refreshContent()},initContent:function(){var e=config.warehouse.json.masterData,t=config.playerInfo.usingMaster;this.checkingID=t;for(var n=0;n<e.length;n++){var o=cc.instantiate(config.warehouse.prefabList.masterItem);this.container.getChildByName("view").getChildByName("content").addChild(o),o.getComponent("masterItemCtrl").setData(e[n].id,e[n]),e[n].id==t&&this.refreshInfo(e[n])}},refreshContent:function(){for(var e=this.container.getChildByName("view").getChildByName("content").children,t=0;t<e.length;t++)config.tools.ownMaster(e[t].getComponent("masterItemCtrl").id)?e[t].getComponent("masterItemCtrl").unlock():e[t].getComponent("masterItemCtrl").lock()},levelUpMaster:function(){config.playerInfo.chessLevel[this.checkID+""]+=1},selectMaster:function(){config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1),config.playerInfoManager.checkLockedMaster(this.checkingID)||(config.playerInfo.usingMaster=this.checkingID,config.UICtrl.getUIComponent("main").refreshMasterPreview(),config.UICtrl.getUIComponent("Canvas").selectUI("main"))},refreshInfo:function(e){this.checkingID=e.id,this.info.getChildByName("name").getComponent(cc.Label).string=e.name,this.activeSkill.getChildByName("disc").getComponent(cc.Label).string=e.activeSkillIntro,this.passiveSkill.getChildByName("disc").getComponent(cc.Label).string=e.passiveSkillIntro,e.pic?this.info.getChildByName("pic").getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[e.pic]:this.info.getChildByName("pic").getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=null},onDestroy:function(){config.UICtrl.UIList[this.node.name]=null}}),cc._RF.pop()},{}],notificationCenter:[function(e,t){"use strict";cc._RF.push(t,"f5f695ONeBEwoNByVe5Eg0e","notificationCenter");var n=new cc.EventTarget;t.exports=n,cc._RF.pop()},{}],objectPool:[function(e,t){"use strict";cc._RF.push(t,"21f9fai0cNFZ6LLsDXPM5Vs","objectPool"),t.exports={poolList:{},creatNewPool:function(e){this.poolList[e]?this.poolList[e].clear():this.poolList[e]=new cc.NodePool},clearPool:function(e){this.poolList[e]&&this.poolList[e].clear()},get:function(e){if(this.poolList[e])return this.poolList[e].size()>0?this.poolList[e].get():null},put:function(e,t){this.poolList[e]&&this.poolList[e].put(t)},checkSize:function(e,t){return this.poolList[e].size()>=t},getPrefab:function(e){var t=config.warehouse.prefabList[e];if(t)if(this.poolList[e]){if(this.checkSize(e,1))return this.poolList[e].get();this.poolList[e].put(cc.instantiate(t))}else this.poolList[e]=new cc.NodePool,this.poolList[e].put(cc.instantiate(t));else console.log("\u6ca1\u6709"+e+"\u9884\u5236\u4f53");return this.poolList[e].get()},getEffect:function(e){var t=config.warehouse.prefabList.effectBaseNode;if(this.poolList[e]){if(this.checkSize(e,1))return this.poolList[e].get();this.poolList[e].put(cc.instantiate(t))}else this.poolList[e]=new cc.NodePool,this.poolList[e].put(cc.instantiate(t));return this.poolList[e].get()}},cc._RF.pop()},{}],otherCtrl:[function(e,t){"use strict";cc._RF.push(t,"18086ySLhNLG5GSVhzc8rm6","otherCtrl"),cc.Class({extends:cc.Component,properties:{},onDestroy:function(){config.UICtrl.UIList[this.node.name]=null}}),cc._RF.pop()},{}],otherUIBase:[function(e,t){"use strict";cc._RF.push(t,"45fa1wVs8pDJbn79DgLCoes","otherUIBase"),cc.Class({extends:cc.Component,properties:{opening:!0},onLoad:function(){},onEnable:function(){this.playOutAnim()},playOutAnim:function(){var e=this;this.node.getChildByName("content").scale=.54,this.node.getChildByName("content").opacity=100,cc.tween(this.node.getChildByName("content")).to(.75,{opacity:255,scale:1},{easing:"backInOut"}).call(function(){e.opening=!1}).start()},cancel:function(){this.node.active=!1},onDestroy:function(){config.UICtrl.removeUI(this.node.name)}}),cc._RF.pop()},{}],passInfoCtrl:[function(e,t){"use strict";var n;cc._RF.push(t,"e2709PI4LBGCZyniNcsI8b0","passInfoCtrl"),cc.Class(((n={extends:e("otherUIBase"),properties:{data:null},onLoad:function(){this.content=this.node.getChildByName("content"),this.passName=this.content.getChildByName("passName"),this.zombieName=this.content.getChildByName("zombieName"),this.element=this.content.getChildByName("element"),this.lifeNum=this.content.getChildByName("lifeNum"),this.ATKNum=this.content.getChildByName("ATKNum"),this.damageNum=this.content.getChildByName("damageNum"),this.leave=this.content.getChildByName("leave"),this.skillInto=this.content.getChildByName("skillIntro"),this.skillInfo1=this.skillInto.getChildByName("view").getChildByName("content").getChildByName("zombieSkillInfo1"),this.skillInfo2=this.skillInto.getChildByName("view").getChildByName("content").getChildByName("zombieSkillInfo2"),this.skillInfo3=this.skillInto.getChildByName("view").getChildByName("content").getChildByName("zombieSkillInfo3"),this.zombiePreview=this.content.getChildByName("zombiePreview"),config.tools.addCallBackToButton(this.node,"passInfoCtrl","back",null,this.leave)},refreshUI:function(){},init:function(e){this.data=e},onEnable:function(){this.playOutAnim(),this.refreshUI()}}).refreshUI=function(){var e=config.playerInfoManager.getEnemyData(this.data.enemyID);this.passName.getComponent(cc.Label).string=this.data.background+this.data.passName,this.zombiePreview.getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[e.pic],this.zombieName.getChildByName("label").getComponent(cc.Label).string=e.zombieName,this.element.getChildByName("label").getComponent(cc.Label).string=this.getElementString(e.element),this.lifeNum.getChildByName("label").getComponent(cc.Label).string="\u751f\u547d\u503c: "+this.data.life,this.ATKNum.getChildByName("label").getComponent(cc.Label).string="\u653b\u51fb\u529b: "+this.data.attack,this.damageNum.getChildByName("label").getComponent(cc.Label).string="\u72c2\u66b4: \u7b2c"+this.data.dangerCountdown+"\u56de\u5408",e.action1Disc?(this.skillInfo1.active=!0,this.skillInfo1.getChildByName("disc").getComponent(cc.Label).string=e.action1Disc):this.skillInfo1.active=!1,e.action2Disc?(this.skillInfo2.active=!0,this.skillInfo2.getChildByName("disc").getComponent(cc.Label).string=e.action2Disc):this.skillInfo2.active=!1,e.action3Disc?(this.skillInfo3.active=!0,this.skillInfo3.getChildByName("disc").getComponent(cc.Label).string=e.action3Disc):this.skillInfo3.active=!1},n.getElementString=function(e){switch(e){case 0:return"\u5c5e\u6027:  \u91d1";case 1:return"\u5c5e\u6027:  \u6728";case 2:return"\u5c5e\u6027:  \u6c34";case 3:return"\u5c5e\u6027:  \u706b";case 4:return"\u5c5e\u6027:  \u571f"}},n.back=function(){config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1),this.cancel()},n)),cc._RF.pop()},{otherUIBase:"otherUIBase"}],passSelectCtrl:[function(e,t){"use strict";cc._RF.push(t,"3e5765dpoJHorlwi2tEFqjt","passSelectCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=config.warehouse.json.passBaseData;this.total=e.length,this.refreshPassName(),config.tools.addCallBackToButton(this.node,"passSelectCtrl","nextPass",null,this.node.getChildByName("next")),config.tools.addCallBackToButton(this.node,"passSelectCtrl","lastPass",null,this.node.getChildByName("last")),config.tools.addCallBackToButton(this.node,"passSelectCtrl","showPassInfo",null,this.node.getChildByName("checkPassData"))},refreshPassName:function(){var e=config.warehouse.json.passBaseData,t=e[config.UIInfo.currentPass].passName,n=e[config.UIInfo.currentPass].background;this.node.getChildByName("passNum").getComponent(cc.Label).string=t,this.node.getChildByName("passName").getComponent(cc.Label).string=n,config.passInfo=e[config.UIInfo.currentPass]},nextPass:function(){config.UIInfo.currentPass<this.total-1&&(config.UIInfo.currentPass++,config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1)),this.refreshPassName()},lastPass:function(){config.UIInfo.currentPass>0&&(config.UIInfo.currentPass--,config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1)),this.refreshPassName()},showPassInfo:function(){var e=config.warehouse.json.passBaseData[config.UIInfo.currentPass];config.UICtrl.addUI("passInfo",config.UICtrl.findUI("other"),e),config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1)}}),cc._RF.pop()},{}],playerData:[function(e,t){"use strict";cc._RF.push(t,"5fca7N1eVpFEIgIKmdqqTHp","playerData"),cc.Class({extends:e("baseData"),properties:{energy:0,MaxEnergy:0,countATKFix:0,chess0energyFix:0,chess1energyFix:0,chess2energyFix:0,chess3energyFix:0,chess4energyFix:0,chess0shieldFix:0,chess1shieldFix:0,chess2shieldFix:0,chess3shieldFix:0,chess4shieldFix:0,chess0healFix:0,chess1healFix:0,chess2healFix:0,chess3healFix:0,chess4healFix:0,chess0ATKFix:0,chess1ATKFix:0,chess2ATKFix:0,chess3ATKFix:0,chess4ATKFix:0,CSFix:0,chess0CSFix:0,chess1CSFix:0,chess2CSFix:0,chess3CSFix:0,chess4CSFix:0,CSDFix:0,chess0CSDFix:0,chess1CSDFix:0,chess2CSDFix:0,chess3CSDFix:0,chess4CSDFix:0,metalATKFix:0,woodATKFix:0,waterATKFix:0,fireATKFix:0,soilATKFix:0},addBuff:function(e,t){for(var n=0;n<this.buffList.length;n++)if(this.buffList[n].component.id==e)return void this.buffList[n].component.countChange(t);var o=config.tools.getBuffDataByID(e),i=this.UI.addBuff(o.script);i.component.onInitData(e,t,o,this),this.buffList.push(i)},removeBuff:function(e){for(var t=0;t<this.buffList.length;t++)this.buffList[t].component.id==e&&(this.buffList[t].ui.destroy(),this.buffList.splice(t,1))},checkBuffList:function(e){switch(e){case"turnBegin":for(var t=0;t<this.buffList.length;t++)this.buffList[t].component.onRefresh(),this.buffList[t].component.onTurnBegin();break;case"turnEnd":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onTurnEnd(),this.buffList[t].component.nextStage();break;case"getATK":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onAttack();break;case"getAttack":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onGetHurt();break;case"remove":for(t=0;t<this.buffList.length;t++)this.buffList[t].component.onRemove()}},getMasterATK:function(){var e=this.getBaseATK(config.gameInfo.chessData[0]),t=this.getBaseATK(config.gameInfo.chessData[1]),n=this.getBaseATK(config.gameInfo.chessData[2]),o=this.getBaseATK(config.gameInfo.chessData[3]),i=this.getBaseATK(config.gameInfo.chessData[4]);return console.log(e,t,n,o,i),Math.floor((e+t+n+o+i)/5)},getATK:function(e){var t=e.base,n=e.set,o=this.getBaseATK(t)*((100+this.ATKFix+this.getATKFixBySet(n))/100);return 100*Math.random()<=this.CSFix+this.getCSFixBySet(n)&&(console.log("\u66b4\u51fb"),o*=(200+this.CSDFix+this.getCSDFixBySet(n))/100),this.checkBuffList("getATK"),o},getBaseATK:function(e){var t=this.getChessLevelById(e.id),n=e.attack;return n.basic+Math.pow(t,n.levelBasic)+t+this.additionalBaseATK},getChessLevelById:function(e){return config.playerInfoManager.getChessLevel(e)},getATKFixBySet:function(e){switch(e){case 0:return this.chess0ATKFix;case 1:return this.chess1ATKFix;case 2:return this.chess2ATKFix;case 3:return this.chess3ATKFix;case 4:return this.chess4ATKFix}},getCSFixBySet:function(e){switch(e){case 0:return this.chess0CSFix;case 1:return this.chess1CSFix;case 2:return this.chess2CSFix;case 3:return this.chess3CSFix;case 4:return this.chess4CSFix}},getCSDFixBySet:function(e){switch(e){case 0:return this.chess0CSDFix;case 1:return this.chess1CSDFix;case 2:return this.chess2CSDFix;case 3:return this.chess3CSDFix;case 4:return this.chess4CSDFix}},getDamageFix:function(e){switch(e){case 0:return this.damageFix+this.metalATKFix;case 1:return this.damageFix+this.woodATKFix;case 2:return this.damageFix+this.waterATKFix;case 3:return this.damageFix+this.fireATKFix;case 4:return this.damageFix+this.soilATKFix}},elementCounter:function(e){var t=this.enemyData.elementType;return 0==e&&1==t?1:1==e&&0==t?-1:1==e&&2==t?1:2==e&&1==t?-1:2==e&&3==t?1:3==e&&2==t?-1:3==e&&4==t?1:4==e&&3==t?-1:4==e&&0==t?1:0==e&&4==t?-1:0},getAttack:function(e){return e*=(100+this.hurtFix)/100,this.checkBuffList("getAttack"),this.shield>0&&(this.shield>e?(this.shield-=e,e=0):(e-=this.shield,this.shield=0)),this.UI.refreshShield(),this.currentHP-=Math.floor(e),this.currentHP<=0&&(config.UICtrl.getUIComponent("game").gameResult||(config.UICtrl.getUIComponent("game").gameResult="lose",console.log("\u6e38\u620f\u5931\u8d25"))),this.UI.refreshLife(),e},getHeal:function(e){this.currentHP+=e,this.currentHP>=this.MaxHP&&(this.currentHP=this.MaxHP),this.UI.refreshLife()},getShield:function(e){this.shield+=e,this.shield>=this.MaxHP&&(this.shield=this.MaxHP),this.UI.refreshShield()},changeEnergy:function(e){this.energy+=e,this.energy>this.MaxEnergy?this.energy=this.MaxEnergy:this.energy<0&&(this.energy=0),this.energy>=this.MaxEnergy?this.UI.remindSkill(!0):this.UI.remindSkill(!1),this.UI.refreshEnergy()},checkEnergy:function(e){return e<=this.energy},onLoad:function(){this.UI=this.node.getComponent("playerUICtrl"),this.enemyData=this.node.parent.getChildByName("enemy").getComponent("enemyData")}}),cc._RF.pop()},{baseData:"baseData"}],playerInfoCtrl:[function(e,t){"use strict";cc._RF.push(t,"01bc7WYMENHxYJjpuMMeJ8t","playerInfoCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.game.addPersistRootNode(this.node)}}),cc._RF.pop()},{}],playerInfoManager:[function(e,t){"use strict";cc._RF.push(t,"94557cBcylGGIGN/bhNvA1U","playerInfoManager"),t.exports={changeFragment:function(e,t){config.playerInfo.chessFragmentProgress[e]-=t,config.playerInfo.chessFragmentProgress[e]<0&&(config.playerInfo.chessFragmentProgress[e]=0)},getChessFragments:function(e){var t=config.playerInfo.chessFragmentProgress;return t[e]>=0?t[e]:null},getChessLevel:function(e){var t=config.playerInfo.chessLevel[e];t||(t=0);var n=this.getBaseChessDataByID(e);return n&&(0==n.rarity?t+=1:1==n.rarity?t+=3:3==n.rarity&&(t+=5)),t},getLevelUpRequire:function(e){if(!this.checkOwnedChess(e))return 3;var t=config.playerInfo.chessLevel[e];return t<1?5:t<2?10:t<3?15:t<4?20:20*(t-2)},checkOwnedChess:function(e){for(var t=config.playerInfo.ownedChess,n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},addFragment:function(e,t){config.playerInfo.chessFragmentProgress[e]?config.playerInfo.chessFragmentProgress[e]+=t:config.playerInfo.chessFragmentProgress[e]=t,config.playerInfo.chessLevel[e]||(config.playerInfo.chessLevel[e]=0)},getBaseChessDataByID:function(e){for(var t=config.warehouse.json.chessBaseData,n=0;n<t.length;n++)if(t[n].id==e)return t[n];return null},addOwnedChess:function(e){return!this.checkOwnedChess(e)&&(config.playerInfo.ownedChess.push(e),!0)},getBottomEffectData:function(e){for(var t=config.warehouse.json.bottomEffectData,n=0;n<t.length;n++)if(t[n].id==e)return t[n];return null},getChessEffectByLevel:function(e,t){if(e){var n,o=config.warehouse.json.chessEffectData;n=t<3?e["1levelDataID"]:t<5?e["3levelDataID"]:t<10?e["5levelDataID"]:t<15?e["10levelDataID"]:e["15levelDataID"];for(var i=0;i<o.length;i++)if(o[i].id==n)return o[i]}return null},getSpecialChessById:function(e){for(var t=config.warehouse.json.specialChessEffectData,n=0;n<t.length;n++)if(t[n].id==e)return t[n]},toCurrentPass:function(){config.eventDelegate.cleanAllEvent(),cc.director.loadScene("VSShow",function(){config.gameInfo.targetScene="game"})},toNextPass:function(){var e=config.warehouse.json.passBaseData,t=e.length;config.UIInfo.currentPass<t-1?(config.UIInfo.currentPass++,config.passInfo=e[config.UIInfo.currentPass],this.toCurrentPass()):this.toMain()},toMain:function(){config.eventDelegate.cleanAllEvent(),cc.director.loadScene("transition",function(){config.gameInfo.targetScene="main"})},elementCounter:function(e,t){return 0==e&&1==t?1.5:1==e&&0==t?.5:1==e&&2==t?1.5:2==e&&1==t?.5:2==e&&3==t?1.5:3==e&&2==t?.5:3==e&&4==t?1.5:4==e&&3==t?.5:4==e&&0==t?1.5:0==e&&4==t?.5:1},getEnemyData:function(e){for(var t=config.warehouse.json.enemyData,n=0;n<t.length;n++)if(t[n].id==e)return t[n];return null},checkLockedChess:function(e){for(var t=config.playerInfo.lockedChess,n=0;n<t[n];n++)if(t[n]==e)return!0;return!1},checkLockedMaster:function(e){for(var t=config.playerInfo.lockedMaster,n=0;n<t[n];n++)if(t[n]==e)return!0;return!1},getBaseATK:function(e){var t=this.getChessLevel(e.id),n=e.attack;return n.basic+Math.pow(t,n.levelBasic)+t},getMasterData:function(e){for(var t=config.warehouse.json.masterData,n=0;n<t.length;n++)if(t[n].id==e)return t[n];return null}},cc._RF.pop()},{}],playerUICtrl:[function(e,t){"use strict";cc._RF.push(t,"dfca7dWFBdF+7kcngSb+GBo","playerUICtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){config.UICtrl.UIList.playerUI=this.node,this.playerData=this.node.getComponent("playerData"),this.life=this.node.getChildByName("life"),this.lifeNum=this.life.getChildByName("num"),this.energy=this.node.getChildByName("energy"),this.energyNum=this.energy.getChildByName("num"),this.skillButton=this.node.getChildByName("skillButton"),this.buffList=this.node.getChildByName("buffList"),this.shield=this.life.getChildByName("shield"),this.shieldNum=this.shield.getChildByName("num"),this.avatar=this.skillButton.getChildByName("button").getChildByName("Background").getChildByName("avatar"),config.tools.addCallBackToButton(this.node,"playerUICtrl","useSkill",null,this.skillButton.getChildByName("button")),this.keepTween=cc.tween(this.skillButton).to(.6,{scale:1.25},{easing:"quadIn"}).to(.4,{scale:1}).union().repeatForever(),this.keeping=!1},remindSkill:function(){},initAvatar:function(){var e=config.gameInfo.masterData;this.avatar.addChild(cc.instantiate(config.warehouse.prefabList[e.name+"\u6218\u6597\u5934\u50cf"]))},keepAvatarMove:function(){this.keepTween.start(),this.keeping=!0},stopAvatarMove:function(){this.skillButton.scale=1,this.keepTween.stop(),this.keeping=!1},useSkill:function(){if(config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1),!config.UICtrl.getUIComponent("game").usingSkill&&!config.UICtrl.getUIComponent("boardLayer").checking){var e=config.gameInfo.masterData;this.playerData.checkEnergy(e.activeSkillEnergyCost)&&(config.UICtrl.getUIComponent("game").usingSkill=!0,this.playerData.changeEnergy(-1*e.activeSkillEnergyCost),config.eventDelegate.dispatchEvent("\u4f7f\u7528\u6280\u80fd"))}},refreshUI:function(){this.refreshLife(),this.refreshEnergy(),this.initAvatar()},refreshShield:function(){this.playerData.shield>0?this.shieldNum.getComponent(cc.Label).string="\u62a4\u76fe:"+this.playerData.shield:this.shieldNum.getComponent(cc.Label).string="",this.shield.getComponent(cc.ProgressBar).progress=this.playerData.shield/this.playerData.MaxHP},refreshLife:function(){this.life.getComponent(cc.ProgressBar).progress=this.playerData.currentHP/this.playerData.MaxHP,this.lifeNum.getComponent(cc.Label).string="\u751f\u547d\u503c:"+this.playerData.currentHP},refreshEnergy:function(){this.energy.getComponent(cc.ProgressBar).progress=this.playerData.energy/this.playerData.MaxEnergy,this.energyNum.getComponent(cc.Label).string="\u80fd\u91cf:"+this.playerData.energy;var e=config.gameInfo.masterData;this.playerData.checkEnergy(e.activeSkillEnergyCost)?this.keepAvatarMove():this.stopAvatarMove()},addBuff:function(e){var t=cc.instantiate(config.warehouse.prefabList.buff);return this.buffList.addChild(t),t.addComponent(e),{ui:t,component:t.getComponent(e)}}}),cc._RF.pop()},{}],protect:[function(e,t){"use strict";cc._RF.push(t,"97eb1bMp85PR7aSshSN8dOF","protect"),cc.Class({extends:e("./buffBase"),properties:{}}),cc._RF.pop()},{"./buffBase":"buffBase"}],randomResultCreator:[function(e,t){"use strict";cc._RF.push(t,"afe68hOqztHKLpHisuaGTw6","randomResultCreator"),t.exports={resultPool:{},creatPool:function(e){this.resultPool[e]?this.cleanPool(e):this.resultPool[e]={}},getNormalNum:function(e,t){return e+this.creatNormalNum()*t},getRandomNum:function(e,t){return e+Math.random()*(t-e)},creatNormalNum:function(){var e=0,t=0,n=0;do{n=(e=2*Math.random()-1)*e+(t=2*Math.random()-1)*t}while(0==n||n>=1);return e*Math.sqrt(-2*Math.log(n)/n)},addResult:function(e,t,n){this.resultPool[n]?this.resultPool[n][e]=t:(this.creatPool(n),this.resultPool[n][e]=t)},removeResult:function(){},cleanPool:function(e){this.resultPool[e]={}},cleanResultPool:function(){this.resultPool={}},getResult:function(e){var t=0;for(var n in this.resultPool[e])t+=this.resultPool[e][n];var o=Math.floor(Math.random()*(t+1));for(var i in t=0,this.resultPool[e])if(o<=(t+=this.resultPool[e][i]))return i}},cc._RF.pop()},{}],resInfoCtrl:[function(e,t){"use strict";cc._RF.push(t,"eac32Ng0ZNPI7WePhMyWuhj","resInfoCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.game.addPersistRootNode(this.node)}}),cc._RF.pop()},{}],rush:[function(e,t){"use strict";cc._RF.push(t,"3542bQjvF5A+6ghDleaWJRr","rush"),cc.Class({extends:e("./buffBase"),properties:{},start:function(){}}),cc._RF.pop()},{"./buffBase":"buffBase"}],saver:[function(e,t){"use strict";cc._RF.push(t,"b2ffbhpqARJToTeCxVK3VEF","saver"),t.exports={hasData:function(e){return"undefined"==typeof wx?!!cc.sys.localStorage.getItem(e):!!this.getData(e)},getData:function(e){if("undefined"==typeof wx)return JSON.parse(cc.sys.localStorage.getItem(e));var t=wx.getStorageSync(e);return t?JSON.parse(t):null},storageData:function(e,t){"undefined"==typeof wx?cc.sys.localStorage.setItem(e,JSON.stringify(t)):wx.setStorage({key:e,data:JSON.stringify(t),success:function(){}})},reviseData:function(e,t){config.playerInfo[e]=t,this.storageData("playerInfo",config.playerInfo)},deleteData:function(e){"undefined"==typeof wx?cc.sys.localStorage.removeItem(e):wx.removeStorage({key:e,success:function(){}})},initData:function(){this.storageData("playerInfo",config.playerInfo)},refreshHighestMoney:function(e){e>config.playerInfo.highestMoneyToday&&this.reviseData("highestMoneyToday",e)},refreshFastestStepToday:function(e){e>config.playerInfo.lowestStepToday&&this.reviseData("lowestStepToday",e)},refreshFastestTimeToday:function(e){e>config.playerInfo.fastestTimeToday&&this.reviseData("fastestTimeToday",e)},checkFirstLunchToday:function(){if(config.playerInfo.lastLunchDate){var e=config.tools.compareTime(config.playerInfo.lastLunchDate,config.tools.getGameTime());return!(!e||e.year&&e.month&&e.date)}return!0},noteLunchDate:function(){config.playerInfo.lastLunchDate=config.tools.getGameTime(),this.initData()},noteCreatAccountDate:function(){config.playerInfo.creatAccountDate=config.tools.getGameTime(),this.initData()},checkSaverVersion:function(e){return!!e.saverVersion&&e.saverVersion==config.playerInfo.saverVersion},transferSaver:function(e){for(var t in e)if(Object.hasOwnProperty.call(e,t)){var n=e[t];config.playerInfo[t]=n}}},cc._RF.pop()},{}],sceneMenuCtrl:[function(e,t){"use strict";cc._RF.push(t,"a221cAe73ROyITypCeP9SIl","sceneMenuCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.game.addPersistRootNode(this.node),this.bg=this.node.getChildByName("bg"),this.shop=this.node.getChildByName("shop"),this.home=this.node.getChildByName("home"),this.main=this.node.getChildByName("main"),this.weapon=this.node.getChildByName("weapon"),this.event=this.node.getChildByName("event"),this.adaptWidth(),config.tools.addCallBackToButton(this.node,"sceneMenuCtrl","chooseUI","main",this.main),config.tools.addCallBackToButton(this.node,"sceneMenuCtrl","chooseUI","shopLayer",this.shop),config.tools.addCallBackToButton(this.node,"sceneMenuCtrl","chooseUI","home",this.home),config.tools.addCallBackToButton(this.node,"sceneMenuCtrl","chooseUI","chessSelection",this.weapon),config.tools.addCallBackToButton(this.node,"sceneMenuCtrl","chooseUI","event",this.event)},adaptWidth:function(){var e=this.shop.x/this.bg.width,t=this.home.x/this.bg.width,n=this.weapon.x/this.bg.width,o=this.event.x/this.bg.width;this.bg.width=3.03*cc.winSize.width,this.shop.x=e*this.bg.width,this.home.x=t*this.bg.width,this.weapon.x=n*this.bg.width,this.event.x=o*this.bg.width,this.node.x=cc.winSize.width/2},chooseUI:function(e,t){config.UICtrl.getUIComponent("Canvas").selectUI(t),config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1)},show:function(e){this.node.active=e}}),cc._RF.pop()},{}],shopLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"5065aWttyZGKZC+GPEODna3","shopLayerCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.content=this.node.getChildByName("content")},onDestroy:function(){config.UICtrl.UIList[this.node.name]=null}}),cc._RF.pop()},{}],shuraPower:[function(e,t){"use strict";cc._RF.push(t,"5866efQ8aFIqagHWUP4WvOO","shuraPower"),cc.Class({extends:e("./buffBase"),properties:{}}),cc._RF.pop()},{"./buffBase":"buffBase"}],silence:[function(e,t){"use strict";cc._RF.push(t,"634beSB5zNDaZNRklc3eCxI","silence"),cc.Class({extends:e("buffBase"),properties:{},start:function(){}}),cc._RF.pop()},{buffBase:"buffBase"}],starPower:[function(e,t){"use strict";cc._RF.push(t,"ca4b6hq5+BGBqmAwJnnaeeS","starPower"),cc.Class({extends:e("buffBase"),properties:{},start:function(){}}),cc._RF.pop()},{buffBase:"buffBase"}],tools:[function(e,t){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}cc._RF.push(t,"8d3c4hM3utJF7+RduHh+EUr","tools"),t.exports={addCallBackToButton:function(e,t,n,o,i){var a=new cc.Component.EventHandler;a.target=e,a.component=t,a.handler=n,a.customEventData=o;var s=i.getComponent(cc.Button);s||(s=i.addComponent(cc.Button)),s.clickEvents.push(a)},cleanButtonCall:function(e){var t=e.getComponent(cc.Button);t&&(t.clickEvents=[])},addAnimationToNode:function(e,t,n,o,i){var a=e.getComponent(cc.Animation);a||(a=e.addComponent(cc.Animation));var s=cc.AnimationClip.createWithSpriteFrames(t,t.length);return console.log(s),s.name=n,s.wrapMode=o,s.speed=i,a.addClip(s),a},checkRectInScreen:function(e){var t=cc.rect(0,0,cc.winSize.width,cc.winSize.height),n=e.getBoundingBoxToWorld();return t.intersects(n)},vibrationEffect:function(){config.playerInfo.shake&&(cc.sys.os===cc.sys.OS_IOS||(cc.sys.os,cc.sys.OS_ANDROID),"undefined"!=typeof wx&&wx.vibrateShort({type:"medium"}))},getDistance:function(e,t){var n=cc.v2(e.x-t.x,e.y-t.y);return Math.sqrt(n.x*n.x+n.y*n.y)},getAngle:function(e,t){var n=t.x-e.x,o=t.y-e.y;return-cc.v2(n,o).signAngle(cc.v2(1,0))/Math.PI*180},shrinkNum:function(e){return e>=999999?(e/1e6).toString().slice(0,4)+"M":e>=9999?(e/1e3).toString().slice(0,4)+"K":e},nodeShake:function(e,t){var n=this;if(this.shakingNode||(this.shakingNode=[]),!this.checkShaking(e)){this.shakingNode.push(e);var o=e.x,i=e.y,a=t;cc.tween(e).to(.05,{position:cc.v2(o+a,i+a)}).to(.05,{position:cc.v2(o+a,i-a)}).to(.05,{position:cc.v2(o-a,i+a)}).to(.05,{position:cc.v2(o-a,i-a)}).to(.05,{position:cc.v2(o,i)}).call(function(){n.removeShaking(e)}).start()}},checkShaking:function(e){for(var t=0;t<this.shakingNode.length;t++)if(this.shakingNode[t]==e)return!0},removeShaking:function(e){for(var t=0;t<this.shakingNode.length;t++)this.shakingNode[t]==e&&this.shakingNode.splice(t,1)},loadAtlas:function(e){cc.assetManager.loadBundle("atlas",function(t,n){if(t);else for(var o=0;o<e.length;o++)n.loadDir(e[o],cc.SpriteAtlas,function(e,t){if(e);else for(var n=0;n<t.length;n++){var o=t[n]instanceof cc.SpriteAtlas?t[n].name.slice(0,-6):t[n].name;t[n]instanceof cc.JsonAsset?config.warehouse.atlas[o]=t[n].json:config.warehouse.atlas[o]=t[n]}})})},transfromPositionOnWorld:function(e){return e.convertToWorldSpaceAR(cc.v2(0,0))},transformPositionOnNode:function(e,t){var n=t.convertToWorldSpaceAR(cc.v2(0,0));return e.convertToNodeSpaceAR(n)},checkMidnight:function(){config.lastClickPoint?(config.thisClickPoint=config.tools.getGameTime(),23==config.thisClickPoint.hour&&(config.thisClickPoint.minute>=58?config.UICtrl.findUI("transformLaterRemind")||config.UICtrl.addUI("transformLaterRemind",config.UICtrl.findUI("other")):config.thisClickPoint.minute>=55&&(config.UICtrl.findUI("transformRemind")||config.UICtrl.addUI("transformRemind",config.UICtrl.findUI("other")))),23==config.lastClickPoint.hour&&config.lastClickPoint.minute<=59&&config.lastClickPoint.second<=59&&config.thisClickPoint.hour<=1&&(config.UICtrl.findUI("timeRemind")||config.UICtrl.addUI("timeRemind",config.UICtrl.findUI("other"))),config.thisClickPoint&&(config.lastClickPoint=config.thisClickPoint)):(config.lastClickPoint=config.tools.getGameTime(),23==config.lastClickPoint.hour&&config.lastClickPoint.minute>=55&&(config.UICtrl.findUI("transformRemind")||config.UICtrl.addUI("transformRemind",config.UICtrl.findUI("other"))))},getGameTime:function(){var e=new Date;return{year:e.getFullYear().toString(),month:e.getMonth().toString(),date:e.getDate().toString(),second:e.getSeconds().toString(),minute:e.getMinutes().toString(),hour:e.getHours().toString()}},getChessPic:function(e){"blue"==e&&(e="orange");var t=e+""+config.currentDate;return config.warehouse.spriteFrame[t]},checkDate:function(){var e=(new Date).getDay();config.currentDate=e},compareTime:function(e,t){var n={year:!1,month:!1,date:!1,hour:!1,minute:!1,second:!1};return e.year==t.year&&(n.year=!0),e.month==t.month&&(n.month=!0),e.date==t.date&&(n.date=!0),e.hour==t.hour&&(n.hour=!0),e.minute==t.minute&&(n.minute=!0),e.second==t.second&&(n.second=!0),n},loadAvatarPicOnKs:function(e){cc.loader.load({url:e,type:"png"},function(e,t){e&&console.error(e),config.avatarPic=t})},loadAvatarPic:function(e){cc.loader.load({url:e+"?aaa=aa.jpg ",type:"jpg"},function(e,t){e&&console.error(e),config.avatarPic=t})},addAvatar:function(e){e.getChildByName("mask").getChildByName("pic").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(config.avatarPic)},downloadAvatar:function(e,t){cc.loader.load({url:t+"?aaa=aa.jpg ",type:"jpg"},function(t,n){t&&console.error(t),e.getChildByName("mask").getChildByName("pic").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n)})},downloadAvatarOnKS:function(e,t){cc.loader.load({url:t,type:"png"},function(t,n){t&&console.error(t),e.getChildByName("mask").getChildByName("pic").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n)})},findBestPlayer:function(){if(config.dailyRank){var e=null;"undefined"==typeof wx||(e="undefined"==typeof KSGameGlobal?config.dailyRank.result.list.data:config.dailyRank);for(var t=e[0],n=0;n<e.length;n++)e[n].score>t.score&&(t=e[n]);return t}return null},findFastestPlayer:function(){if(config.dailyRank){var e=null;"undefined"==typeof wx||(e="undefined"==typeof KSGameGlobal?config.dailyRank.result.list.data:config.dailyRank);for(var t=null,n=0;n<e.length;n++)e[n].score>=1e4&&(t?parseInt(e[n].userinfo.loweststeptoday)<parseInt(t.userinfo.loweststeptoday)&&(t=e[n]):t=e[n]);return t}return null},findEarliestPlayer:function(){if(config.dailyRank){var e=null;if("undefined"==typeof wx||(e="undefined"==typeof KSGameGlobal?config.dailyRank.result.list.data:config.dailyRank),e.length<=0)return null;var t=e[0];if(t)for(var n=0;n<e.length;n++)e[n].userinfo.firstpasstoday&&(parseInt(t.userinfo.firstpasstoday.hour)>parseInt(e[n].userinfo.firstpasstoday.hour)?t=e[n]:parseInt(t.userinfo.firstpasstoday.hour)==parseInt(e[n].userinfo.firstpasstoday.hour)&&(parseInt(t.userinfo.firstpasstoday.minute)>parseInt(e[n].userinfo.firstpasstoday.minute)?t=e[n]:parseInt(t.userinfo.firstpasstoday.minute)==parseInt(e[n].userinfo.firstpasstoday.minute)&&parseInt(t.userinfo.firstpasstoday.second)>parseInt(e[n].userinfo.firstpasstoday.second)&&(t=e[n])));return t.userinfo.firstpasstoday?t:null}return null},getSomePlayers:function(e,t){var n=[];function o(e){for(var t=0;t<n.length;t++)if(n[t]==e)return!0;return!1}if(t.length>e)for(;n.length<e;){var i=Math.floor(Math.random()*t.length);t[i].openid!=config.accountInfo.openID&&(o(t[i].openid)||n.push(t[i].userinfo.openid))}else for(var a=0;a<t.length;a++)t[a].userinfo.openid!=config.accountInfo.openID&&n.push(t[a].userinfo.openid);return n},totalCollected:function(){for(var e=0,t=config.playerInfo.unlockedSkin,n=0;n<=config.totalSkin;n++)for(var o=0;o<t.length;o++)if(t[o]=="s"+n){e++;break}return e==config.totalSkin+1},checkSkinChipCollection:function(){function e(e){for(var t=0;t<config.playerInfo.unlockedSkin.length;t++)if(e==config.playerInfo.unlockedSkin[t])return!0;return!1}for(var t in config.playerInfo.skinFragmentProgress)config.playerInfo.skinFragmentProgress[t]>=10&&(e(t)?(config.playerInfo.starNum+=5,config.UICtrl.getUIComponent("starNum").refreshNum()):config.playerInfo.unlockedSkin.push(t))},getBaseChessDataByID:function(e){for(var t=config.warehouse.json.chessBaseData,o=0;o<t.length;o++)if(t[o].id==e)return n({},t[o]);return null},getBuffDataByID:function(e){for(var t=config.warehouse.json.buffData,n=0;n<t.length;n++)if(t[n].id==e)return t[n]},getChessEffectByLevel:function(e,t){if(e){var n,o=config.warehouse.json.chessEffectData;n=t<3?e["1levelDataID"]:t<5?e["3levelDataID"]:t<10?e["5levelDataID"]:t<15?e["10levelDataID"]:e["15levelDataID"];for(var i=0;i<o.length;i++)if(o[i].id==n)return o[i]}return null},getChessIndex:function(e,t){for(var n=0;n<t.length;n++)for(var o=0;o<t[0].length;o++)if(t[n][o].bottom==e||t[n][o].middle==e)return t[n][o].index},ownMaster:function(e){for(var t=config.playerInfo.ownedMaster,n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}},cc._RF.pop()},{}],trackingFlyingSword:[function(e,t){"use strict";cc._RF.push(t,"ad4de1vWKZBF743UBs4gPzv","trackingFlyingSword"),cc.Class({extends:e("./buffBase"),properties:{}}),cc._RF.pop()},{"./buffBase":"buffBase"}],transitionCtrl:[function(e,t){"use strict";cc._RF.push(t,"c4cccLp0TtPCp9OuRw7Y5Iq","transitionCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.sprite=this.node.getChildByName("sprite"),config.tools.addAnimationToNode(this.sprite,config.warehouse.atlas["\u8f6c\u573a"].getSpriteFrames(),"\u8f6c\u573a",cc.WrapMode.Default,1),this.sprite.getComponent(cc.Animation).on("stop",function(){e.toTargetScene()},this),this.sprite.getComponent(cc.Animation).play("\u8f6c\u573a")},toTargetScene:function(){cc.director.loadScene("main")}}),cc._RF.pop()},{}],warehouse:[function(e,t){"use strict";cc._RF.push(t,"99bd8oW6gFN2aCxT2y7LAns","warehouse"),t.exports={sound:{},json:{},prefabList:{},atlas:{},spriteFrame:{},SkeletonData:{}},cc._RF.pop()},{}],winLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"01353vgXG5NLKzdWU8V93Et","winLayerCtrl"),cc.Class({extends:e("otherUIBase"),properties:{},onLoad:function(){this.mask=this.node.getChildByName("mask"),this.content=this.node.getChildByName("content"),this.scroll=this.content.getChildByName("scroll"),this.scrollContent=this.scroll.getChildByName("view").getChildByName("content"),this.next=this.content.getChildByName("next"),this.bonus=this.content.getChildByName("bonus"),this.leave=this.content.getChildByName("leave"),config.tools.addCallBackToButton(this.node,"winLayerCtrl","getReword",null,this.bonus),config.tools.addCallBackToButton(this.node,"winLayerCtrl","nextPass",null,this.next),config.tools.addCallBackToButton(this.node,"winLayerCtrl","back",null,this.leave),config.dj.playEffect(config.warehouse.sound["\u901a\u5173\u6210\u529f-\u6e38\u620f\u7ed3\u675f"],1)},getReword:function(){console.log("\u770b\u5e7f\u544a\u83b7\u5f97\u5956\u52b1")},nextPass:function(){config.playerInfoManager.toNextPass(),config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1)},back:function(){config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1),config.playerInfoManager.toMain()}}),cc._RF.pop()},{otherUIBase:"otherUIBase"}],wxtools:[function(e,t){"use strict";cc._RF.push(t,"f3111CzMfNMkbYdgFzlDTzw","wxtools"),t.exports={initUserInfoButton:function(){var e=this;if("undefined"!=typeof wx){var t=wx.getSystemInfoSync(),n=t.windowWidth,o=t.windowHeight,i=wx.createImage();i.src="wxLocal/login_button.png";var a=wx.createUserInfoButton({type:"image",image:i.src,style:{left:n/2-86.67,top:.74*o,width:173.34,height:68.04}});a.onTap(function(){config.UICtrl.getUIComponent("loading").pushed||wx.requirePrivacyAuthorize({success:function(){e.info(),a.hide(),a.destroy(),config.UICtrl.getUIComponent("loading").pushed=!0,config.tools.vibrationEffect(),config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1),config.wxTools.gameBeginInLoading()},fail:function(){wx.exitMiniProgram({success:function(){console.log("\u79bb\u5f00\u6e38\u620f")},fail:function(){console.log("\u79bb\u5f00\u6e38\u620f\u5931\u8d25")},complete:function(){console.log("\u8c03\u7528\u79bb\u5f00\u5b8c\u6210")}})}})})}},info:function(){wx.getUserInfo({success:function(e){var t=e.userInfo;config.tools.loadAvatarPic(t.avatarUrl),config.accountInfo.nickName=t.nickName,config.accountInfo.avatarlUrl=t.avatarUrl,wx.login({success:function(e){var t=e.code;wx.cloud.init({env:"cloud1-8gsd9cxlbfb94be6"}),wx.cloud.callFunction({name:"helloCloud",data:{message:t}}).then(function(e){config.accountInfo.openID=e.result.openid,config.UICtrl.getUIComponent("loading").lunched=!0,config.wxTools.checkCloudSaver()})}})}})},checkCloudSaver:function(){wx.cloud.callFunction({name:"checkCloud"}).then(function(e){e.result.res&&e.result.res.userinfo?(config.wxTools.downloadCloudSaver(e.result.res.userinfo),config.wxTools.checkCloudFirstEnter(),config.UICtrl.getUIComponent("cutting").cutToScene("game")):config.wxTools.creatSaver()},function(){config.wxTools.creatSaver()})},creatSaver:function(){config.saver.noteCreatAccountDate(),config.wxTools.translatePlayerInfo(),config.wxTools.updateCloudSaver(),config.UICtrl.getUIComponent("cutting").cutToScene("game")},translatePlayerInfo:function(){config.cloudPlayerSaver.avatarlUrl=config.accountInfo.avatarlUrl,config.cloudPlayerSaver.usingSkin=config.playerInfo.usingSkin,config.cloudPlayerSaver.unlockedSkin=config.playerInfo.unlockedSkin,config.cloudPlayerSaver.firstLunchToday=config.playerInfo.lastLunchDate,config.cloudPlayerSaver.UID=config.accountInfo.openID,config.cloudPlayerSaver.nickName=config.accountInfo.nickName,config.cloudPlayerSaver.province=config.playerInfo.province,config.cloudPlayerSaver.cowNum=config.playerInfo.passedTime,config.cloudPlayerSaver.starNum=config.playerInfo.starNum,config.cloudPlayerSaver.passNumToday=config.playerInfo.data4,config.cloudPlayerSaver.highestMoneyToday=config.playerInfo.highestMoneyToday,config.cloudPlayerSaver.lowestStepToday=config.playerInfo.lowestStepToday,config.cloudPlayerSaver.firstPassTimeToday=config.playerInfo.firstPassToday,config.cloudPlayerSaver.creatAccountDate=config.playerInfo.creatAccountDate,config.cloudPlayerSaver.firstGame=config.playerInfo.firstGame,config.cloudPlayerSaver.historyHighestMoney=config.playerInfo.data3},creatCloudSaver:function(){config.cloudPlayerSaver.avatarUrl=config.accountInfo.avatarlUrl,config.cloudPlayerSaver.UID=config.accountInfo.openID,config.cloudPlayerSaver.nickName=config.accountInfo.nickName,config.cloudPlayerSaver.creatAccountDate=config.tools.getGameTime(),console.log(config.cloudPlayerSaver.creatAccountDate)},updateCloudSaver:function(){"undefined"!=typeof wx&&wx.cloud.callFunction({name:"updateCloud",data:{userinfo:config.cloudPlayerSaver}}).then(function(e){console.log(e)},function(){console.log("\u5931\u8d25")})},refreshCloudSaver:function(){config.wxTools.translatePlayerInfo(),config.wxTools.updateCloudSaver()},checkCloudFirstEnter:function(){config.saver.checkFirstLunchToday()?(console.log("\u662f\u4eca\u5929\u7b2c\u4e00\u6b21\u767b\u5f55"),config.playerInfo.highestMoneyToday=0,config.playerInfo.lowestStepToday=0,config.playerInfo.firstPassToday=null,config.playerInfo.currentPlayer=0,config.playerInfo.playTimesToday=0,config.playerInfo.data5=2,config.playerInfo.data4=0,console.log("\u5237\u65b0\u6bcf\u65e5\u6570\u636e")):console.log("\u4e0d\u662f\u4eca\u5929\u7b2c\u4e00\u6b21\u767b\u5f55"),config.saver.noteLunchDate(),config.wxTools.refreshCloudSaver()},downloadCloudSaver:function(e){config.accountInfo.UID=e.UID,config.accountInfo.avatarlUrl=e.avatarlUrl,config.accountInfo.nickName=e.nickName,config.playerInfo.creatAccountDate=e.creatAccountDate,config.playerInfo.firstGame=e.firstGame,config.playerInfo.lastLunchDate=e.firstLunchToday,config.playerInfo.highestMoneyToday=e.highestMoneyToday,config.playerInfo.lowestStepToday=e.lowestStepToday,config.playerInfo.data4=e.passNumToday,config.playerInfo.province=e.province,config.playerInfo.starNum=e.starNum,config.playerInfo.unlockedSkin=e.unlockedSkin,config.playerInfo.usingSkin=e.usingSkin,config.playerInfo.passedTime=e.cowNum,config.playerInfo.firstPassToday=e.firstPassTimeToday,config.playerInfo.data3=e.historyHighestMoney},updatePlayerInfo:function(e,t){wx.cloud.callFunction({name:"rank",data:{userinfo:t}}).then(function(){},function(){console.log("\u5931\u8d25")})},downloadRankInfo:function(){wx.cloud.callFunction({name:"getRank"}).then(function(){},function(){console.log("\u5931\u8d25")})},downloadDailyRankInfo:function(){wx.cloud.callFunction({name:"getDailyRank"}).then(function(e){config.dailyRank=e,config.dailyDone=!0},function(){console.log("\u4e0b\u8f7d\u6bcf\u65e5\u6392\u884c\u699c\u5931\u8d25"),config.dailyDone=!0})},downloadHistoryRankInfo:function(){wx.cloud.callFunction({name:"getHistoryRank"}).then(function(e){config.historyRank=e,config.historyDone=!0},function(){console.log("\u4e0b\u8f7d\u5386\u53f2\u6392\u884c\u699c\u5931\u8d25"),config.historyDone=!0})},downloadYesterdayRankInfo:function(){wx.cloud.callFunction({name:"getYesterdayRank"}).then(function(e){config.yesterdayRank=e,config.yesterdayDone=!0},function(){console.log("\u4e0b\u8f7d\u6628\u65e5\u6392\u884c\u699c\u5931\u8d25"),config.yesterdayDone=!0})},updateDailyRankInfo:function(e,t,n,o){"undefined"!=typeof wx&&wx.cloud.callFunction({name:"sendDailyRank",data:{scorenum:e,cownum:t,stepnum:n,userinfo:o}}).then(function(){},function(){console.log("\u4e0a\u4f20\u73a9\u5bb6\u6210\u7ee9\u5230\u6bcf\u65e5\u6392\u884c\u699c\u5931\u8d25")})},updateHistoryRankInfo:function(e,t,n,o){"undefined"!=typeof wx&&wx.cloud.callFunction({name:"sendHistoryRank",data:{scorenum:e,cownum:t,stepnum:n,userinfo:o}}).then(function(){},function(){console.log("\u4e0a\u4f20\u73a9\u5bb6\u6210\u7ee9\u5230\u5386\u53f2\u6392\u884c\u699c\u5931\u8d25")})},activeShare:function(){if("undefined"!=typeof wx){var e=Math.floor(4*Math.random()),t="",n="";0==e?(t="\u5b9a\u4e2a\u5c0f\u76ee\u6807\uff0c\u6323\u5b83\u4e00\u4e2a\u4ebf",n="wxLocal/0.png"):1==e?(t="\u4eca\u5929\u4f60\u6323\u5230\u4e00\u4e2a\u4ebf\u4e86\u5417",n="wxLocal/1.png"):2==e?(t="\u4eca\u5929\u662f\u725b\u5e02\uff0c\u8d76\u7d27\u6765\u51fa\u4ed3",n="wxLocal/2.png"):(t="\u8eba\u51fa\u4e00\u4e2a\u4ebf\uff0c\u4f60\u53ef\u4ee5",n="wxLocal/3.png"),wx.shareAppMessage({title:t,imageUrl:n})}},passiveShare:function(){wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]});var e=Math.floor(4*Math.random()),t="",n="";0==e?(t="\u5b9a\u4e2a\u5c0f\u76ee\u6807\uff0c\u6323\u5b83\u4e00\u4e2a\u4ebf",n="wxLocal/0.png"):1==e?(t="\u4eca\u5929\u4f60\u6323\u5230\u4e00\u4e2a\u4ebf\u4e86\u5417",n="wxLocal/1.png"):2==e?(t="\u4eca\u5929\u662f\u725b\u5e02\uff0c\u8d76\u7d27\u6765\u51fa\u4ed3",n="wxLocal/2.png"):(t="\u8eba\u51fa\u4e00\u4e2a\u4ebf\uff0c\u4f60\u53ef\u4ee5",n="wxLocal/3.png"),wx.onShareAppMessage(function(){return{title:t,imageUrl:n}})},creatGameClub:function(){if("undefined"!=typeof wx){var e=wx.getSystemInfoSync(),t=e.windowWidth,n=e.windowHeight,o=wx.createGameClubButton({type:"image",image:"wxLocal/\u6e38\u620f\u5708.png",icon:"green",style:{left:.815*t,top:.38*n,width:50.76,height:58.86}});config.UICtrl.UIList.GameClubButton=o}},showGameClub:function(){"undefined"!=typeof wx&&config.UICtrl.findUI("GameClubButton")&&config.UICtrl.UIList.GameClubButton.show()},hideGameClub:function(){"undefined"!=typeof wx&&config.UICtrl.findUI("GameClubButton")&&config.UICtrl.UIList.GameClubButton.hide()},cancelGameClub:function(){"undefined"!=typeof wx&&config.UICtrl.findUI("GameClubButton")&&(config.UICtrl.UIList.GameClubButton.destroy(),config.UICtrl.UIList.GameClubButton=null)},shareCanvas:function(){var e=this;if("undefined"!=typeof wx&&!this.clicked){this.clicked=!0;var t=canvas.toTempFilePathSync({x:0,y:canvas.height/5,fileType:"jpg",quality:"1"}),n=setInterval(function(){clearInterval(n),e.sharePic(t),e.clicked=!1},1e3)}},sharePic:function(e){clearInterval(this.sharePic),wx.shareAppMessage({imageUrl:e})},initAdv:function(){},showAdv:function(){},getPlayerNum:function(){},ADScene:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHs",branchDim:"",eventType:1})},ADSceneClick:function(){if("undefined"!=typeof wx){var e=cc.find("Canvas").getComponent("gameCtrl").stepCount;wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHs",branchDim:""+e,eventType:2})}},ADShow:function(){if("undefined"!=typeof wx){var e=cc.find("Canvas").getComponent("gameCtrl").stepCount;wx.createRewardedVideoAd().show({branchId:"BCBgAAoXHx5d0rCbeq-tHs",branchDim:""+e})}},leaveClickInTeach:function(){if("undefined"!=typeof wx&&config.playerInfo.firstGame){var e=cc.find("Canvas").getComponent("gameCtrl").stepCount;wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHq",branchDim:""+e,eventType:2})}},passSceneInTeach:function(){if("undefined"!=typeof wx&&config.playerInfo.firstGame){var e=cc.find("Canvas").getComponent("gameCtrl").stepCount;wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHr",branchDim:""+e,eventType:1})}},passClickInTeach:function(){if("undefined"!=typeof wx&&config.playerInfo.firstGame){var e=cc.find("Canvas").getComponent("gameCtrl").stepCount;wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHr",branchDim:""+e,eventType:2})}},assetsTeach:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH7",branchDim:"",eventType:1})},assetsTeachPoint:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH7",branchDim:"",eventType:2})},stepTeach:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH8",branchDim:"",eventType:1})},stepTeachPoint:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH8",branchDim:"",eventType:2})},sellTeach:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH9",branchDim:"",eventType:1})},sellTeachPoint:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH9",branchDim:"",eventType:2})},boardTeach:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH-",branchDim:"",eventType:1})},boardTeachPoint:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH-",branchDim:"",eventType:2})},priceBoard:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH_",branchDim:"",eventType:1})},priceBoardPoint:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH_",branchDim:"",eventType:2})},sceneBeforeGameBegin:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHt",branchDim:"",eventType:1})},gameBeginInRank:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHt",branchDim:""+config.playerInfo.playTimesToday,eventType:2})},leaveInRank:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH6",branchDim:"",eventType:2})},passStage1:function(){if("undefined"!=typeof wx){var e=config.UICtrl.getUIComponent("priceBoard").getAveragePrice();wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHu",branchDim:""+e,eventType:1})}},giveupStage1:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHj",branchDim:""+config.usedAD,eventType:2})},passStage2:function(){if("undefined"!=typeof wx){var e=config.UICtrl.getUIComponent("priceBoard").getAveragePrice();wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHv",branchDim:""+e,eventType:1})}},giveupStage2:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHk",branchDim:""+config.usedAD,eventType:2})},passStage3:function(){if("undefined"!=typeof wx){var e=config.UICtrl.getUIComponent("priceBoard").getAveragePrice();wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHg",branchDim:""+e,eventType:1})}},giveupStage3:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHi",branchDim:""+config.usedAD,eventType:2})},leaveInGame:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH5",branchDim:"",eventType:2})},backToRankInSettle:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHl",branchDim:""+config.playerInfo.playTimesToday,eventType:2})},replayInSettle:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHm",branchDim:""+config.playerInfo.playTimesToday,eventType:2})},gameBeginInLoading:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHn",branchDim:"",eventType:2})},leaveInLoading:function(){if("undefined"!=typeof wx){var e=Math.floor(cc.find("Canvas/New ProgressBar").getComponent(cc.ProgressBar).progress);wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH4",branchDim:""+e,eventType:2})}}},cc._RF.pop()},{}]},{},["ActionShadow","Game","Helloworld","Player","VSShowCtrl","baseBottomEffect","bottomWarning","coverSpine","ATKDecline","CSUp","buffBase","buffUICtrl","burn","damageDerate","fear","fireDamageUp","frighten","heal","ironBody","protect","rush","shuraPower","silence","starPower","trackingFlyingSword","chooseChessCtrl","effectBaseNodeCtrl","enemyUICtrl","leaveCtrl","playerUICtrl","baseData","baseEffectDealer","boardLayerCtrl","cellBase","buffDealer","chessDealer","enemyData","enemyDealer","gameCtrl","masterDealer","loseLayerCtrl","winLayerCtrl","playerData","loadingCtrl","CanvasCtrl","chessSelectionCtrl","eventCtrl","gameBeginCtrl","homeCtrl","listButtonCtrl","mainCtrl","masterSelectionCtrl","otherCtrl","passSelectCtrl","playerInfoCtrl","resInfoCtrl","sceneMenuCtrl","chessInfoCtrl","gameStatementCtrl","otherUIBase","passInfoCtrl","boxLayerCtrl","boxOpenLayerCtrl","shopLayerCtrl","UICtrl","animCtrl","config","dj","effectCtrl","eventDelegate","kstools","notificationCenter","objectPool","playerInfoManager","randomResultCreator","saver","tools","warehouse","wxtools","chessItemCtrl","masterItemCtrl","transitionCtrl"]);