window.__require=function e(t,n,o){function i(c,s){if(!n[c]){if(!t[c]){var r=c.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+c+"'")}c=r}var f=n[c]={exports:{}};t[c][0].call(f.exports,function(e){return i(t[c][1][e]||e)},f,f.exports,e,t,n,o)}return n[c].exports}for(var a="function"==typeof __require&&__require,c=0;c<o.length;c++)i(o[c]);return i}({Game:[function(e,t,n){"use strict";cc._RF.push(t,"95be0R3ixxH1YBp9RKrtl4i","Game");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,c=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(c=(a<3?i(c):a>3?i(t,n,c):i(t,n))||c);return a>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.Game=void 0;var c=cc._decorator,s=c.ccclass,r=c.property,l=(cc.Enum({EASY:1,HARD:2}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starPrefab=null,t.maxStarDuration=0,t.minStarDuration=0,t.groundNode=null,t.playerNode=null,t.scoreLabel=null,t.scoreAudio=null,t}return i(t,e),t.prototype.onLoad=function(){this.groundY=this.groundNode.y+this.groundNode.height/2,this.timer=0,this.starDuration=0,this.spawnNewStar(),this.score=0},t.prototype.spawnNewStar=function(){var e=cc.instantiate(this.starPrefab);this.node.addChild(e),e.setPosition(this.getNewStarPosition()),e.getComponent("Star").init(this),this.starDuration=this.minStarDuration+cc.randomRange(0,1)*(this.maxStarDuration-this.minStarDuration),this.timer=0},t.prototype.getNewStarPosition=function(){var e,t=this.groundY+cc.randomRange(0,1)*this.playerNode.getComponent("Player").jumpHeight+50,n=this.node.width/2;return e=cc.randomRange(0,1)*n,cc.v2(e,t)},t.prototype.update=function(e){this.timer>this.starDuration?this.gameOver():this.timer+=e},t.prototype.gainScore=function(){this.score+=1,this.scoreLabel.string="Score: "+this.score.toString(),cc.audioEngine.play(this.scoreAudio,!1,1)},t.prototype.gameOver=function(){this.playerNode.stopAllActions(),cc.director.loadScene("game")},a([r(cc.Prefab)],t.prototype,"starPrefab",void 0),a([r(cc.Integer)],t.prototype,"maxStarDuration",void 0),a([r(cc.Integer)],t.prototype,"minStarDuration",void 0),a([r(cc.Node)],t.prototype,"groundNode",void 0),a([r(cc.Node)],t.prototype,"playerNode",void 0),a([r(cc.Label)],t.prototype,"scoreLabel",void 0),a([r(cc.AudioClip)],t.prototype,"scoreAudio",void 0),a([s],t)}(cc.Component));n.Game=l,cc._RF.pop()},{}],Helloworld:[function(e,t,n){"use strict";cc._RF.push(t,"e1b90/rohdEk4SdmmEZANaD","Helloworld");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,c=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(c=(a<3?i(c):a>3?i(t,n,c):i(t,n))||c);return a>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,r=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return i(t,e),t.prototype.start=function(){this.label.string=this.text},a([r(cc.Label)],t.prototype,"label",void 0),a([r],t.prototype,"text",void 0),a([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],Player:[function(e,t,n){"use strict";cc._RF.push(t,"6903ajMiC5Brr2g3ohA0fj/","Player");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,c=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(c=(a<3?i(c):a>3?i(t,n,c):i(t,n))||c);return a>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,r=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return i(t,e),t.prototype.start=function(){},a([r(cc.Label)],t.prototype,"label",void 0),a([r],t.prototype,"text",void 0),a([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],UICtrl:[function(e,t){"use strict";cc._RF.push(t,"58f18GHVoNLz6o72a0Rxn5Q","UICtrl"),t.exports={UIList:{},BLACK:null,outUI:null,zIndex:0,addUI:function(e,t,n){var o=cc.instantiate(config.warehouse.prefabList[e]);return n?o.addComponent(e+"Ctrl").init(n):o.addComponent(e+"Ctrl"),t.addChild(o),this.UIList[e]=o,o},checkUIKey:function(e){for(var t in this.UIList)if(t===e)return!0;return!1},findUI:function(e){return!!this.UIList[e]&&this.UIList[e]},getUIComponent:function(e){if(this.UIList[e].getComponent(e+"Ctrl"))return this.UIList[e].getComponent(e+"Ctrl");this.UIList[e].addComponent(e+"Ctrl")},removeUI:function(e){this.UIList[e]?(this.UIList[e].destory(),delete this.UIList[e]):console.log(e+"\u4e0d\u5b58\u5728")},showUI:function(e,t){this.UIList[e]?this.UIList[e].active=t:console.log(e+"\u4e0d\u5b58\u5728")},setUIParent:function(e,t){this.UIList[e]?this.UIList[e].parent=t:console.log(e+"\u4e0d\u5b58\u5728")},stickOutUI:function(e){if(this.outUI=e,this.zIndex=e.getSiblingIndex(),e){if(this.BLACK){this.BLACK.parent=e.parent;var t=e.parent.children.length-1;e.setSiblingIndex(t)}else this.BLACK=cc.instantiate(config.warehouse.prefabList.black),e.parent.addChild(this.BLACK),t=e.parent.children.length-1,e.setSiblingIndex(t);this.BLACK.active=!0}},setBlack:function(e){this.BLACK.active=!0,this.BLACK.parent=e.parent;var t=e.getSiblingIndex();this.BLACK.setSiblingIndex(t-1)},cancelStickOut:function(){this.BLACK&&(this.BLACK.active&&(this.BLACK.active=!1),this.BLACK.parent=null,this.outUI.setSiblingIndex(this.zIndex))}},cc._RF.pop()},{}],animCtrl:[function(e,t){"use strict";cc._RF.push(t,"a43f0j6l4lDYqg+4MWBNCet","animCtrl"),t.exports={jumpNum:function(e,t){this.windowSize=cc.winSize;var n=(844-this.windowSize.height)/2,o=new cc.Node;o.scale=.33;var i=o.addComponent(cc.Label);i.string="\u8865\u4ed3"+e+"W",i.fontSize=70,i.lineHeight=80,i.enableBold=!0;var a=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),t);o.x=a.x,o.y+=90,o.y-=n/2.5,config.UICtrl.findUI("effect").addChild(o);var c=o.addComponent(cc.LabelOutline);c.color=new cc.Color(186,186,186),c.width=2,c.color=new cc.Color(34,34,34),c.blur=5,cc.tween(o).by(.5,{y:20}).call(function(){o.destroy()}).start()},showCost:function(){},sellNum:function(e,t){this.windowSize=cc.winSize;var n=(844-this.windowSize.height)/2,o=new cc.Node,i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u94b1"],i.x=-180,i.scale=.54,o.addChild(i),o.scale=.33;var a=o.addComponent(cc.Label);a.string="+"+e+"W",a.fontSize=70,a.lineHeight=80,a.enableBold=!0;var c=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),t);o.x=c.x,o.y-=n/2.5,o.y+=90,config.UICtrl.findUI("effect").addChild(o);var s=o.addComponent(cc.LabelOutline);s.color=new cc.Color(186,186,186),s.width=2,s.color=new cc.Color(34,34,34),s.blur=5,cc.tween(o).by(.75,{y:40}).call(function(){o.destroy()}).start()},packageGoods:function(e,t,n){var o=this;e.getChildByName("level").active=!1,e.getChildByName("pic").active=!1,e.getChildByName("bg").active=!1;var i=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),config.UICtrl.getUIComponent("priceBoard").getPriceNodeByType(n));cc.tween(e).to(.05,{scale:1.1}).delay(.1).call(function(){e.destroy(),o.flyFruit(i,t,e,n)}).start()},composeEffect:function(e){this.effectPool||(this.effectPool=new cc.NodePool),this.effectPool.size()<=0&&this.addEffectPool(),config.dj.playEffect(config.warehouse.sound["\u68cb\u5b50\u5408\u6210"],.6);var t=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),n=this.effectPool.get();n.scale=.74,n.setPosition(t),config.UICtrl.findUI("effect").addChild(n),n.getComponent(cc.Animation).play("composeEffect")},composeTwoEffect:function(e){this.effectPool2||(this.effectPool2=new cc.NodePool),this.effectPool2.size()<=0&&this.addEffectPool2(),config.dj.playEffect(config.warehouse.sound["\u68cb\u5b50\u5408\u6210"],.8);var t=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),n=this.effectPool2.get();n.scale=.94,n.setPosition(t),config.UICtrl.findUI("effect").addChild(n),n.getComponent(cc.Animation).play("composeTwo")},composeThreeEffect:function(e){this.effectPool3||(this.effectPool3=new cc.NodePool),this.effectPool3.size()<=0&&this.addEffectPool3(),config.dj.playEffect(config.warehouse.sound["\u68cb\u5b50\u5408\u6210"]);var t=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),n=this.effectPool3.get();n.scale=.74,n.setPosition(t),config.UICtrl.findUI("effect").addChild(n),n.getComponent(cc.Animation).play("composeThree")},bonusEffect:function(e,t){this.windowSize=cc.winSize;var n=new cc.Node;n.scale=.33;var o=n.addComponent(cc.Label);o.string="\u5956\u52b1+"+t,o.fontSize=70,o.lineHeight=80,o.enableBold=!0;var i=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);n.setPosition(i),config.UICtrl.findUI("effect").addChild(n);var a=n.addComponent(cc.LabelOutline);a.color=new cc.Color(186,186,186),a.width=2,a.color=new cc.Color(71,46,25),a.blur=5,cc.tween(n).by(1.75,{y:40}).call(function(){n.destroy()}).start()},addEffectPool:function(){var e=cc.instantiate(config.warehouse.prefabList.composeEffect);e.getComponent(cc.Animation).addClip(config.warehouse.animationClip.composeEffect,"composeEffect"),e.getComponent(cc.Animation).on("stop",function(){this.effectPool.put(e)},this),this.effectPool.put(e)},addEffectPool2:function(){var e=cc.instantiate(config.warehouse.prefabList.composeTwo);e.getComponent(cc.Animation).addClip(config.warehouse.animationClip.composeTwo,"composeTwo"),e.getComponent(cc.Animation).on("stop",function(){this.effectPool2.put(e)},this),this.effectPool2.put(e)},addEffectPool3:function(){var e=cc.instantiate(config.warehouse.prefabList.composeThree);e.getComponent(cc.Animation).addClip(config.warehouse.animationClip.composeThree,"composeThree"),e.getComponent(cc.Animation).on("stop",function(){this.effectPool3.put(e)},this),this.effectPool3.put(e)},flyMoney:function(e,t,n){var o=this,i=0,a=0;1==t?(i=1,a=0):t<=5?(i=2,a=25):t<=10?(i=3,a=25):t<=14?(i=4,a=50):t<=19?(i=5,a=50):t<=40?(i=8,a=50):t<=100?(i=10,a=75):t<=200?(i=15,a=100):t<=300?(i=20,a=125):t<=400?(i=22,a=125):t<=500?(i=24,a=125):t<=800?(i=26,a=125):t<=1e3?(i=28,a=125):t<=1500?(i=30,a=125):t<=2e3?(i=35,a=150):t<=3e3?(i=40,a=160):t<=4e3?(i=50,a=170):(i=60,a=180),this.moneyPool||(this.moneyPool=new cc.NodePool);var c=this.moneyPool.size(),s=c>i?0:i-c;this.initMoneyPool(s);for(var r=this.getCirclePoints(a,config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),n),i,60),l=function(t){h=.3*Math.random()+.3;var i=o.moneyPool.get();i.scale=.12,i.setPosition(config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),n)),config.UICtrl.findUI("effect").addChild(i),cc.tween(i).to(.2,{position:r[t],scale:.2},{easing:"quadOut"}).to(h,{position:e,scale:.2},{easing:"quadIn"}).call(function(){t==r.length-1&&(config.dj.playEffect(config.warehouse.sound["\u652f\u4ed8\u5b9d"]),config.UICtrl.getUIComponent("assets").changeAssets(cc.find("Canvas").getComponent("gameCtrl").assetCount)),o.moneyPool.put(i)}).start()},f=0;f<r.length;f++){var h;l(f)}},flyFruit:function(e,t,n,o){var i=this,a=0,c=0;1==t?(a=1,c=0):t<=5?(a=2,c=25):t<=10?(a=3,c=25):t<=14?(a=4,c=50):t<=19?(a=5,c=50):t<=40?(a=8,c=50):t<=100?(a=10,c=75):t<=200?(a=15,c=100):t<=300?(a=20,c=125):t<=400?(a=22,c=125):t<=500?(a=24,c=125):t<=800?(a=26,c=125):t<=1e3?(a=28,c=125):t<=1500?(a=30,c=125):t<=2e3?(a=35,c=150):t<=3e3?(a=40,c=160):t<=4e3?(a=50,c=170):(a=60,c=180),this.fruitPool||(this.fruitPool=new cc.NodePool);var s=this.fruitPool.size(),r=s>a?0:a-s;this.initFruitPool(r);for(var l=this.getCirclePoints(c,config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),n),a,60),f=function(t){d=.3*Math.random()+.3;var a=i.fruitPool.get();a.getComponent(cc.Sprite).spriteFrame=config.tools.getChessPic(o),a.setPosition(config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),n)),config.UICtrl.findUI("effect").addChild(a),cc.tween(a).to(d,{position:e},{easing:"quadIn"}).call(function(){t==l.length-1&&(config.dj.playEffect(config.warehouse.sound["\u652f\u4ed8\u5b9d2"]),config.UICtrl.getUIComponent("assets").changeAssets(cc.find("Canvas").getComponent("gameCtrl").assetCount)),i.fruitPool.put(a)}).start()},h=0;h<l.length;h++){var d;f(h)}},initFruitPool:function(e){for(var t=0;t<e;t++){var n=new cc.Node;n.addComponent(cc.Sprite),n.scale=.28,this.fruitPool.put(n)}},UIJumpOut:function(){},showSellReword:function(e){this.windowSize=cc.winSize;var t=(844-this.windowSize.height)/2,n=new cc.Node,o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u94b1"],o.scale=.7,o.x=-150,n.addChild(o),n.scale=.33;var i=n.addComponent(cc.Label);i.string="+"+e+"W",i.fontSize=70,i.lineHeight=80,i.enableBold=!0;var a=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),config.UICtrl.findUI("assets"));n.y=a.y,n.y-=30,n.y-=t/2.5,config.UICtrl.findUI("effect").addChild(n);var c=n.addComponent(cc.LabelOutline);c.color=new cc.Color(186,186,186),c.width=2,c.color=new cc.Color(34,34,34),c.blur=5,cc.tween(n).by(.5,{y:20}).call(function(){n.destroy()}).start()},initMoneyPool:function(e){for(var t=0;t<e;t++){var n=new cc.Node;n.addComponent(cc.Sprite),n.addComponent(cc.Animation).addClip(config.warehouse.animationClip.coinFlip,"coinFlip"),n.getComponent(cc.Animation).play("coinFlip"),n.scale=.08,this.moneyPool.put(n)}},getCirclePoints:function(e,t,n,o){for(var i=[],a=Math.PI/180*Math.round(360/n),c=0;c<n;c++){var s=t.x+e*Math.sin(a*c),r=t.y+e*Math.cos(a*c);i.unshift(cc.v2(s+Math.random()*o,r+Math.random()*o))}return i},keepSlide:function(e,t,n){var o=cc.instantiate(config.warehouse.prefabList.point);if(config.UICtrl.findUI("effect").addChild(o),n){var i=new cc.Node;i.scale=1.2,i.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u5408\u6210\u66f4\u9ad8\u7ea7\u5546\u54c1"],o.addChild(i),i.y+=280}var a=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);return a.x+=10,a.y-=30,o.setPosition(a),0==t?cc.tween(o).by(.5,{x:-50}).delay(.25).call(function(){o.setPosition(a)}).union().repeatForever().start():1==t?cc.tween(o).by(.5,{x:50}).delay(.25).call(function(){o.setPosition(a)}).union().repeatForever().start():2==t?cc.tween(o).by(.5,{y:50}).delay(.25).call(function(){o.setPosition(a)}).union().repeatForever().start():cc.tween(o).by(.5,{y:-50}).delay(.25).call(function(){o.setPosition(a)}).union().repeatForever().start(),o},keepSlide1:function(e,t,n){var o=cc.winSize.height/844,i=new cc.Node;config.UICtrl.findUI("effect").addChild(i);var a=new cc.Node;a.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,i.addChild(a),a.scale=.85,a.scale*=o;var c=new cc.Node;c.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,i.addChild(c),c.scale=.85,c.scale*=o;var s=cc.instantiate(config.warehouse.prefabList.arrowSlide);i.addChild(s),s.scale*=o;var r=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);if(n){var l=cc.instantiate(config.warehouse.prefabList.cowTip);i.addChild(l),l.getChildByName("tip").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[1],l.y=r.y,l.y-=90}s.setPosition(r),c.setPosition(r),a.setPosition(r),0==t?(a.x-=65*o,s.x-=35*o):1==t?(a.x+=65*o,s.x+=35*o):2==t?(a.y+=65*o,s.y+=40*o,s.angle=90):(a.y-=65*o,s.y-=40*o,s.angle=90),cc.tween(s.children[0]).by(.25,{x:10}).by(.25,{x:-10}).delay(.25).union().repeatForever().start(),cc.tween(s.children[1]).by(.25,{x:-20}).by(.25,{x:20}).delay(.25).union().repeatForever().start(),config.eventDelegate.addEvent("cancelSlide1",function(){i.destroy()})},showSlideAnim:function(e,t,n){var o=cc.instantiate(config.warehouse.prefabList.point);if(config.UICtrl.findUI("effect").addChild(o),n){var i=new cc.Node;i.scale=1.2,i.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame["\u5408\u6210\u66f4\u9ad8\u7ea7\u5546\u54c1"],o.addChild(i),i.y+=280}var a=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);a.x+=10,a.y-=30,o.setPosition(a),0==t?cc.tween(o).by(.5,{x:-50}).delay(.25).call(function(){o.setPosition(a)}).union().repeat(3).call(function(){o.destroy()}).start():1==t?cc.tween(o).by(.5,{x:50}).delay(.25).call(function(){o.setPosition(a)}).union().repeat(3).call(function(){o.destroy()}).start():2==t?cc.tween(o).by(.5,{y:50}).delay(.25).call(function(){o.setPosition(a)}).union().repeat(3).call(function(){o.destroy()}).start():cc.tween(o).by(.5,{y:-50}).delay(.25).call(function(){o.setPosition(a)}).union().repeat(3).call(function(){o.destroy()}).start()},showSlideAnim1:function(e,t){var n=cc.winSize.height/844,o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,config.UICtrl.findUI("effect").addChild(o),o.scale=.85,o.scale*=n;var i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,config.UICtrl.findUI("effect").addChild(i),i.scale=.85,i.scale*=n;var a=cc.instantiate(config.warehouse.prefabList.arrowSlide);config.UICtrl.findUI("effect").addChild(a),a.scale*=n;var c=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);a.setPosition(c),i.setPosition(c),o.setPosition(c),0==t?(o.x-=65*n,a.x-=35*n):1==t?(o.x+=65*n,a.x+=35*n):2==t?(o.y+=65*n,a.y+=40*n,a.angle=90):(o.y-=65*n,a.y-=40*n,a.angle=90),cc.tween(a.children[0]).by(.25,{x:10}).by(.25,{x:-10}).delay(.25).union().repeat(3).call(function(){o.destroy(),a.destroy(),i.destroy()}).start(),cc.tween(a.children[1]).by(.25,{x:-20}).by(.25,{x:20}).delay(.25).union().repeat(3).start()},teachSlide:function(e,t){var n=cc.winSize.height/844,o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,config.UICtrl.findUI("effect").addChild(o),o.scale=.85,o.scale*=n;var i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,config.UICtrl.findUI("effect").addChild(i),i.scale=.85,i.scale*=n;var a=cc.instantiate(config.warehouse.prefabList.arrowSlide);config.UICtrl.findUI("effect").addChild(a),a.scale*=n;var c=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);a.setPosition(c),i.setPosition(c),o.setPosition(c),0==t?(o.x-=65*n,a.x-=35*n):1==t?(o.x+=65*n,a.x+=35*n):2==t?(o.y+=65*n,a.y+=40*n,a.angle=90):(o.y-=65*n,a.y-=40*n,a.angle=90),cc.tween(a.children[0]).by(.25,{x:10}).by(.25,{x:-10}).delay(.25).union().repeat(3).call(function(){o.destroy(),a.destroy(),i.destroy()}).start(),cc.tween(a.children[1]).by(.25,{x:-20}).by(.25,{x:20}).delay(.25).union().repeat(3).start()},keepPoint:function(e,t){var n=cc.winSize.height/844,o=new cc.Node;config.UICtrl.findUI("effect").addChild(o);var i=cc.instantiate(config.warehouse.prefabList.point);i.getComponent(cc.Animation).addClip(config.warehouse.animationClip.keepPoint,"keepPoint");var a=new cc.Node;a.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,o.addChild(a),o.addChild(i),a.scale=.85,a.scale*=n;var c=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);if(a.setPosition(c),t){var s=cc.instantiate(config.warehouse.prefabList.cowTip);o.addChild(s),s.getChildByName("tip").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[3],s.y=c.y,s.y-=110}c.x+=10,c.y-=30,i.setPosition(c),i.getComponent(cc.Animation).play("keepPoint"),config.eventDelegate.addEvent("cancelKeepPoint",function(){o.destroy()})},showPointAnim:function(e){var t=cc.winSize.height/844,n=cc.instantiate(config.warehouse.prefabList.point);config.UICtrl.findUI("effect").addChild(n),n.getComponent(cc.Animation).addClip(config.warehouse.animationClip.point,"point"),n.getComponent(cc.Animation).on("stop",function(){n.destroy()},this);var o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame.select,n.addChild(o),o.x-=45,o.y+=150,o.scale=3,o.scale*=t;var i=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);i.x+=10,i.y-=30,n.setPosition(i),n.getComponent(cc.Animation).play("point")},showADPointAnim:function(e){var t=cc.instantiate(config.warehouse.prefabList.point);config.UICtrl.findUI("effect").addChild(t),t.getComponent(cc.Animation).addClip(config.warehouse.animationClip.point,"point"),t.getComponent(cc.Animation).on("stop",function(){t.destroy()},this);var n=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e);return n.x+=10,n.y-=30,t.setPosition(n),t.getComponent(cc.Animation).play("point"),t},showPriceBoardFruit:function(){var e=config.UICtrl.findUI("priceBoard"),t=cc.instantiate(config.warehouse.prefabList.select),n=new cc.Node;n.scale=.4,n.addComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[2],n.y-=65,t.addChild(n),t.width=340,t.height=80,config.UICtrl.findUI("effect").addChild(t),t.setPosition(config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e)),t.y-=30,config.eventDelegate.addEvent("cancelPriceBoard",function(){t.destroy()})},showAssets:function(){var e=config.UICtrl.findUI("assets"),t=cc.instantiate(config.warehouse.prefabList.select),n=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),o=cc.instantiate(config.warehouse.prefabList.cowTip);t.addChild(o),o.getChildByName("tip").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[4],o.y=n.y,o.y-=570,t.width=220,config.UICtrl.findUI("effect").addChild(t),t.setPosition(n),config.eventDelegate.addEvent("cancelAsset",function(){t.destroy()})},showTarget:function(){var e=config.UICtrl.findUI("aim"),t=cc.instantiate(config.warehouse.prefabList.select);t.height=80,t.width=200,config.UICtrl.findUI("effect").addChild(t),t.setPosition(config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e)),t.x+=72.5,config.eventDelegate.addEvent("cancelTarget",function(){t.destroy()})},showStep:function(){var e=config.UICtrl.findUI("step"),t=new cc.Node;config.UICtrl.findUI("effect").addChild(t);var n=cc.instantiate(config.warehouse.prefabList.select);t.addChild(n);var o=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),i=cc.instantiate(config.warehouse.prefabList.cowTip);t.addChild(i),i.getChildByName("tip").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[5],i.y=o.y,i.y-=90,n.setPosition(o),config.eventDelegate.addEvent("cancelStep",function(){t.destroy()})},showAD:function(){var e=config.UICtrl.findUI("speculation"),t=new cc.Node;config.UICtrl.findUI("effect").addChild(t);var n=cc.instantiate(config.warehouse.prefabList.select);t.addChild(n);var o=config.tools.transformPositionOnNode(config.UICtrl.findUI("effect"),e),i=cc.instantiate(config.warehouse.prefabList.cowTip);t.addChild(i),i.getChildByName("tip").getComponent(cc.Sprite).spriteFrame=config.warehouse.spriteFrame[11],i.y=o.y,i.y+=160,n.width=360,n.setPosition(o),config.eventDelegate.addEvent("cancelAD",function(){t.destroy()})},teachDone:function(){},levelJump:function(e,t){var n=e.middle.getChildByName("pic"),o=.38;3==t?o=.38:4==t?o=.48:t>4&&(o=.58),cc.tween(n).to(.1,{scale:o},{easing:"quadIn"}).to(.05,{scale:.28}).start()},initCowTip:function(){this.cowPool||(this.cowPool=new cc.NodePool),this.cowPool.size()<=0&&this.addCowPool()},addCowPool:function(){var e=cc.instantiate(config.warehouse.prefabList.cowTip);config.UICtrl.findUI("effect").addChild(e),this.cowPool.put(e)},teachStage1:function(e){var t=cc.instantiate(config.warehouse.prefabList.teachStage1);config.UICtrl.findUI("effect").addChild(t),t.getComponent("teachStage1Ctrl").initTeach(e)},outComTip:function(e){this.cowPool.size()<=0&&this.addCowPool();var t=this.cowPool.get();config.UICtrl.findUI("effect").addChild(t);var n=t.getChildByName("cover"),o=t.getChildByName("cow"),i=o.getChildByName("bg"),a=i.getChildByName("label"),c=t.getChildByName("block");switch(n.width=644,n.height=655,n.x=0,n.y=0,o.x=90,o.y=-60,e){case"board":a.getComponent(cc.Label).string="\u6ed1\u52a8\u5408\u6210\u66f4\u9ad8\u7b49\u7ea7\u5546\u54c1\uff01",o.y+=130,n.y-=95,n.x+=5,n.active=!1,i.active=!1,n.width=785,n.height=795,config.UICtrl.stickOutUI(config.UICtrl.findUI("play")),config.UICtrl.findUI("board").setSiblingIndex(4),i.active=!0,c.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),"undefined"==typeof wx||"undefined"==typeof KSGameGlobal&&config.wxTools.boardTeach();break;case"sell":a.getComponent(cc.Label).string="\u70b9\u51fb\u5356\u51fa\u589e\u52a0\u8d44\u91d1",o.y+=130,n.y-=95,n.x+=5,n.active=!1,n.width=785,n.height=795,config.UICtrl.stickOutUI(config.UICtrl.findUI("play")),config.UICtrl.findUI("board").setSiblingIndex(4),i.active=!0,c.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),config.wxTools.sellTeach();break;case"priceBoard":a.getComponent(cc.Label).string="\u8fd9\u91cc\u662f\u4ef7\u683c\u677f\uff0c\u5408\u6210\u5546\u54c1\u4f1a\u63d0\u9ad8\u4ef7\u683c\uff01",n.y+=257,n.x+=3,n.width=740,n.height=530,o.y+=190,o.x+=60,n.active=!1,config.UICtrl.findUI("board").setSiblingIndex(2),config.UICtrl.stickOutUI(config.UICtrl.findUI("priceBoard")),i.active=!0,c.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),"undefined"==typeof wx||"undefined"==typeof KSGameGlobal&&config.wxTools.priceBoard();break;case"herald":a.getComponent(cc.Label).string="\u8fd9\u91cc\u5c55\u793a\u4ef7\u683c\u4f1a\u5728\u51e0\u56de\u5408\u540e\u53d8\u5316\u3002",n.y+=200,n.width=620,n.height=490,o.y+=100,n.active=!1,config.UICtrl.stickOutUI(config.UICtrl.findUI("herald")),i.active=!0,c.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),config.UICtrl.getUIComponent("play").givePromptOnce();break;case"step":a.getComponent(cc.Label).string="\u8fd9\u91cc\u662f\u5269\u4f59\u6b65\u6570,\u5408\u6210\u53ca\u70b9\u51fb\u5356\u51fa\u90fd\u4f1a\u6d88\u8017\u6b65\u6570\u3002",n.y+=135,n.x+=140,n.width=510,n.height=500,o.x+=60,o.y+=120,n.active=!1,config.UICtrl.findUI("board").setSiblingIndex(2),config.UICtrl.stickOutUI(config.UICtrl.findUI("step")),i.active=!0,c.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),"undefined"==typeof wx||"undefined"==typeof KSGameGlobal&&config.wxTools.stepTeach();break;case"asset":a.getComponent(cc.Label).string="\u8fd9\u91cc\u662f\u8d44\u91d1,\u8fbe\u6210\u76ee\u6807\u5373\u53ef\u901a\u5173\uff01",n.y+=135,n.x-=20,n.width=655,n.height=510,n.active=!1,config.UICtrl.stickOutUI(config.UICtrl.findUI("assets")),i.active=!0,c.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),o.y+=120,o.x+=50,"undefined"==typeof wx||"undefined"==typeof KSGameGlobal&&config.wxTools.assetsTeach();break;case"ad":a.getComponent(cc.Label).string="\u8fd9\u91cc\u662f\u5e7f\u544a\u9053\u5177\uff0c\u5206\u522b\u53ef\u4ee5\n\u201c\u83b7\u5f97\u8d44\u91d1\u201d\u3001\u201c\u5237\u65b0\u4ef7\u683c\u201d\u3001\n\u201c\u589e\u52a0\u6b65\u6570\u201d\uff0c\u597d\u597d\u5229\u7528\u5427\uff01",n.y-=340,n.width=760,n.height=510,o.y-=270,o.x+=50,n.active=!1,config.UICtrl.setBlack(config.UICtrl.findUI("bailout")),i.active=!0,c.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),config.UICtrl.getUIComponent("play").givePromptOnce();break;case"lowAsset":a.getComponent(cc.Label).string="\u5c0f\u5fc3\uff0c\u4f60\u5feb\u7834\u4ea7\u5566,\u70b9\u51fb\u5356\u51fa\u83b7\u5f97\u8d44\u91d1\u3002",n.active=!1,i.active=!0,c.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),o.y+=80;break;case"animate":case"moreAnimate":break;case"boardLocked":a.getComponent(cc.Label).string="\u65e0\u6cd5\u4e09\u6d88\u5408\u6210\u4e86\uff0c\u70b9\u51fb\u5356\u51fa\u3002",n.active=!1,i.active=!0,c.on(cc.Node.EventType.TOUCH_END,this.tipBack,this);break;case"highLevelChess":a.getComponent(cc.Label).string="\u673a\u4e0d\u53ef\u5931,\u70b9\u51fb\u5356\u51fa\u83b7\u5f97\u8d44\u91d1\u3002",n.active=!1,i.active=!0,c.on(cc.Node.EventType.TOUCH_END,this.tipBack,this);break;case"target":a.getComponent(cc.Label).string="\u8fd9\u662f\u6e38\u620f\u76ee\u6807",config.UICtrl.stickOutUI(config.UICtrl.findUI("aim")),i.active=!0,c.on(cc.Node.EventType.TOUCH_END,this.tipBack,this),o.y+=260}},tipBack:function(e){var t=e.currentTarget.parent,n=t.getChildByName("cow").getChildByName("bg"),o=t.getChildByName("block");n.active=!1,o.off(cc.Node.EventType.TOUCH_END,this.tipBack,this),config.UICtrl.cancelStickOut(),this.cowPool.put(t)},remindProvince:function(e){var t=cc.instantiate(config.warehouse.prefabList.point);config.UICtrl.findUI("UI").addChild(t),t.getComponent(cc.Animation).addClip(config.warehouse.animationClip.keepPoint,"keepPoint");var n=e.position;n.x+=10,n.y-=40,t.setPosition(n),t.getComponent(cc.Animation).play("keepPoint");var o=new cc.Node;o.addComponent(cc.Label).string="\u8bf7\u8bbe\u7f6e\u5730\u533a\uff0c\n\u4ee5\u52a0\u5165\u725b\u7fa4",o.getComponent(cc.Label).lineHeight=60;var i=o.addComponent(cc.LabelOutline);return i.color=new cc.Color(0,0,0),i.width=2,t.addChild(o),o.scale*=1.5,o.y-=280,t}},cc._RF.pop()},{}],boardLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"78c1fr9UJtEbaKQfVREeVZY","boardLayerCtrl"),cc.Class({extends:e("./cellBase"),properties:{},onLoad:function(){this.mapLayer=this.node.getChildByName("mapLayer"),this.checking=!1,this.moved=!1,this.combo=0,this.target=null,this.movedChess=null,this.bemovedChess=null,this.chessDir=[],this.dir={left:0,right:1,up:2,down:3},config.objectPool.creatNewPool("chessPool"),this.initIndexMap(),this.initBottom(),this.startGame()},initIndexMap:function(){this.high=5,config.gameInfo.mapHigh=5,this.wide=7,config.gameInfo.mapWide=7,this.map=[];for(var e=0;e<this.high;e++){this.map[e]=[];for(var t=0;t<this.wide;t++)this.map[e][t]=this.getMapCell([t,e])}},initBottom:function(){for(var e=0;e<this.high;e++)for(var t=0;t<this.wide;t++){var n;n=this.getSet(),this.putTouchCallBack(n),this.mapLayer.addChild(n),this.map[e][t].bottom=n}},initElement:function(){for(var e=0;e<this.high;e++)for(var t=0;t<this.wide;t++)this.map[e][t].type=this.randomType(),this.map[e][t].level=1,e>0&&this.map[e][t].type==this.map[e-1][t].type?t--:t>0&&this.map[e][t].type==this.map[e][t-1].type&&t--},drawMap:function(){this.addChessToPool(40);for(var e=0;e<this.high;e++)for(var t=0;t<this.wide;t++){var n=this.map[e][t].getChessPic(),o=config.objectPool.get("chessPool");this.map[e][t].middle=o,this.map[e][t].setPic(n),this.mapLayer.addChild(o),this.map[e][t].initPosition()}},addChessToPool:function(e){for(var t=0;t<e;t++){var n=cc.instantiate(config.warehouse.prefabList.chess);config.objectPool.put("chessPool",n)}},putTouchCallBack:function(e){e.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),e.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),e.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},startGame:function(){for(this.initElement();!this.checkRemovable();)this.initElement();this.drawMap()},touchStart:function(e){this.checking||(this.moved=!1,this.target=e.target)},touchMove:function(e){this.checking||(e.touch.getDelta().x>6?this.checkDir(this.dir.right):e.touch.getDelta().x<-6?this.checkDir(this.dir.left):e.touch.getDelta().y>6?this.checkDir(this.dir.up):e.touch.getDelta().y<-6&&this.checkDir(this.dir.down))},touchEnd:function(){this.checking||this.moved||this.cast()},cast:function(){var e=config.tools.getChessIndex(this.target,this.map);this.map[e[1]][e[0]].level>1&&(this.checking=!0,this.dealGroup([this.map[e[1]][e[0]]]))},checkRemovable:function(){for(var e=0;e<this.high;e++)for(var t=0;t<this.wide;t++){if(e>0&&this.map[e-1][t].type&&this.map[e][t].type){this.exchangeMapContent(t,e,t,e-1);var n=this.getRemovableChess(this.map);if(this.exchangeMapContent(t,e,t,e-1),n.length>0)return this.chessDir=[this.map[e][t],this.dir.down,this.map[e-1][t],n[0].type],!0}if(e<this.high-1&&this.map[e+1][t].type&&this.map[e][t].type&&(this.exchangeMapContent(t,e,t,e+1),n=this.getRemovableChess(this.map),this.exchangeMapContent(t,e,t,e+1),n.length>0))return this.chessDir=[this.map[e][t],this.dir.up,this.map[e+1][t],n[0].type],!0;if(t>0&&this.map[e][t-1].type&&this.map[e][t].type&&(this.exchangeMapContent(t,e,t-1,e),n=this.getRemovableChess(this.map),this.exchangeMapContent(t,e,t-1,e),n.length>0))return this.chessDir=[this.map[e][t],this.dir.left,this.map[e][t-1],n[0].type],!0;if(t<this.wide-1&&this.map[e][t+1].type&&this.map[e][t].type&&(this.exchangeMapContent(t,e,t+1,e),n=this.getRemovableChess(this.map),this.exchangeMapContent(t,e,t+1,e),n.length>0))return this.chessDir=[this.map[e][t],this.dir.right,this.map[e][t+1],n[0].type],!0}return!1},checkDir:function(e){if(this.target&&!this.checking){this.checking=!0,this.moved=!0;var t=config.tools.getChessIndex(this.target,this.map),n=t[0],o=t[1],i=void 0,a=void 0;switch(e){case this.dir.up:o<config.gameInfo.mapHigh-1&&(i=n,a=o+1);break;case this.dir.down:o>0&&(i=n,a=o-1);break;case this.dir.left:n>0&&(i=n-1,a=o);break;case this.dir.right:n<config.gameInfo.mapWide-1&&(i=n+1,a=o)}i>=0&&a>=0?this.map[o][n].middle&&this.map[a][i].middle&&(this.exchangeMapContent(n,o,i,a),this.result=this.getRemovableChess(this.map),this.result.length>0?(this.movedChess=this.map[o][n],this.bemovedChess=this.map[a][i],this.removeSuccess(n,o,i,a)):(this.exchangeMapContent(n,o,i,a),this.removeFail(n,o,i,a))):this.checking=!1}},exchangeMapContent:function(e,t,n,o){var i=this.map[t][e].level;this.map[t][e].level=this.map[o][n].level,this.map[o][n].level=i;var a=this.map[t][e].type;this.map[t][e].type=this.map[o][n].type,this.map[o][n].type=a;var c=this.map[t][e].middle;this.map[t][e].middle=this.map[o][n].middle,this.map[o][n].middle=c},removeSuccess:function(e,t,n,o){var i=this;cc.tween(this.map[t][e].middle).to(.15,{position:this.map[o][n].middle.position}).start(),cc.tween(this.map[o][n].middle).to(.15,{position:this.map[t][e].middle.position}).call(function(){i.removeChess()}).start()},removeFail:function(e,t,n,o){var i=this;cc.tween(this.map[t][e].middle).to(.15,{position:this.map[o][n].middle.position}).to(.15,{position:this.map[t][e].middle.position}).start(),cc.tween(this.map[o][n].middle).to(.15,{position:this.map[t][e].middle.position}).to(.15,{position:this.map[o][n].middle.position}).call(function(){i.map[t][e].resetPosition(),i.map[o][n].resetPosition(),i.checking=!1}).start()},removeChess:function(){function e(e,t){for(var n=0;n<e.length;n++)for(var o=0;o<t.length;o++)if(e[n]==t[o])return!0;return!1}if(this.result.length>0){for(var t=this.result.shift(),n=0;n<this.result.length;n++)if(e(t,this.result[n])){var o=this.result.splice(n,1);t=t.concat(o[0]),n=0}t=Array.from(new Set(t)),this.dealGroup(t)}else this.fixMap()},dealGroup:function(e){for(var t=e[0],n=0;n<e.length;n++)e[n]!=this.movedChess&&e[n]!=this.bemovedChess||(t=e[n]);for(n=0;n<e.length;n++)config.eventDelegate.dispatchEvent("\u68cb\u5b50\u6d88\u9664",e[n]),config.objectPool.put("chessPool",e[n].middle),e[n].middle=null;if(1==e.length);else if(3==e.length)config.eventDelegate.dispatchEvent("\u4e09\u6d88",e),config.eventDelegate.dispatchEvent("\u666e\u901a\u6d88\u9664",e),this.combo>0&&config.eventDelegate.dispatchEvent("\u8fde\u6d88",[e,this.combo]);else if(4==e.length){config.eventDelegate.dispatchEvent("\u56db\u6d88",e),config.eventDelegate.dispatchEvent("\u666e\u901a\u6d88\u9664",e),this.combo>0&&config.eventDelegate.dispatchEvent("\u8fde\u6d88",[e,this.combo]);var o=this.creatChess(t.index[0],t.index[1],2,t.type);this.mapLayer.addChild(o.middle),o.resetPosition()}else e.length>=5&&(config.eventDelegate.dispatchEvent("\u4e94\u6d88",e),config.eventDelegate.dispatchEvent("\u666e\u901a\u6d88\u9664",e),this.combo>0&&config.eventDelegate.dispatchEvent("\u8fde\u6d88",[e,this.combo]),o=this.creatChess(t.index[0],t.index[1],3,t.type),this.mapLayer.addChild(o.middle),o.resetPosition());this.removeChess()},fixMap:function(){for(var e=0;e<this.wide;e++)for(var t=this.high-1;t>=0;t--)if(!this.map[t][e].middle&&t>0){for(var n=t-1;!this.map[n][e].middle&&n>0;)n--;this.exchangeMapContent(e,t,e,n),this.map[t][e].onseat=!1,this.map[n][e].onseat=!1}for(var o=0;o<this.wide;o++)for(var i=0;i<this.high;i++)if(!this.map[i][o].middle){var a=this.creatChess(o,i,1);this.mapLayer.addChild(a.middle),a.resetPosition(),a.middle.y-=250}this.fixAnim()},creatChess:function(e,t,n,o){this.map[t][e].level=n,o?this.map[t][e].type=o:this.map[t][e].setRandomType();var i=this.map[t][e].getChessPic();return this.map[t][e].middle=config.objectPool.get("chessPool"),this.map[t][e].setPic(i),this.map[t][e]},fixAnim:function(){for(var e=this,t=0,n=0;n<this.wide;n++)for(var o=0;o<this.high;o++)if(!this.map[o][n].onseat){t++;var i=this.map[o][n].bottom.position;cc.tween(this.map[o][n].middle).to(.5,{position:i},{easing:"quadIn"}).call(function(){0==--t&&e.checkEnd()}).start()}},checkEnd:function(){this.result=this.getRemovableChess(this.map),this.result.length>0?(this.combo++,this.removeChess()):(this.checking=!1,this.combo=0,this.checkEnemy())},checkEnemy:function(){config.eventDelegate.dispatchEvent("\u654c\u4eba\u884c\u52a8")}}),cc._RF.pop()},{"./cellBase":"cellBase"}],cellBase:[function(e,t){"use strict";cc._RF.push(t,"eb3bbvRdGdNQpKkWoez/syi","cellBase"),cc.Class({extends:cc.Component,properties:{},getMapCell:function(e){return new n(e)},getRemovableChess:function(e){for(var t=[],n=[],o=config.gameInfo.mapWide,i=config.gameInfo.mapHigh,a=0;a<o;a++){t=[];for(var c=0;c<i;c++)t.length?e[c][a].type==t[0].type?t.push(e[c][a]):(t.length>=3&&n.push(t),(t=[]).push(e[c][a])):t.push(e[c][a]);t.length>=3&&n.push(t),t=[]}for(var s=0;s<i;s++){t=[];for(var r=0;r<o;r++)t.length?e[s][r].type==t[0].type?t.push(e[s][r]):(t.length>=3&&n.push(t),(t=[]).push(e[s][r])):t.push(e[s][r]);t.length>=3&&n.push(t),t=[]}return n},chooseGoods:function(e){var t=cc.instantiate(config.warehouse.prefabList.chess);switch(e){case"red":t.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("red"),config.red+=1;break;case"blue":t.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("orange"),config.blue+=1;break;case"green":t.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("green"),config.green+=1;break;case"yellow":t.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("yellow"),config.yellow+=1;break;case"purple":t.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("purple"),config.purple+=1}return t.getChildByName("pic").getComponent(cc.Sprite).trim=!1,t.getChildByName("pic").getComponent(cc.Sprite).sizeMode=2,config.total+=1,t},randomType:function(){return Math.floor(5*Math.random())},randomGoods:function(){var e=cc.instantiate(config.warehouse.prefabList.chess);switch(Math.floor(5*Math.random()+1)){case 1:e.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("red");break;case 2:e.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("orange");break;case 3:e.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("green");break;case 4:e.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("yellow");break;case 5:e.getChildByName("pic").addComponent(cc.Sprite).spriteFrame=config.tools.getChessPic("purple")}return e.getChildByName("pic").getComponent(cc.Sprite).trim=!1,e.getChildByName("pic").getComponent(cc.Sprite).sizeMode=2,e},getSet:function(){var e=new cc.Node;return e.width=50,e.height=50,e},checkMovedMap:function(){},getChessIndex:function(e,t){for(var n=0;n<t.length;n++)for(var o=0;o<t[0].length;o++)if(t[n][o].bottom==e||t[n][o].middle==e)return t[n][o].index},checkCross:function(e,t){for(var n=0;n<e.length;n++)for(var o=0;o<t.length;o++)if(e[n]==t[o])return e[n];return!1},checkSameLine:function(){},checkEmpty:function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e[0].length;n++)if(!e[t][n].middle)return e[t][n];return!1},checkLinked:function(e,t){var n=Math.abs(e[0]-t[0]),o=Math.abs(e[1]-t[1]);return console.log(e,t,Math.abs(n-o)),1==Math.abs(n-o)}});var n=function(){function e(e){this.index=e,this.level=1,this.removable=!0,this.onseat=!0,this.middle=null,this.type=0,this.bottom=null,this.tween=null,this.checked=!1,this.packed=!1,this.touchable=!0}var t=e.prototype;return t.shakeChess=function(){cc.tween(this.middle.getChildByName("pic")).to(.25,{angle:30}).to(.25,{angle:0}).to(.25,{angle:-30}).to(.25,{angle:0}).union().repeat(2).start()},t.stopShake=function(){},t.refreshLevel=function(){this.level<=1?this.middle.getChildByName("level").active=!1:this.middle.getChildByName("level").active=!0,this.middle.getChildByName("level").getChildByName("num").getComponent(cc.Label).string="x "+this.level},t.refreshSize=function(){this.middle.getChildByName("pic").scale=.28},t.setPic=function(e){this.middle.getChildByName("pic").getComponent(cc.Sprite).spriteFrame=e},t.resetPosition=function(){this.middle.setPosition(this.bottom.position)},t.initPosition=function(){this.bottom.x=this.index[0]*config.gameInfo.heightSpace,this.bottom.y=this.index[1]*config.gameInfo.widthSpace,this.resetPosition()},t.resetType=function(){var e=this.middle.getChildByName("pic").getComponent(cc.Sprite).spriteFrame.name;switch(e=e.slice(0,e.length-1)){case"orange":this.type="blue";break;case"green":this.type="green";break;case"purple":this.type="purple";break;case"red":this.type="red";break;case"yellow":this.type="yellow"}},t.setRandomType=function(){this.type=Math.floor(5*Math.random())},t.init=function(e){this.resetPosition(),this.refreshSize(),this.resetType(),e?(this.middle.getChildByName("level").active=!0,this.middle.getChildByName("bg").active=!0,this.refreshLevel()):(this.middle.getChildByName("level").active=!1,this.middle.getChildByName("bg").active=!1)},t.creatTweenToBottom=function(e){var t=config.tools.getDistance(this.middle.position,this.bottom.position)/config.speed;e&&(t*=.5*Math.random()+1),this.tween=cc.tween(this.middle).to(t,{position:this.bottom.position},{easing:"quadIn"}).call(function(){config.eventDelegate.dispatchEvent("tweenDone")})},t.startTween=function(){this.tween.start()},t.getChessPic=function(){var e=config.gameInfo.chessData[""+this.type],t=config.warehouse.spriteFrame;switch(this.level){case 1:return t[e.level1Pic];case 2:return t[e.level2Pic];case 3:return t[e.level3Pic]}},e}();cc._RF.pop()},{}],chessDealer:[function(e,t){"use strict";cc._RF.push(t,"7a1bbf17aBDBYwKNqa7pSEw","chessDealer"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.playerData=this.node.getChildByName("player").getComponent("playerData"),this.enemyData=this.node.getChildByName("enemy").getComponent("enemyData"),this.board=this.node.getChildByName("boardLayer").getComponent("boardLayerCtrl"),this.initChessData(),this.initRemoveEvent()},initChessData:function(){config.gameInfo.chessData[0]=config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[0]),config.gameInfo.chessData[1]=config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[1]),config.gameInfo.chessData[2]=config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[2]),config.gameInfo.chessData[3]=config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[3]),config.gameInfo.chessData[4]=config.tools.getBaseChessDataByID(config.playerInfo.usingChesses[4]),config.gameInfo.chessEffect[0]=config.tools.getChessEffectByLevel(config.gameInfo.chessData[0],this.getChessLevel(config.gameInfo.chessData[0])),config.gameInfo.chessEffect[1]=config.tools.getChessEffectByLevel(config.gameInfo.chessData[1],this.getChessLevel(config.gameInfo.chessData[1])),config.gameInfo.chessEffect[2]=config.tools.getChessEffectByLevel(config.gameInfo.chessData[2],this.getChessLevel(config.gameInfo.chessData[2])),config.gameInfo.chessEffect[3]=config.tools.getChessEffectByLevel(config.gameInfo.chessData[3],this.getChessLevel(config.gameInfo.chessData[3])),config.gameInfo.chessEffect[4]=config.tools.getChessEffectByLevel(config.gameInfo.chessData[4],this.getChessLevel(config.gameInfo.chessData[4]))},getChessLevel:function(e){return e.beginningLevel+config.playerInfo.chessLevel[e.id]},initRemoveEvent:function(){var e=this;config.eventDelegate.addEvent("\u68cb\u5b50\u6d88\u9664",function(t){var n=t.detail,o=n.type,i=n.level,a=config.gameInfo.chessEffect[""+o];1==i?e.dealEffect(a.level1Effect,[config.gameInfo.chessData[""+o],o]):2==i?e.dealEffect(a.level2Effect,[config.gameInfo.chessData[""+o],o]):3==i&&e.dealEffect(a.level3Effect,[config.gameInfo.chessData[""+o],o])}),config.eventDelegate.addEvent("\u4e09\u6d88",function(t){var n=t.detail[0].type,o=config.gameInfo.chessEffect[""+n];e.dealEffect(o.threeRemoveEffect)}),config.eventDelegate.addEvent("\u666e\u901a\u6d88\u9664",function(t){var n=t.detail[0].type,o=config.gameInfo.chessEffect[""+n];e.dealEffect(o.normalRemoveEffect)}),config.eventDelegate.addEvent("\u8fde\u6d88",function(t){var n=t.detail,o=n[0][0].type,i=n[1],a=config.gameInfo.chessEffect[""+o];e.dealEffect(a.comboRemoveEffect,i)}),config.eventDelegate.addEvent("\u56db\u6d88",function(t){var n=t.detail[0].type,o=config.gameInfo.chessEffect[""+n];e.dealEffect(o.fourRemoveEffect)}),config.eventDelegate.addEvent("\u4e94\u6d88",function(t){var n=t.detail[0].type,o=config.gameInfo.chessEffect[""+n];e.dealEffect(o.fiveRemoveEffect)})},dealEffect:function(e,t){if(e.length>0)for(var n=0;n<e.length;n++)this.checkEffect(e[n],t)},checkEffect:function(e,t){if(!e.condition||this.checkCondition(e.condition)){var n=this.getTarget(e.target);switch(e.type){case 0:var o=Math.floor(this.playerData.getATK(t)*e.num1/100);console.log("\u68cb\u5b50\u4f24\u5bb3"+o),n.getAttack(o);break;case 2:var i=e.num1;console.log("\u83b7\u5f97\u80fd\u91cf"+i),n.changeEnergy(i)}}},getTarget:function(e){switch(e){case 0:return this.playerData;case 1:return this.enemyData;case 2:case 3:case 4:return this.playerData;case 5:return this.board}},checkCondition:function(){return!0}}),cc._RF.pop()},{}],config:[function(e,t){"use strict";cc._RF.push(t,"6e09cb6LuJM1JR16LhquW5V","config"),window.config={warehouse:e("./warehouse"),tools:e("./tools"),dj:e("./dj"),eventDelegate:e("./eventDelegate"),resultCreator:e("./randomResultCreator"),animCtrl:e("./animCtrl"),UICtrl:e("./UICtrl"),saver:e("./saver"),wxTools:e("./wxtools"),ksTools:e("./kstools"),objectPool:e("./objectPool"),gameInfo:{chessData:{0:null,1:null,2:null,3:null,4:null},chessEffect:{0:null,1:null,2:null,3:null,4:null},widthSpace:50,heightSpace:50,mapHigh:0,mapWide:0,currentDangerCountdown:1,heroData:{}},passInfo:{},accountInfo:{openID:null,nickName:null,avatarlUrl:null},updateInfo:{nickName:null,avatarlUrl:null,province:null,usingSkin:null,cowNum:null,highestMoney:null,lowestStep:null,firstPassTime:null},currentDate:0,avatarPic:null,needUpdate:!1,playerInfo:{firstGame:!0,passedYesterday:!1,firstLunchToday:!0,creatAccountDate:null,lastLunchDate:null,playTimesToday:0,passedTime:0,highestMoneyToday:0,lowestStepToday:0,firstPassToday:null,starNum:0,cowNum:0,unlockedSkin:[],usingSkin:"",province:"",data1:0,data2:0,data3:0,data4:0,data5:1,saverVersion:1.12,raceList:[],rank:10,data6:0,skinFragmentProgress:{s1:0,s2:0,s3:0,s4:0,s5:0,s6:0,s7:0,s8:0,s9:0,s10:0,s11:0,s12:0,s13:0,s14:0,s15:0,s16:0,s17:0,s18:0},missionList:[],missionProgress:0,behaviorDataCollection:{shareGame:0,fourRemove:0,fiveRemove:0,watchAD:0,sell1000W:0,sell20Fruits:0,buyCommodity:0,checkRank:0,useAddStep:0,usePriceUp:0,useGetMoney:0},dailyCommodityList:[],usingChesses:[1e4,10004,10003,10002,10001],ownedChess:[1e4,10001,10002,10003,10004,10005,10006,10007,10008,10009,10010,10011,10012,10013,10014,10015,10016,10017,10018,10019,10020,10021,10022,10023,10024,10025],chessLevel:{1e4:0,10001:0,10002:0,10003:0,10004:0,10005:0,10006:0,10007:0,10008:0,10009:0,10010:0,10011:0,10012:0,10013:0,10014:0,10015:0,10016:0,10017:0,10018:0,10019:0,10020:0,10021:0,10022:0,10023:0,10024:0,10025:0},chessFragmentProgress:{}},totalSkin:18,areaList:["\u5317\u4eac","\u5929\u6d25","\u4e0a\u6d77","\u91cd\u5e86","\u6cb3\u5317","\u5c71\u897f","\u5185\u8499\u53e4","\u8fbd\u5b81","\u5409\u6797","\u9ed1\u9f99\u6c5f","\u6c5f\u82cf","\u6d59\u6c5f","\u5b89\u5fbd","\u798f\u5efa","\u6c5f\u897f","\u5c71\u4e1c","\u6cb3\u5357","\u6e56\u5317","\u6e56\u5357","\u5e7f\u4e1c","\u5e7f\u897f","\u6d77\u5357","\u56db\u5ddd","\u8d35\u5dde","\u4e91\u5357","\u897f\u85cf","\u9655\u897f","\u7518\u8083","\u9752\u6d77","\u5b81\u590f","\u65b0\u7586","\u9999\u6e2f","\u6fb3\u95e8","\u53f0\u6e7e"],dailyRank:null,dailyrankList:[],dailyDone:!1,dailyProgress:0,historyRank:null,historyRankList:[],historyDone:!1,yesterdayRank:null,yesterdayRankList:[],yesterdayDone:!1,raceProgress:0,raceDone:!1,red:0,green:0,yellow:0,blue:0,purple:0,total:0,teachStageNum:0,stage14:{match3Grow:2,matchComboGrow:1,match4Grow:3,match5Grow:7,step:20,target:100,bailout:2,finance:30,speculation:[1,5]},stageNum:1,stage1:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:20,target:100,bailout:2,finance:30,speculation:[1,3]},stage2:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:30,target:1e3,bailout:3,finance:100,speculation:[1,4]},stage3:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:1e4,bailout:4,finance:300,speculation:[1,5]},stage4:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:30,target:1e4,bailout:4,finance:500,speculation:[1,5]},stage5:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:30,target:15e3,bailout:4,finance:750,speculation:[1,5]},stage6:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:2e4,bailout:4,finance:1e3,speculation:[1,5]},stage7:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:3e4,bailout:4,finance:1500,speculation:[1,5]},stage8:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:5e4,bailout:4,finance:2500,speculation:[1,5]},stage9:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:7e4,bailout:4,finance:3500,speculation:[1,5]},stage10:{match3Grow:1,matchComboGrow:0,match4Grow:3,match5Grow:7,step:40,target:1e5,bailout:4,finance:5e3,speculation:[1,5]},gameSetting:null,lastClickPoint:null,thisClickPoint:null,usedAD:0,transcribed:!1,cloudPlayerSaver:{avatarlUrl:null,usingSkin:null,unlockedSkin:[],firstLunchToday:null,UID:null,nickName:null,province:null,cowNum:null,starNum:null,passNumToday:null,highestMoneyToday:null,lowestStepToday:null,firstPassTimeToday:null,creatAccountDate:null,firstGame:!0,historyHighestMoney:null}},cc._RF.pop()},{"./UICtrl":"UICtrl","./animCtrl":"animCtrl","./dj":"dj","./eventDelegate":"eventDelegate","./kstools":"kstools","./objectPool":"objectPool","./randomResultCreator":"randomResultCreator","./saver":"saver","./tools":"tools","./warehouse":"warehouse","./wxtools":"wxtools"}],dj:[function(e,t){"use strict";var n,o,i,a;cc._RF.push(t,"b3691Xew0hFoLgSzqnc7TBD","dj"),t.exports=(o=null,i=!1,a=null,(n={}).playMusic=function(e,t){if(config.playerInfo.music){o&&cc.audioEngine.stopMusic(),cc.audioEngine.playMusic(e,!0);var n=void 0===t?1:t;cc.audioEngine.setMusicVolume(n),o=e}},n.stopMusic=function(){o&&cc.audioEngine.stopMusic()},n.pauseMusic=function(){o&&cc.audioEngine.pauseMusic()},n.resumeMusic=function(){o&&cc.audioEngine.resumeMusic()},n.setMusicVolume=function(e){cc.audioEngine.setMusicVolume(e)},n.switchMusic=function(){},n.playEffect=function(e,t,n){if(!i&&config.playerInfo.sound){n?a=cc.audioEngine.playEffect(e,n):cc.audioEngine.playEffect(e,n);var o=void 0===t?1:t;cc.audioEngine.setEffectsVolume(o)}},n.setEffectVolume=function(){},n.stopEffect=function(){a&&cc.audioEngine.stop(a)},n.switchEffect=function(e){i=e},n),cc._RF.pop()},{}],enemyData:[function(e,t){"use strict";cc._RF.push(t,"cd2ccK66oFKSJAUtc/lq9UC","enemyData"),cc.Class({extends:cc.Component,properties:{spine:"",zombieName:"",enemyCurrentHP:0,enemyMaxHP:0,ATK:0,elementType:0,dodge:0,buffData:[],ATKFix:0,hurtFix:0,shield:0,actionLine:[],actionProgress:0,action1Data:null,action2Data:null,action3Data:null,dangerCountdown:1},getCurrentActionData:function(){var e=this.actionLine[this.actionProgress];if(e)return 1==e?this.action1Data:2==e?this.action2Data:3==e?this.action3Data:null},getActionPreview:function(){var e=1,t=this.actionProgress+1;for(t>=this.actionLine.length&&(t=0);!this.actionLine[t];)e+=1,(t+=1)>=this.actionLine.length&&(t=0);return 1==this.actionLine[t]?[this.action1Data,e]:2==this.actionLine[t]?[this.action2Data,e]:3==this.actionLine[t]?[this.action3Data,e]:void 0},getAttack:function(e){100*Math.random()<=this.dodge?console.log("\u654c\u4eba\u95ea\u907f"):(e*=(100+this.hurtFix)/100,this.shield>0&&(this.shield>e?this.shield-=e:(this.shield=0,e-=shield)),this.enemyCurrentHP-=Math.floor(e),this.enemyCurrentHP<=0&&console.log("\u6e38\u620f\u80dc\u5229"),this.UI.refreshLife())},getHeal:function(e){this.enemyCurrentHP+=e,this.enemyCurrentHP>=this.enemyMaxHP&&(this.enemyCurrentHP=this.enemyMaxHP),this.UI.refreshLife()},nextAction:function(){this.actionProgress+=1,this.actionProgress>=this.actionLine.length&&(this.actionProgress=0)},nextTurn:function(){this.dangerCountdown+=1,this.UI.refreshDangerCountdown(),this.UI.refreshActionCountdown()},getATK:function(){return this.ATK*((100+this.ATKFix)/100)},onLoad:function(){this.UI=this.node.getComponent("enemyUICtrl")}}),cc._RF.pop()},{}],enemyDealer:[function(e,t){"use strict";cc._RF.push(t,"11786+VPdlEapiM9mgRBhJa","enemyDealer"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.enemyData=this.node.getChildByName("enemy").getComponent("enemyData"),this.playerData=this.node.getChildByName("player").getComponent("playerData"),this.board=this.node.getChildByName("boardLayer").getComponent("boardLayerCtrl"),this.initEnemyActionLine(),this.initEnemyEvent()},initEnemyActionLine:function(){},initEnemyEvent:function(){var e=this;config.eventDelegate.addEvent("\u654c\u4eba\u884c\u52a8",function(){e.enemyData.nextAction();var t=e.enemyData.getCurrentActionData();t&&e.checkAction(t),e.enemyData.nextTurn()}),config.eventDelegate.addEvent("\u654c\u4eba\u72c2\u66b4",function(){})},checkAction:function(e){for(var t=0;t<e.length;t++)this.checkEffect(e[t])},checkEffect:function(e){var t=this.getTarget(e.target);switch(e.type){case 0:var n=Math.floor(this.enemyData.getATK());t.getAttack(n)}},getTarget:function(e){switch(e){case 0:return this.playerData;case 1:return this.enemyData;case 2:case 3:case 4:return this.playerData;case 5:return this.board}}}),cc._RF.pop()},{}],enemyUICtrl:[function(e,t){"use strict";cc._RF.push(t,"daa228mPfpKwoF9vMZV5u8J","enemyUICtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.enemyData=this.node.getComponent("enemyData"),this.lifeBar=this.node.getChildByName("life"),this.zombieName=this.lifeBar.getChildByName("name"),this.lifeNum=this.lifeBar.getChildByName("num"),this.typeName=this.node.getChildByName("type").getChildByName("name"),this.actionCountdown=this.node.getChildByName("actionCountdown"),this.buffList=this.node.getChildByName("buffList"),this.dangerCountdown=this.node.getChildByName("dangerCountdown"),this.passName=this.node.getChildByName("passName")},refreshUI:function(){this.lifeBar.getChildByName("name").getComponent(cc.Label).string=this.enemyData.zombieName,this.passName.getChildByName("num").getComponent(cc.Label).string=config.passInfo.passName,this.refreshElementType(),this.refreshDangerCountdown(),this.refreshActionCountdown(),this.refreshLife()},refreshLife:function(){this.lifeNum.getComponent(cc.Label).string="\u751f\u547d\u503c:"+this.enemyData.enemyCurrentHP,this.lifeBar.getComponent(cc.ProgressBar).progress=this.enemyData.enemyCurrentHP/this.enemyData.enemyMaxHP},refreshDangerCountdown:function(){this.dangerCountdown.getChildByName("num").getComponent(cc.Label).string="\u7b2c"+this.enemyData.dangerCountdown+"\u56de\u5408"},refreshActionCountdown:function(){var e=this.enemyData.getActionPreview(),t="";switch(e[0][0].type){case 0:t="\u653b\u51fb";break;case 1:t="\u56de\u590d";break;case 3:t="\u52a0\u901f";break;case 4:t="\u51b2\u51fb"}this.actionCountdown.getChildByName("name").getComponent(cc.Label).string=t,this.actionCountdown.getChildByName("num").getComponent(cc.Label).string=e[1]},refreshElementType:function(){0==this.enemyData.elementType?this.typeName.getComponent(cc.Label).string="\u91d1":1==this.enemyData.elementType?this.typeName.getComponent(cc.Label).string="\u6728":2==this.enemyData.elementType?this.typeName.getComponent(cc.Label).string="\u6c34":3==this.enemyData.elementType?this.typeName.getComponent(cc.Label).string="\u706b":4==this.enemyData.elementType&&(this.typeName.getComponent(cc.Label).string="\u571f")}}),cc._RF.pop()},{}],eventDelegate:[function(e,t){"use strict";cc._RF.push(t,"c2defqIpcpOCrPv2wa9WPOi","eventDelegate");var n=e("../overall/notificationCenter");t.exports={eventTypeList:{},addEvent:function(e,t){return this.eventTypeList[e]||(this.eventTypeList[e]=[],n.on(e,function(t){var n=this,o=this.eventTypeList[e];t.target=this,o.forEach(function(e){e.call(n,t)})}.bind(this))),this.eventTypeList[e].push(t),this.eventTypeList[e].length-1},dispatchEvent:function(e,t){if(this.eventTypeList[e]){var o=new cc.Event.EventCustom(e,!0);o.setUserData(t),n.dispatchEvent(o)}else console.log("\u6ca1\u6709"+e+"\u4e8b\u4ef6")},cleanEvent:function(e){this.eventTypeList[e]&&(n.off(e),this.eventTypeList[e]=[])},cleanOneOfEvent:function(){},cleanAllEvent:function(){for(var e in this.eventTypeList)n.off(e);this.eventTypeList={}}},cc._RF.pop()},{"../overall/notificationCenter":"notificationCenter"}],gameBeginCtrl:[function(e,t){"use strict";cc._RF.push(t,"0d1aePw40hDMqMH49GFyMGw","gameBeginCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){config.tools.addCallBackToButton(this.node,"gameBeginCtrl","gameBegin",null,this.node)},gameBegin:function(){cc.director.loadScene("game")}}),cc._RF.pop()},{}],gameCtrl:[function(e,t){"use strict";cc._RF.push(t,"ef772hkIPxFLLA7/neq2RA8","gameCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.enemy=this.node.getChildByName("enemy"),this.enemyData=this.enemy.getComponent("enemyData"),this.enemyUI=this.enemy.getComponent("enemyUICtrl"),this.player=this.node.getChildByName("player"),this.playerData=this.player.getComponent("playerData"),this.playerUI=this.player.getComponent("playerUICtrl"),this.initGameInfo()},start:function(){this.enemyUI.refreshUI(),this.playerUI.refreshUI()},initGameInfo:function(){this.initEnemyData(),this.initEnemyBeginSkill(),this.initPlayerData()},initEnemyData:function(){for(var e=config.passInfo,t=config.warehouse.json.enemyData,n=0;n<t.length;n++)t[n].id==e.enemyID&&this.loadEnemyData(t[n],e)},loadEnemyData:function(e,t){this.enemyData.enemyMaxHP=t.life,this.enemyData.enemyCurrentHP=t.life,this.enemyData.ATK=t.attack,this.enemyData.elementType=e.element,this.enemyData.actionLine=e.actionLine,this.enemyData.zombieName=e.zombieName,this.enemyData.action1Data=e.action1,this.enemyData.action2Data=e.action2,this.enemyData.action3Data=e.action3},initEnemyBeginSkill:function(){},initPlayerData:function(){this.playerData.MaxHP=100,this.playerData.currentHP=100}}),cc._RF.pop()},{}],kstools:[function(require,module,exports){"use strict";cc._RF.push(module,"8e7ac0jphVMWbk1nizPqK7S","kstools"),module.exports={login:function(){var e=this;this.checkSession()?console.log("\u8fdb\u5165\u6e38\u620f"):ks.login({success:function(t){e.authorize("scope.userInfo",t.code)},fail:function(){}})},authorize:function(e,t){var n=this;ks.authorize({scope:e,success:function(){console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6210\u529f"),n.getKSUserInfo(t)},fail:function(e){console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25: "+JSON.stringify(e)),ks.exitMiniProgram()},complete:function(){}})},getKSUserInfo:function(e){var t=this;ks.getUserInfo({success:function(n){config.tools.loadAvatarPicOnKs(n.avatarUrl),config.accountInfo.nickName=n.nickName,config.accountInfo.avatarlUrl=n.avatarUrl,t.openIDRequest(e)},fail:function(e){console.log("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25\uff1a"+JSON.stringify(e))},complete:function(){}})},openIDRequest:function(e){var t=this,n="http://60.204.241.244:8079/cowplay/"+e;ks.request({url:n,method:"GET",success:function(e){console.log("\u767b\u5f55\u6210\u529f");var n=JSON.parse(e.data.data);config.accountInfo.openID=n.open_id,t.getPlayerInfoByOpenId()},fail:function(){}})},getPlayerInfoByOpenId:function(){var e=this;ks.request({url:"http://60.204.241.244:8079/cowplay/getinfobyopenid",data:{openid:config.accountInfo.openID},method:"POST",success:function(t){var n=t.data.data.playerinfo,o=t.data.data.userinfo;if(n){var i=config.saver.getData("playerInfo");config.saver.checkSaverVersion(i)?config.playerInfo=i:e.transfromVersion(i),e.readPlayerInfo(n),e.checkFirst(),e.editPlayerInfo(),console.log("\u8bfb\u53d6\u5b58\u6863\u6210\u529f")}else console.log("\u521b\u5efa\u5b58\u6863"),config.saver.deleteData("playerInfo"),e.checkSaver(),e.checkFirst(),e.creatPlayerInfo();o?console.log(o):e.addUserInfo(),config.UICtrl.getUIComponent("loading").lunched=!0,config.playerInfo.firstGame?config.UICtrl.getUIComponent("cutting").cutToScene("game"):config.UICtrl.getUIComponent("cutting").cutToScene("rank")},fail:function(){}})},getUserInfoByOpenId:function getUserInfoByOpenId(id,list,index,type){ks.request({url:"http://60.204.241.244:8079/cowplay/getinfobyopenid",data:{openid:id},method:"POST",success:function success(res){"daily"==type?(list[index].userinfo=res.data.data.userinfo,list[index].userinfo.firstpasstoday=JSON.parse(eval("("+res.data.data.playerinfo.firstpasstoday+")")),list[index].userinfo.loweststeptoday=res.data.data.playerinfo.loweststeptoday,list[index].userinfo.cownum=res.data.data.playerinfo.data4,list[index].userinfo.usingskin=res.data.data.playerinfo.usingskin,config.dailyProgress-=1,config.dailyProgress<=0&&(config.dailyDone=!0)):"history"==type?res.data.data.userinfo&&(list[index].userinfo=res.data.data.userinfo,list[index].userinfo.cownum=res.data.data.playerinfo.passedtime):"yesterday"==type?res.data.data.userinfo&&(list[index].userinfo=res.data.data.userinfo,list[index].userinfo.cownum=res.data.data.playerinfo.data4):"race"==type&&(list[index]=[res.data.data.userinfo.nickname,res.data.data.playerinfo.highestmoneytoday,res.data.data.playerinfo.openid],config.raceProgress-=1,config.raceProgress<=0&&config.UICtrl.getUIComponent("race").refreshUI())},fail:function(){}})},creatPlayerInfo:function(){ks.request({url:"http:/60.204.241.244:8079/cowplay/addplayerinfo",data:{openid:config.accountInfo.openID.toString(),firstGame:config.playerInfo.firstGame.toString(),passedYesterday:config.playerInfo.passedYesterday.toString(),firstLunchToday:config.playerInfo.firstLunchToday.toString(),creatAccountDate:JSON.stringify(JSON.stringify(config.playerInfo.creatAccountDate)),lastLunchDate:JSON.stringify(JSON.stringify(config.playerInfo.lastLunchDate)),playTimesToday:config.playerInfo.playTimesToday.toString(),passedTime:config.playerInfo.passedTime.toString(),highestMoneyToday:config.playerInfo.highestMoneyToday.toString(),lowestStepToday:config.playerInfo.lowestStepToday.toString(),firstPassToday:JSON.stringify(JSON.stringify(config.playerInfo.firstPassToday)),starNum:config.playerInfo.starNum.toString(),unlockedSkin:config.playerInfo.unlockedSkin.toString(),usingSkin:config.playerInfo.usingSkin.toString(),province:config.playerInfo.province.toString(),data1:config.playerInfo.data1.toString(),data2:config.playerInfo.data2.toString(),data3:config.playerInfo.data3.toString(),data4:config.playerInfo.data4.toString(),data5:config.playerInfo.data5.toString(),saverVersion:config.playerInfo.saverVersion.toString()},method:"POST",success:function(){console.log("\u65b0\u589e\u7528\u6237\u5b58\u6863\u4fe1\u606f\u6210\u529f")},fail:function(){console.log("\u65b0\u589e\u7528\u6237\u5b58\u6863\u4fe1\u606f\u5931\u8d25")}})},editPlayerInfo:function(){ks.request({url:"http:/60.204.241.244:8079/cowplay/editplayerinfo",data:{openid:config.accountInfo.openID.toString(),firstGame:config.playerInfo.firstGame.toString(),passedYesterday:config.playerInfo.passedYesterday.toString(),firstLunchToday:config.playerInfo.firstLunchToday.toString(),creatAccountDate:JSON.stringify(JSON.stringify(config.playerInfo.creatAccountDate)),lastLunchDate:JSON.stringify(JSON.stringify(config.playerInfo.lastLunchDate)),playTimesToday:config.playerInfo.playTimesToday.toString(),passedTime:config.playerInfo.passedTime.toString(),highestMoneyToday:config.playerInfo.highestMoneyToday.toString(),lowestStepToday:config.playerInfo.lowestStepToday.toString(),firstPassToday:JSON.stringify(JSON.stringify(config.playerInfo.firstPassToday)),starNum:config.playerInfo.starNum.toString(),unlockedSkin:config.playerInfo.unlockedSkin.toString(),usingSkin:config.playerInfo.usingSkin.toString(),province:config.playerInfo.province.toString(),data1:config.playerInfo.data1.toString(),data2:config.playerInfo.data2.toString(),data3:config.playerInfo.data3.toString(),data4:config.playerInfo.data4.toString(),data5:config.playerInfo.data5.toString(),saverVersion:config.playerInfo.saverVersion.toString()},method:"POST",success:function(){console.log("\u4fee\u6539\u7528\u6237\u5b58\u6863\u4fe1\u606f\u6210\u529f")},fail:function(){console.log("\u4fee\u6539\u7528\u6237\u5b58\u6863\u4fe1\u606f\u5931\u8d25")}})},addUserInfo:function(){ks.request({url:"http:/60.204.241.244:8079/cowplay/adduserinfo",data:{openid:config.accountInfo.openID.toString(),avatarlUrl:config.accountInfo.avatarlUrl.toString(),cowNum:config.playerInfo.passedTime.toString(),highestMoney:config.playerInfo.highestMoneyToday.toString(),lowestStepToday:config.playerInfo.lowestStepToday.toString(),firstPassToday:JSON.stringify(JSON.stringify(config.playerInfo.firstPassToday)),nickName:config.accountInfo.nickName.toString(),usingSkin:config.playerInfo.usingSkin.toString(),province:config.playerInfo.province.toString()},method:"POST",success:function(){console.log("\u65b0\u589e\u7528\u6237\u4fe1\u606f\u6210\u529f")},fail:function(){console.log("\u65b0\u589e\u7528\u6237\u4fe1\u606f\u5931\u8d25")}})},editUserInfo:function(){ks.request({url:"http:/60.204.241.244:8079/cowplay/edituserinfo",data:{openid:config.accountInfo.openID.toString(),avatarlUrl:config.accountInfo.avatarlUrl.toString(),cowNum:config.playerInfo.passedTime.toString(),highestMoney:config.playerInfo.highestMoneyToday.toString(),lowestStepToday:config.playerInfo.lowestStepToday.toString(),firstPassToday:JSON.stringify(JSON.stringify(config.playerInfo.firstPassToday)),nickName:config.accountInfo.nickName.toString(),usingSkin:config.playerInfo.usingSkin.toString(),province:config.playerInfo.province.toString()},method:"POST",success:function(){console.log("\u4fee\u6539\u7528\u6237\u4fe1\u606f\u6210\u529f")},fail:function(){console.log("\u4fee\u6539\u7528\u6237\u4fe1\u606f\u5931\u8d25")}})},readPlayerInfo:function readPlayerInfo(data){config.playerInfo.creatAccountDate=JSON.parse(eval("("+data.creataccountdate+")")),config.playerInfo.data1=parseInt(data.data1),config.playerInfo.data2=parseInt(data.data2),config.playerInfo.data3=parseInt(data.data3),config.playerInfo.data4=parseInt(data.data4),config.playerInfo.data5=parseInt(data.data5),config.playerInfo.firstGame=JSON.parse(data.firstgame),config.playerInfo.firstLunchToday=JSON.parse(data.firstlunchtoday),config.playerInfo.firstPassToday=JSON.parse(eval("("+data.firstpasstoday+")")),config.playerInfo.highestMoneyToday=parseInt(data.highestmoneytoday),config.playerInfo.lastLunchDate=JSON.parse(eval("("+data.lastlunchdate+")")),config.playerInfo.lowestStepToday=parseInt(data.loweststeptoday),config.accountInfo.openID=data.openid,config.playerInfo.passedTime=parseInt(data.passedtime),config.playerInfo.passedYesterday=JSON.parse(data.passedyesterday),config.playerInfo.playTimesToday=parseInt(data.playtimestoday),config.playerInfo.province=data.province,config.playerInfo.starNum=parseInt(data.starnum),data.unlockedskin?config.playerInfo.unlockedSkin=data.unlockedskin.split(","):config.playerInfo.unlockedSkin=[],config.playerInfo.usingSkin=data.usingskin},checkSession:function(){ks.checkSession({success:function(){return!0},fail:function(){return!1}})},addUserScore:function(){ks.request({url:"http:/60.204.241.244:8079/cowplay/adduserscore",data:{openid:config.accountInfo.openID.toString(),score:config.playerInfo.highestMoneyToday},method:"POST",success:function(e){console.log(e)},fail:function(e){console.log(e)}})},getScoreToday:function(){var e=this;ks.request({url:"http:/60.204.241.244:8079/cowplay/getscore/today",method:"GET",success:function(t){t.data.data.list.length>0?(config.dailyRank=e.extractData(t.data.data.list,"daily"),config.dailyProgress=config.dailyRank.length):(config.dailyRank=[],config.dailyDone=!0)},fail:function(){config.dailyDone=!0}})},getScoreYesterday:function(){var e=this;ks.request({url:"http:/60.204.241.244:8079/cowplay/getscore/yesterday",method:"GET",success:function(t){config.yesterdayDone=!0,config.yesterdayRank=e.extractData(t.data.data.list,"yesterday")},fail:function(){config.yesterdayDone=!0}})},getScoreAll:function(){var e=this;ks.request({url:"http:/60.204.241.244:8079/cowplay/getscore/all",method:"GET",success:function(t){config.historyDone=!0,config.historyRank=e.extractData(t.data.data.list,"history")},fail:function(){config.historyDone=!0}})},extractData:function(e,t){for(var n=[],o=0;o<e.length;o++){var i={openid:e[o].openid,score:e[o].score,score_day:e[o].score_day,userinfo:null};n.push(i),this.getUserInfoByOpenId(e[o].openid,n,o,t)}return n},getDailyPlayerInfoByOpenId:function(e){for(var t=0;t<config.dailyRank.length;t++)if(config.dailyRank[t].openid==e)return[config.dailyRank[t].userinfo.nickname,config.dailyRank[t].score,config.dailyRank[t].userinfo.openid];return null},getSetting:function(){ks.getSetting({success:function(){},fail:function(){}})},shareAppMessage:function(){ks.shareAppMessage()},checkDesk:function(){ks.checkShortcut({success:function(e){return console.log("\u662f\u5426\u5df2\u6dfb\u52a0\u5feb\u6377\u65b9\u5f0f",e.installed),!!e.installed},fail:function(e){-10005===e.code?console.log("\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd"):console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f\u5931\u8d25",e.msg)}})},addDesk:function(){ks.addShortcut({success:function(){console.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f")},fail:function(e){-10005===e.code?console.log("\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd"):console.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25",e.msg)}})},activeShare:function(e){ks.shareAppMessage({success:function(){console.log("\u5206\u4eab\u6210\u529f"),config.playerInfo.data5-=1,config.UICtrl.getUIComponent("checkLayer").getReword(e),config.saver.initData()},fail:function(){console.log("\u5206\u4eab\u5931\u8d25"),cc.find("Canvas").getComponent("gameCtrl").stepCount<=0&&config.UICtrl.getUIComponent("checkLayer").settle()}})},transfromVersion:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var o=n[t],i=o[0],a=o[1];"saverVersion"!=i&&(config.playerInfo[i]=a)}},checkSaver:function(){config.saver.hasData("playerInfo")&&config.saver.getData("playerInfo")?config.playerInfo.creatAccountDate||config.saver.noteCreatAccountDate():(console.log("\u6ce8\u518c\u6e38\u620f\u8d26\u53f7"),config.saver.noteCreatAccountDate())},checkFirst:function(){config.saver.checkFirstLunchToday()?(console.log("\u662f\u4eca\u5929\u7b2c\u4e00\u6b21\u767b\u5f55"),config.playerInfo.highestMoneyToday>0||config.playerInfo.lowestStepToday>0||config.playerInfo.firstPassToday?config.playerInfo.passedYesterday=!0:config.playerInfo.passedYesterday=!1,config.playerInfo.highestMoneyToday=0,config.playerInfo.lowestStepToday=0,config.playerInfo.firstPassToday=null,config.playerInfo.playTimesToday=0,config.playerInfo.data4=0,config.playerInfo.data2=0,config.playerInfo.raceList=[],config.playerInfo.firstLunchToday=!0,config.playerInfo.data1>7&&(config.playerInfo.data1=0),config.playerInfo.data1+=1,config.playerInfo.missionList=this.drawSixDailyMissions(),config.playerInfo.missionProgress=0,config.playerInfo.behaviorDataCollection={shareGame:0,fourRemove:0,fiveRemove:0,watchAD:0,sell1000W:0,sell20Fruits:0,buyCommodity:0,checkRank:0,useAddStep:0,usePriceUp:0,useGetMoney:0},config.playerInfo.dailyCommodityList=this.drawFourDailyCommodities(),0==config.playerInfo.rank?config.playerInfo.starNum+=10:1==config.playerInfo.rank?config.playerInfo.starNum+=8:2==config.playerInfo.rank?config.playerInfo.starNum+=6:3==config.playerInfo.rank?config.playerInfo.starNum+=5:4==config.playerInfo.rank?config.playerInfo.starNum+=4:5==config.playerInfo.rank?config.playerInfo.starNum+=3:6==config.playerInfo.rank?config.playerInfo.starNum+=2:config.playerInfo.rank>=7&&config.playerInfo.rank<10&&(config.playerInfo.starNum+=1),config.playerInfo.rank=10,config.playerInfo.data5=1,console.log(config.playerInfo),console.log("\u5237\u65b0\u6bcf\u65e5\u6570\u636e")):console.log("\u4e0d\u662f\u4eca\u5929\u7b2c\u4e00\u6b21\u767b\u5f55"),config.saver.noteLunchDate(),config.saver.initData()},drawFourDailyCommodities:function(){for(var e=[],t=config.warehouse.json.dailyCommodityList.length,n=0;n<4;n++)e.push(Math.floor(Math.random()*t));return e},drawSixDailyMissions:function(){for(var e=[],t=config.warehouse.json.missionList.length,n=0;n<t;n++)e.push(n);for(;e.length>6;)e.splice(Math.floor(Math.random()*e.length),1);return e}},cc._RF.pop()},{}],leaveCtrl:[function(e,t){"use strict";cc._RF.push(t,"80dedmwj29HTJHQhoKxREpn","leaveCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){config.tools.addCallBackToButton(this.node,"leaveCtrl","leave",null,this.node)},leave:function(){config.eventDelegate.cleanAllEvent(),cc.director.loadScene("main")}}),cc._RF.pop()},{}],loadingCtrl:[function(e,t){"use strict";cc._RF.push(t,"90f1ecRJGVOnqZjxXdAK8L1","loadingCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.progressCount=0,this.totalRes=Object.keys(config.warehouse).length,this.hasLoadRes=0,this.loadGameAssets()},loadGameAssets:function(){this.loadMyRes("sprite",cc.SpriteFrame,"spriteFrame"),this.loadMyRes("json",cc.JsonAsset,"json"),this.loadMyRes("prefab",cc.Prefab,"prefabList")},loadMySub:function(e,t,n){var o=this;cc.assetManager.loadBundle(e,function(e,i){e||i.loadDir("",t,function(e,t){if(e);else{for(var i=0;i<t.length;i++){var a=t[i]instanceof cc.SpriteAtlas?t[i].name.slice(0,-6):t[i].name;t[i]instanceof cc.JsonAsset?config.warehouse[n][a]=t[i].json:config.warehouse[n][a]=t[i]}o.hasLoadRes+=1}})})},loadMyRes:function(e,t,n){var o=this;cc.resources.loadDir(e,t,function(e,t){if(e);else{for(var i=0;i<t.length;i++){var a=t[i]instanceof cc.SpriteAtlas?t[i].name.slice(0,-6):t[i].name;t[i]instanceof cc.JsonAsset?config.warehouse[n][a]=t[i].json:config.warehouse[n][a]=t[i]}o.hasLoadRes+=1}})},update:function(){this.hasLoadRes===this.totalRes&&(cc.director.loadScene("main"),this.hasLoadRes=0)}}),cc._RF.pop()},{}],mainCtrl:[function(e,t){"use strict";cc._RF.push(t,"4b546cskNhBkolgbDi0CoTG","mainCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],notificationCenter:[function(e,t){"use strict";cc._RF.push(t,"f5f695ONeBEwoNByVe5Eg0e","notificationCenter");var n=new cc.EventTarget;t.exports=n,cc._RF.pop()},{}],objectPool:[function(e,t){"use strict";cc._RF.push(t,"21f9fai0cNFZ6LLsDXPM5Vs","objectPool"),t.exports={poolList:{},creatNewPool:function(e){this.poolList[e]?this.poolList[e].clear():this.poolList[e]=new cc.NodePool},clearPool:function(e){this.poolList[e]&&this.poolList[e].clear()},get:function(e){if(this.poolList[e])return this.poolList[e].size()>0?this.poolList[e].get():null},put:function(e,t){this.poolList[e]&&this.poolList[e].put(t)}},cc._RF.pop()},{}],passSelectCtrl:[function(e,t){"use strict";cc._RF.push(t,"3e5765dpoJHorlwi2tEFqjt","passSelectCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=config.warehouse.json.passBaseData;this.total=e.length,this.currentPass=0,this.refreshPassName(),config.tools.addCallBackToButton(this.node,"passSelectCtrl","nextPass",null,this.node.getChildByName("next")),config.tools.addCallBackToButton(this.node,"passSelectCtrl","lastPass",null,this.node.getChildByName("last"))},refreshPassName:function(){var e=config.warehouse.json.passBaseData,t=e[this.currentPass].passName;this.node.getChildByName("passName").getComponent(cc.Label).string=t,config.passInfo=e[this.currentPass]},nextPass:function(){this.currentPass<this.total-1&&this.currentPass++,this.refreshPassName()},lastPass:function(){this.currentPass>0&&this.currentPass--,this.refreshPassName()}}),cc._RF.pop()},{}],playerData:[function(e,t){"use strict";cc._RF.push(t,"5fca7N1eVpFEIgIKmdqqTHp","playerData"),cc.Class({extends:cc.Component,properties:{currentHP:0,MaxHP:0,shield:0,hurtFix:0,energy:0,MaxEnergy:200,ATKFIx:0,chess0ATKFix:0,chess1ATKFix:0,chess2ATKFix:0,chess3ATKFix:0,chess4ATKFix:0,CSFix:0,chess0CSFix:0,chess1CSFix:0,chess2CSFix:0,chess3CSFix:0,chess4CSFix:0,CSDFix:0,chess0CSDFix:0,chess1CSDFix:0,chess2CSDFix:0,chess3CSDFix:0,chess4CSDFix:0},getATK:function(e){var t=e[0],n=e[1],o=this.getBaseATK(t);ATK=o*((100+this.ATKFIx+this.getATKFixBySet(n))/100);var i=100*Math.random(),a=ATK;i<=this.CSFix+this.getCSFixBySet(n)&&(a*=(200+this.getCSDFixBySet(n))/100);var c=this.elementCounter(e[0].element);return c>0?a*=1.5:c<0&&(a*=.5),a},getBaseATK:function(e){var t=this.getChessLevelById(e.id),n=e.attack;return n.basic+Math.pow(t,n.levelBasic)+t},getChessLevelById:function(e){return config.playerInfo.chessLevel[e]},getATKFixBySet:function(e){switch(e){case 0:return this.chess0ATKFix;case 1:return this.chess1ATKFix;case 2:return this.chess2ATKFix;case 3:return this.chess3ATKFix;case 4:return this.chess4ATKFix}},getCSFixBySet:function(e){switch(e){case 0:return this.chess0CSFix;case 1:return this.chess1CSFix;case 2:return this.chess2CSFix;case 3:return this.chess3CSFix;case 4:return this.chess4CSFix}},getCSDFixBySet:function(e){switch(e){case 0:return this.chess0CSDFix;case 1:return this.chess1CSDFix;case 2:return this.chess2CSDFix;case 3:return this.chess3CSDFix;case 4:return this.chess4CSDFix}},elementCounter:function(e){var t=this.enemyData.elementType;return 0==e&&1==t?1:1==e&&0==t?-1:1==e&&2==t?1:2==e&&1==t?-1:2==e&&3==t?1:3==e&&2==t?-1:3==e&&4==t?1:4==e&&3==t?-1:4==e&&0==t?1:0==e&&4==t?-1:0},getAttack:function(e){e*=(100+this.hurtFix)/100,console.log(e),this.shield>0&&(this.shield>e?this.shield-=e:(this.shield=0,e-=shield)),this.currentHP-=Math.floor(e),this.UI.refreshLife(),this.currentHP<=0&&console.log("\u6e38\u620f\u5931\u8d25")},getHeal:function(e){this.currentHP+=e,this.currentHP>=this.MaxHP&&(this.currentHP=this.MaxHP),this.UI.refreshLife()},changeEnergy:function(e){this.energy+=e,this.energy>this.MaxEnergy?this.energy=this.MaxEnergy:this.energy<0&&(this.energy=0),this.UI.refreshEnergy()},onLoad:function(){this.UI=this.node.getComponent("playerUICtrl"),this.enemyData=this.node.parent.getChildByName("enemy").getComponent("enemyData")}}),cc._RF.pop()},{}],playerUICtrl:[function(e,t){"use strict";cc._RF.push(t,"dfca7dWFBdF+7kcngSb+GBo","playerUICtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.playerData=this.node.getComponent("playerData"),this.life=this.node.getChildByName("life"),this.lifeNum=this.life.getChildByName("num"),this.energy=this.node.getChildByName("energy"),this.energyNum=this.energy.getChildByName("num")},refreshUI:function(){this.refreshLife(),this.refreshEnergy()},refreshLife:function(){this.life.getComponent(cc.ProgressBar).progress=this.playerData.currentHP/this.playerData.MaxHP,this.lifeNum.getComponent(cc.Label).string="\u751f\u547d\u503c:"+this.playerData.currentHP},refreshEnergy:function(){this.energy.getComponent(cc.ProgressBar).progress=this.playerData.energy/this.playerData.MaxEnergy,this.energyNum.getComponent(cc.Label).string="\u80fd\u91cf:"+this.playerData.energy}}),cc._RF.pop()},{}],randomResultCreator:[function(e,t){"use strict";cc._RF.push(t,"afe68hOqztHKLpHisuaGTw6","randomResultCreator"),t.exports={resultPool:{},creatPool:function(e){this.resultPool[e]?this.cleanPool(e):this.resultPool[e]={}},getNormalNum:function(e,t){return e+this.creatNormalNum()*t},getRandomNum:function(e,t){return e+Math.random()*(t-e)},creatNormalNum:function(){var e=0,t=0,n=0;do{n=(e=2*Math.random()-1)*e+(t=2*Math.random()-1)*t}while(0==n||n>=1);return e*Math.sqrt(-2*Math.log(n)/n)},addResult:function(e,t,n){this.resultPool[n]?this.resultPool[n][e]=t:(this.creatPool(n),this.resultPool[n][e]=t)},removeResult:function(){},cleanPool:function(e){this.resultPool[e]={}},cleanResultPool:function(){this.resultPool={}},getResult:function(e){var t=0;for(var n in this.resultPool[e])t+=this.resultPool[e][n];var o=Math.floor(Math.random()*(t+1));for(var i in t=0,this.resultPool[e])if(o<=(t+=this.resultPool[e][i]))return i}},cc._RF.pop()},{}],rush:[function(e,t){"use strict";cc._RF.push(t,"3542bQjvF5A+6ghDleaWJRr","rush"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],saver:[function(e,t){"use strict";cc._RF.push(t,"b2ffbhpqARJToTeCxVK3VEF","saver"),t.exports={hasData:function(e){return"undefined"==typeof wx?!!cc.sys.localStorage.getItem(e):!!this.getData(e)},getData:function(e){if("undefined"==typeof wx)return JSON.parse(cc.sys.localStorage.getItem(e));var t=wx.getStorageSync(e);return t?JSON.parse(t):null},storageData:function(e,t){"undefined"==typeof wx?cc.sys.localStorage.setItem(e,JSON.stringify(t)):wx.setStorage({key:e,data:JSON.stringify(t),success:function(){}})},reviseData:function(e,t){config.playerInfo[e]=t,this.storageData("playerInfo",config.playerInfo)},deleteData:function(e){"undefined"==typeof wx?cc.sys.localStorage.removeItem(e):wx.removeStorage({key:e,success:function(){}})},initData:function(){this.storageData("playerInfo",config.playerInfo)},refreshHighestMoney:function(e){e>config.playerInfo.highestMoneyToday&&this.reviseData("highestMoneyToday",e)},refreshFastestStepToday:function(e){e>config.playerInfo.lowestStepToday&&this.reviseData("lowestStepToday",e)},refreshFastestTimeToday:function(e){e>config.playerInfo.fastestTimeToday&&this.reviseData("fastestTimeToday",e)},checkFirstLunchToday:function(){if(config.playerInfo.lastLunchDate){var e=config.tools.compareTime(config.playerInfo.lastLunchDate,config.tools.getGameTime());return!(!e||e.year&&e.month&&e.date)}return!0},noteLunchDate:function(){config.playerInfo.lastLunchDate=config.tools.getGameTime(),this.initData()},noteCreatAccountDate:function(){config.playerInfo.creatAccountDate=config.tools.getGameTime(),this.initData()},checkSaverVersion:function(e){return!!e.saverVersion&&e.saverVersion==config.playerInfo.saverVersion},transferSaver:function(e){for(var t in e)if(Object.hasOwnProperty.call(e,t)){var n=e[t];config.playerInfo[t]=n}}},cc._RF.pop()},{}],tools:[function(e,t){"use strict";cc._RF.push(t,"8d3c4hM3utJF7+RduHh+EUr","tools"),t.exports={addCallBackToButton:function(e,t,n,o,i){var a=new cc.Component.EventHandler;a.target=e,a.component=t,a.handler=n,a.customEventData=o;var c=i.getComponent(cc.Button);c||(c=i.addComponent(cc.Button)),c.clickEvents.push(a)},cleanButtonCall:function(e){var t=e.getComponent(cc.Button);t&&(t.clickEvents=[])},addAnimationToNode:function(e,t,n,o,i){var a=e.getComponent(cc.Animation);a||(a=e.addComponent(cc.Animation));var c=cc.AnimationClip.createWithSpriteFrames(t,t.length);return c.name=n,c.wrapMode=o,c.speed=i,a.addClip(c),a},checkRectInScreen:function(e){var t=cc.rect(0,0,cc.winSize.width,cc.winSize.height),n=e.getBoundingBoxToWorld();return t.intersects(n)},vibrationEffect:function(){config.playerInfo.shake&&(cc.sys.os===cc.sys.OS_IOS||(cc.sys.os,cc.sys.OS_ANDROID),"undefined"!=typeof wx&&wx.vibrateShort({type:"medium"}))},getDistance:function(e,t){var n=cc.v2(e.x-t.x,e.y-t.y);return Math.sqrt(n.x*n.x+n.y*n.y)},getAngle:function(e,t){var n=t.x-e.x,o=t.y-e.y;return-cc.v2(n,o).signAngle(cc.v2(1,0))/Math.PI*180},shrinkNum:function(e){return e>=999999?(e/1e6).toString().slice(0,4)+"M":e>=9999?(e/1e3).toString().slice(0,4)+"K":e},nodeShake:function(e,t,n){var o=t.x,i=t.y,a=n;cc.tween(e).to(.05,{position:cc.v2(o+a,i+a)}).to(.05,{position:cc.v2(o+a,i-a)}).to(.05,{position:cc.v2(o-a,i+a)}).to(.05,{position:cc.v2(o-a,i-a)}).to(.05,{position:cc.v2(o,i)}).start()},loadAtlas:function(e){cc.assetManager.loadBundle("atlas",function(t,n){if(t);else for(var o=0;o<e.length;o++)n.loadDir(e[o],cc.SpriteAtlas,function(e,t){if(e);else for(var n=0;n<t.length;n++){var o=t[n]instanceof cc.SpriteAtlas?t[n].name.slice(0,-6):t[n].name;t[n]instanceof cc.JsonAsset?config.warehouse.atlas[o]=t[n].json:config.warehouse.atlas[o]=t[n]}})})},transfromPositionOnWorld:function(e){return e.convertToWorldSpaceAR(cc.v2(0,0))},transformPositionOnNode:function(e,t){var n=t.convertToWorldSpaceAR(cc.v2(0,0));return e.convertToNodeSpaceAR(n)},checkMidnight:function(){config.lastClickPoint?(config.thisClickPoint=config.tools.getGameTime(),23==config.thisClickPoint.hour&&(config.thisClickPoint.minute>=58?config.UICtrl.findUI("transformLaterRemind")||config.UICtrl.addUI("transformLaterRemind",config.UICtrl.findUI("other")):config.thisClickPoint.minute>=55&&(config.UICtrl.findUI("transformRemind")||config.UICtrl.addUI("transformRemind",config.UICtrl.findUI("other")))),23==config.lastClickPoint.hour&&config.lastClickPoint.minute<=59&&config.lastClickPoint.second<=59&&config.thisClickPoint.hour<=1&&(config.UICtrl.findUI("timeRemind")||config.UICtrl.addUI("timeRemind",config.UICtrl.findUI("other"))),config.thisClickPoint&&(config.lastClickPoint=config.thisClickPoint)):(config.lastClickPoint=config.tools.getGameTime(),23==config.lastClickPoint.hour&&config.lastClickPoint.minute>=55&&(config.UICtrl.findUI("transformRemind")||config.UICtrl.addUI("transformRemind",config.UICtrl.findUI("other"))))},getGameTime:function(){var e=new Date;return{year:e.getFullYear().toString(),month:e.getMonth().toString(),date:e.getDate().toString(),second:e.getSeconds().toString(),minute:e.getMinutes().toString(),hour:e.getHours().toString()}},getChessPic:function(e){"blue"==e&&(e="orange");var t=e+""+config.currentDate;return config.warehouse.spriteFrame[t]},checkDate:function(){var e=(new Date).getDay();config.currentDate=e},compareTime:function(e,t){var n={year:!1,month:!1,date:!1,hour:!1,minute:!1,second:!1};return e.year==t.year&&(n.year=!0),e.month==t.month&&(n.month=!0),e.date==t.date&&(n.date=!0),e.hour==t.hour&&(n.hour=!0),e.minute==t.minute&&(n.minute=!0),e.second==t.second&&(n.second=!0),n},loadAvatarPicOnKs:function(e){cc.loader.load({url:e,type:"png"},function(e,t){e&&console.error(e),config.avatarPic=t})},loadAvatarPic:function(e){cc.loader.load({url:e+"?aaa=aa.jpg ",type:"jpg"},function(e,t){e&&console.error(e),config.avatarPic=t})},addAvatar:function(e){e.getChildByName("mask").getChildByName("pic").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(config.avatarPic)},downloadAvatar:function(e,t){cc.loader.load({url:t+"?aaa=aa.jpg ",type:"jpg"},function(t,n){t&&console.error(t),e.getChildByName("mask").getChildByName("pic").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n)})},downloadAvatarOnKS:function(e,t){cc.loader.load({url:t,type:"png"},function(t,n){t&&console.error(t),e.getChildByName("mask").getChildByName("pic").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n)})},findBestPlayer:function(){if(config.dailyRank){var e=null;"undefined"==typeof wx||(e="undefined"==typeof KSGameGlobal?config.dailyRank.result.list.data:config.dailyRank);for(var t=e[0],n=0;n<e.length;n++)e[n].score>t.score&&(t=e[n]);return t}return null},findFastestPlayer:function(){if(config.dailyRank){var e=null;"undefined"==typeof wx||(e="undefined"==typeof KSGameGlobal?config.dailyRank.result.list.data:config.dailyRank);for(var t=null,n=0;n<e.length;n++)e[n].score>=1e4&&(t?parseInt(e[n].userinfo.loweststeptoday)<parseInt(t.userinfo.loweststeptoday)&&(t=e[n]):t=e[n]);return t}return null},findEarliestPlayer:function(){if(config.dailyRank){var e=null;if("undefined"==typeof wx||(e="undefined"==typeof KSGameGlobal?config.dailyRank.result.list.data:config.dailyRank),e.length<=0)return null;var t=e[0];if(t)for(var n=0;n<e.length;n++)e[n].userinfo.firstpasstoday&&(parseInt(t.userinfo.firstpasstoday.hour)>parseInt(e[n].userinfo.firstpasstoday.hour)?t=e[n]:parseInt(t.userinfo.firstpasstoday.hour)==parseInt(e[n].userinfo.firstpasstoday.hour)&&(parseInt(t.userinfo.firstpasstoday.minute)>parseInt(e[n].userinfo.firstpasstoday.minute)?t=e[n]:parseInt(t.userinfo.firstpasstoday.minute)==parseInt(e[n].userinfo.firstpasstoday.minute)&&parseInt(t.userinfo.firstpasstoday.second)>parseInt(e[n].userinfo.firstpasstoday.second)&&(t=e[n])));return t.userinfo.firstpasstoday?t:null}return null},getSomePlayers:function(e,t){var n=[];function o(e){for(var t=0;t<n.length;t++)if(n[t]==e)return!0;return!1}if(t.length>e)for(;n.length<e;){var i=Math.floor(Math.random()*t.length);t[i].openid!=config.accountInfo.openID&&(o(t[i].openid)||n.push(t[i].userinfo.openid))}else for(var a=0;a<t.length;a++)t[a].userinfo.openid!=config.accountInfo.openID&&n.push(t[a].userinfo.openid);return n},totalCollected:function(){for(var e=0,t=config.playerInfo.unlockedSkin,n=0;n<=config.totalSkin;n++)for(var o=0;o<t.length;o++)if(t[o]=="s"+n){e++;break}return e==config.totalSkin+1},checkSkinChipCollection:function(){function e(e){for(var t=0;t<config.playerInfo.unlockedSkin.length;t++)if(e==config.playerInfo.unlockedSkin[t])return!0;return!1}for(var t in config.playerInfo.skinFragmentProgress)config.playerInfo.skinFragmentProgress[t]>=10&&(e(t)?(config.playerInfo.starNum+=5,config.UICtrl.getUIComponent("starNum").refreshNum()):config.playerInfo.unlockedSkin.push(t))},getBaseChessDataByID:function(e){for(var t=config.warehouse.json.chessBaseData,n=0;n<t.length;n++)if(t[n].id==e)return t[n]},getChessEffectByLevel:function(e,t){var n,o=config.warehouse.json.chessEffectData;n=t<3?e["1levelDataID"]:t<5?e["3levelDataID"]:t<10?e["5levelDataID"]:t<15?e["10levelDataID"]:e["15levelDataID"];for(var i=0;i<o.length;i++)if(o[i].id==n)return o[i]},getChessIndex:function(e,t){for(var n=0;n<t.length;n++)for(var o=0;o<t[0].length;o++)if(t[n][o].bottom==e||t[n][o].middle==e)return t[n][o].index}},cc._RF.pop()},{}],warehouse:[function(e,t){"use strict";cc._RF.push(t,"99bd8oW6gFN2aCxT2y7LAns","warehouse"),t.exports={json:{},prefabList:{},spriteFrame:{}},cc._RF.pop()},{}],wxtools:[function(e,t){"use strict";cc._RF.push(t,"f3111CzMfNMkbYdgFzlDTzw","wxtools"),t.exports={initUserInfoButton:function(){var e=this;if("undefined"!=typeof wx){var t=wx.getSystemInfoSync(),n=t.windowWidth,o=t.windowHeight,i=wx.createImage();i.src="wxLocal/login_button.png";var a=wx.createUserInfoButton({type:"image",image:i.src,style:{left:n/2-86.67,top:.74*o,width:173.34,height:68.04}});a.onTap(function(){config.UICtrl.getUIComponent("loading").pushed||wx.requirePrivacyAuthorize({success:function(){e.info(),a.hide(),a.destroy(),config.UICtrl.getUIComponent("loading").pushed=!0,config.tools.vibrationEffect(),config.dj.playEffect(config.warehouse.sound["\u6309\u94ae"],1),config.wxTools.gameBeginInLoading()},fail:function(){wx.exitMiniProgram({success:function(){console.log("\u79bb\u5f00\u6e38\u620f")},fail:function(){console.log("\u79bb\u5f00\u6e38\u620f\u5931\u8d25")},complete:function(){console.log("\u8c03\u7528\u79bb\u5f00\u5b8c\u6210")}})}})})}},info:function(){wx.getUserInfo({success:function(e){var t=e.userInfo;config.tools.loadAvatarPic(t.avatarUrl),config.accountInfo.nickName=t.nickName,config.accountInfo.avatarlUrl=t.avatarUrl,wx.login({success:function(e){var t=e.code;wx.cloud.init({env:"cloud1-8gsd9cxlbfb94be6"}),wx.cloud.callFunction({name:"helloCloud",data:{message:t}}).then(function(e){config.accountInfo.openID=e.result.openid,config.UICtrl.getUIComponent("loading").lunched=!0,config.wxTools.checkCloudSaver()})}})}})},checkCloudSaver:function(){wx.cloud.callFunction({name:"checkCloud"}).then(function(e){e.result.res&&e.result.res.userinfo?(config.wxTools.downloadCloudSaver(e.result.res.userinfo),config.wxTools.checkCloudFirstEnter(),config.UICtrl.getUIComponent("cutting").cutToScene("game")):config.wxTools.creatSaver()},function(){config.wxTools.creatSaver()})},creatSaver:function(){config.saver.noteCreatAccountDate(),config.wxTools.translatePlayerInfo(),config.wxTools.updateCloudSaver(),config.UICtrl.getUIComponent("cutting").cutToScene("game")},translatePlayerInfo:function(){config.cloudPlayerSaver.avatarlUrl=config.accountInfo.avatarlUrl,config.cloudPlayerSaver.usingSkin=config.playerInfo.usingSkin,config.cloudPlayerSaver.unlockedSkin=config.playerInfo.unlockedSkin,config.cloudPlayerSaver.firstLunchToday=config.playerInfo.lastLunchDate,config.cloudPlayerSaver.UID=config.accountInfo.openID,config.cloudPlayerSaver.nickName=config.accountInfo.nickName,config.cloudPlayerSaver.province=config.playerInfo.province,config.cloudPlayerSaver.cowNum=config.playerInfo.passedTime,config.cloudPlayerSaver.starNum=config.playerInfo.starNum,config.cloudPlayerSaver.passNumToday=config.playerInfo.data4,config.cloudPlayerSaver.highestMoneyToday=config.playerInfo.highestMoneyToday,config.cloudPlayerSaver.lowestStepToday=config.playerInfo.lowestStepToday,config.cloudPlayerSaver.firstPassTimeToday=config.playerInfo.firstPassToday,config.cloudPlayerSaver.creatAccountDate=config.playerInfo.creatAccountDate,config.cloudPlayerSaver.firstGame=config.playerInfo.firstGame,config.cloudPlayerSaver.historyHighestMoney=config.playerInfo.data3},creatCloudSaver:function(){config.cloudPlayerSaver.avatarUrl=config.accountInfo.avatarlUrl,config.cloudPlayerSaver.UID=config.accountInfo.openID,config.cloudPlayerSaver.nickName=config.accountInfo.nickName,config.cloudPlayerSaver.creatAccountDate=config.tools.getGameTime(),console.log(config.cloudPlayerSaver.creatAccountDate)},updateCloudSaver:function(){"undefined"!=typeof wx&&wx.cloud.callFunction({name:"updateCloud",data:{userinfo:config.cloudPlayerSaver}}).then(function(e){console.log(e)},function(){console.log("\u5931\u8d25")})},refreshCloudSaver:function(){config.wxTools.translatePlayerInfo(),config.wxTools.updateCloudSaver()},checkCloudFirstEnter:function(){config.saver.checkFirstLunchToday()?(console.log("\u662f\u4eca\u5929\u7b2c\u4e00\u6b21\u767b\u5f55"),config.playerInfo.highestMoneyToday=0,config.playerInfo.lowestStepToday=0,config.playerInfo.firstPassToday=null,config.playerInfo.currentPlayer=0,config.playerInfo.playTimesToday=0,config.playerInfo.data5=2,config.playerInfo.data4=0,console.log("\u5237\u65b0\u6bcf\u65e5\u6570\u636e")):console.log("\u4e0d\u662f\u4eca\u5929\u7b2c\u4e00\u6b21\u767b\u5f55"),config.saver.noteLunchDate(),config.wxTools.refreshCloudSaver()},downloadCloudSaver:function(e){config.accountInfo.UID=e.UID,config.accountInfo.avatarlUrl=e.avatarlUrl,config.accountInfo.nickName=e.nickName,config.playerInfo.creatAccountDate=e.creatAccountDate,config.playerInfo.firstGame=e.firstGame,config.playerInfo.lastLunchDate=e.firstLunchToday,config.playerInfo.highestMoneyToday=e.highestMoneyToday,config.playerInfo.lowestStepToday=e.lowestStepToday,config.playerInfo.data4=e.passNumToday,config.playerInfo.province=e.province,config.playerInfo.starNum=e.starNum,config.playerInfo.unlockedSkin=e.unlockedSkin,config.playerInfo.usingSkin=e.usingSkin,config.playerInfo.passedTime=e.cowNum,config.playerInfo.firstPassToday=e.firstPassTimeToday,config.playerInfo.data3=e.historyHighestMoney},updatePlayerInfo:function(e,t){wx.cloud.callFunction({name:"rank",data:{userinfo:t}}).then(function(){},function(){console.log("\u5931\u8d25")})},downloadRankInfo:function(){wx.cloud.callFunction({name:"getRank"}).then(function(){},function(){console.log("\u5931\u8d25")})},downloadDailyRankInfo:function(){wx.cloud.callFunction({name:"getDailyRank"}).then(function(e){config.dailyRank=e,config.dailyDone=!0},function(){console.log("\u4e0b\u8f7d\u6bcf\u65e5\u6392\u884c\u699c\u5931\u8d25"),config.dailyDone=!0})},downloadHistoryRankInfo:function(){wx.cloud.callFunction({name:"getHistoryRank"}).then(function(e){config.historyRank=e,config.historyDone=!0},function(){console.log("\u4e0b\u8f7d\u5386\u53f2\u6392\u884c\u699c\u5931\u8d25"),config.historyDone=!0})},downloadYesterdayRankInfo:function(){wx.cloud.callFunction({name:"getYesterdayRank"}).then(function(e){config.yesterdayRank=e,config.yesterdayDone=!0},function(){console.log("\u4e0b\u8f7d\u6628\u65e5\u6392\u884c\u699c\u5931\u8d25"),config.yesterdayDone=!0})},updateDailyRankInfo:function(e,t,n,o){"undefined"!=typeof wx&&wx.cloud.callFunction({name:"sendDailyRank",data:{scorenum:e,cownum:t,stepnum:n,userinfo:o}}).then(function(){},function(){console.log("\u4e0a\u4f20\u73a9\u5bb6\u6210\u7ee9\u5230\u6bcf\u65e5\u6392\u884c\u699c\u5931\u8d25")})},updateHistoryRankInfo:function(e,t,n,o){"undefined"!=typeof wx&&wx.cloud.callFunction({name:"sendHistoryRank",data:{scorenum:e,cownum:t,stepnum:n,userinfo:o}}).then(function(){},function(){console.log("\u4e0a\u4f20\u73a9\u5bb6\u6210\u7ee9\u5230\u5386\u53f2\u6392\u884c\u699c\u5931\u8d25")})},activeShare:function(){if("undefined"!=typeof wx){var e=Math.floor(4*Math.random()),t="",n="";0==e?(t="\u5b9a\u4e2a\u5c0f\u76ee\u6807\uff0c\u6323\u5b83\u4e00\u4e2a\u4ebf",n="wxLocal/0.png"):1==e?(t="\u4eca\u5929\u4f60\u6323\u5230\u4e00\u4e2a\u4ebf\u4e86\u5417",n="wxLocal/1.png"):2==e?(t="\u4eca\u5929\u662f\u725b\u5e02\uff0c\u8d76\u7d27\u6765\u51fa\u4ed3",n="wxLocal/2.png"):(t="\u8eba\u51fa\u4e00\u4e2a\u4ebf\uff0c\u4f60\u53ef\u4ee5",n="wxLocal/3.png"),wx.shareAppMessage({title:t,imageUrl:n})}},passiveShare:function(){wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]});var e=Math.floor(4*Math.random()),t="",n="";0==e?(t="\u5b9a\u4e2a\u5c0f\u76ee\u6807\uff0c\u6323\u5b83\u4e00\u4e2a\u4ebf",n="wxLocal/0.png"):1==e?(t="\u4eca\u5929\u4f60\u6323\u5230\u4e00\u4e2a\u4ebf\u4e86\u5417",n="wxLocal/1.png"):2==e?(t="\u4eca\u5929\u662f\u725b\u5e02\uff0c\u8d76\u7d27\u6765\u51fa\u4ed3",n="wxLocal/2.png"):(t="\u8eba\u51fa\u4e00\u4e2a\u4ebf\uff0c\u4f60\u53ef\u4ee5",n="wxLocal/3.png"),wx.onShareAppMessage(function(){return{title:t,imageUrl:n}})},creatGameClub:function(){if("undefined"!=typeof wx){var e=wx.getSystemInfoSync(),t=e.windowWidth,n=e.windowHeight,o=wx.createGameClubButton({type:"image",image:"wxLocal/\u6e38\u620f\u5708.png",icon:"green",style:{left:.815*t,top:.38*n,width:50.76,height:58.86}});config.UICtrl.UIList.GameClubButton=o}},showGameClub:function(){"undefined"!=typeof wx&&config.UICtrl.findUI("GameClubButton")&&config.UICtrl.UIList.GameClubButton.show()},hideGameClub:function(){"undefined"!=typeof wx&&config.UICtrl.findUI("GameClubButton")&&config.UICtrl.UIList.GameClubButton.hide()},cancelGameClub:function(){"undefined"!=typeof wx&&config.UICtrl.findUI("GameClubButton")&&(config.UICtrl.UIList.GameClubButton.destroy(),config.UICtrl.UIList.GameClubButton=null)},shareCanvas:function(){var e=this;if("undefined"!=typeof wx&&!this.clicked){this.clicked=!0;var t=canvas.toTempFilePathSync({x:0,y:canvas.height/5,fileType:"jpg",quality:"1"}),n=setInterval(function(){clearInterval(n),e.sharePic(t),e.clicked=!1},1e3)}},sharePic:function(e){clearInterval(this.sharePic),wx.shareAppMessage({imageUrl:e})},initAdv:function(){},showAdv:function(){},getPlayerNum:function(){},ADScene:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHs",branchDim:"",eventType:1})},ADSceneClick:function(){if("undefined"!=typeof wx){var e=cc.find("Canvas").getComponent("gameCtrl").stepCount;wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHs",branchDim:""+e,eventType:2})}},ADShow:function(){if("undefined"!=typeof wx){var e=cc.find("Canvas").getComponent("gameCtrl").stepCount;wx.createRewardedVideoAd().show({branchId:"BCBgAAoXHx5d0rCbeq-tHs",branchDim:""+e})}},leaveClickInTeach:function(){if("undefined"!=typeof wx&&config.playerInfo.firstGame){var e=cc.find("Canvas").getComponent("gameCtrl").stepCount;wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHq",branchDim:""+e,eventType:2})}},passSceneInTeach:function(){if("undefined"!=typeof wx&&config.playerInfo.firstGame){var e=cc.find("Canvas").getComponent("gameCtrl").stepCount;wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHr",branchDim:""+e,eventType:1})}},passClickInTeach:function(){if("undefined"!=typeof wx&&config.playerInfo.firstGame){var e=cc.find("Canvas").getComponent("gameCtrl").stepCount;wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHr",branchDim:""+e,eventType:2})}},assetsTeach:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH7",branchDim:"",eventType:1})},assetsTeachPoint:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH7",branchDim:"",eventType:2})},stepTeach:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH8",branchDim:"",eventType:1})},stepTeachPoint:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH8",branchDim:"",eventType:2})},sellTeach:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH9",branchDim:"",eventType:1})},sellTeachPoint:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH9",branchDim:"",eventType:2})},boardTeach:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH-",branchDim:"",eventType:1})},boardTeachPoint:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH-",branchDim:"",eventType:2})},priceBoard:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH_",branchDim:"",eventType:1})},priceBoardPoint:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH_",branchDim:"",eventType:2})},sceneBeforeGameBegin:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHt",branchDim:"",eventType:1})},gameBeginInRank:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHt",branchDim:""+config.playerInfo.playTimesToday,eventType:2})},leaveInRank:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH6",branchDim:"",eventType:2})},passStage1:function(){if("undefined"!=typeof wx){var e=config.UICtrl.getUIComponent("priceBoard").getAveragePrice();wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHu",branchDim:""+e,eventType:1})}},giveupStage1:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHj",branchDim:""+config.usedAD,eventType:2})},passStage2:function(){if("undefined"!=typeof wx){var e=config.UICtrl.getUIComponent("priceBoard").getAveragePrice();wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHv",branchDim:""+e,eventType:1})}},giveupStage2:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHk",branchDim:""+config.usedAD,eventType:2})},passStage3:function(){if("undefined"!=typeof wx){var e=config.UICtrl.getUIComponent("priceBoard").getAveragePrice();wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHg",branchDim:""+e,eventType:1})}},giveupStage3:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHi",branchDim:""+config.usedAD,eventType:2})},leaveInGame:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH5",branchDim:"",eventType:2})},backToRankInSettle:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHl",branchDim:""+config.playerInfo.playTimesToday,eventType:2})},replayInSettle:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHm",branchDim:""+config.playerInfo.playTimesToday,eventType:2})},gameBeginInLoading:function(){"undefined"!=typeof wx&&wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tHn",branchDim:"",eventType:2})},leaveInLoading:function(){if("undefined"!=typeof wx){var e=Math.floor(cc.find("Canvas/New ProgressBar").getComponent(cc.ProgressBar).progress);wx.reportUserBehaviorBranchAnalytics({branchId:"BCBgAAoXHx5d0rCbeq-tH4",branchDim:""+e,eventType:2})}}},cc._RF.pop()},{}]},{},["Game","Helloworld","Player","rush","enemyUICtrl","leaveCtrl","playerUICtrl","boardLayerCtrl","cellBase","chessDealer","enemyData","enemyDealer","gameCtrl","playerData","loadingCtrl","gameBeginCtrl","mainCtrl","passSelectCtrl","UICtrl","animCtrl","config","dj","eventDelegate","kstools","notificationCenter","objectPool","randomResultCreator","saver","tools","warehouse","wxtools"]);